<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Handwriting Recognition API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version cace53f8c, updated Tue Dec 7 12:12:54 2021 -0800" name="generator">
  <link href="https://wicg.github.io/handwriting-recognition/" rel="canonical">
<style>
  /* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-dfn-panel */

:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    height: auto;
    width: -webkit-fit-content;
    width: fit-content;
    max-width: 300px;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0; }
.dfn-panel li { list-style: inside; }
.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled { cursor: pointer; }
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

            pre.idl.highlight {
                background: var(--borderedblock-bg, var(--def-bg));
            }
            
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Handwriting Recognition API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2021-12-08">8 December 2021</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/handwriting-recognition/">https://wicg.github.io/handwriting-recognition/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="127621"><a class="p-name fn u-url url" href="https://wacky.one/">Jiewei Qian</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:qjw@google.com">qjw@google.com</a>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/handwriting-recognition">GitHub WICG/handwriting-recognition</a> (<a href="https://github.com/WICG/handwriting-recognition/issues/new">new issue</a>, <a href="https://github.com/WICG/handwriting-recognition/issues?state=open">open issues</a>)
     <dt>Commits:
     <dd><a href="https://github.com/WICG/handwriting-recognition/commits/main/spec.bs">GitHub spec.bs commits</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2021 the Contributors to the Handwriting Recognition API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The handwriting recognition API enables web application to recognize handwritten texts, using existing operating system capabilities.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content"> Introduction </span></a>
    <li><a href="#introduction-handwriting"><span class="secno">2</span> <span class="content"> Definitions </span></a>
    <li>
     <a href="#api-query"><span class="secno">3</span> <span class="content">Feature Query</span></a>
     <ol class="toc">
      <li><a href="#api-query-handwriting-recognizer"><span class="secno">3.1</span> <span class="content"><span><code class="idl"><span>queryHandwritingRecognizer(constraint)</span></code></span></span></a>
      <li><a href="#api-handwriting-model-constraint"><span class="secno">3.2</span> <span class="content"><code class="idl"><span>HandwritingModelConstraint</span></code> attributes</span></a>
      <li>
       <a href="#api-handwriting-recognizer-query-result"><span class="secno">3.3</span> <span class="content"><code class="idl"><span>HandwritingRecognizerQueryResult</span></code> attributes </span></a>
       <ol class="toc">
        <li><a href="#api-handwriting-hints-query-result"><span class="secno">3.3.1</span> <span class="content"><code class="idl"><span>HandwritingHintsQueryResult</span></code> attributes </span></a>
       </ol>
     </ol>
    <li>
     <a href="#create-a-handwriting-recognizer"><span class="secno">4</span> <span class="content">Create a handwriting recognizer</span></a>
     <ol class="toc">
      <li><a href="#api-create-handwriting-recognizer"><span class="secno">4.1</span> <span class="content"><span><code class="idl"><span>createHandwritingRecognizer(constraint)</span></code></span> method </span></a>
     </ol>
    <li>
     <a href="#using-a-recognizer"><span class="secno">5</span> <span class="content">Use a recognizer</span></a>
     <ol class="toc">
      <li><a href="#handwriting-recognizer-object"><span class="secno">5.1</span> <span class="content"><code class="idl"><span>HandwritingRecognizer</span></code> object </span></a>
      <li><a href="#handwriting-recognizer-create-drawing"><span class="secno">5.2</span> <span class="content"><span><code class="idl"><span>startDrawing(hints)</span></code></span></span></a>
      <li><a href="#handwriting-recognizer-finish"><span class="secno">5.3</span> <span class="content"><span><code class="idl"><span>finish()</span></code></span></span></a>
     </ol>
    <li>
     <a href="#handwriting-drawing"><span class="secno">6</span> <span class="content">Build a <code class="idl"><span>HandwritingDrawing</span></code></span></a>
     <ol class="toc">
      <li>
       <a href="#handwriting-stroke"><span class="secno">6.1</span> <span class="content"><code class="idl"><span>HandwritingStroke</span></code></span></a>
       <ol class="toc">
        <li><a href="#handwriting-stroke-constructor"><span class="secno">6.1.1</span> <span class="content"><code class="idl"><span>HandwritingStroke()</span></code></span></a>
        <li><a href="#handwriting-stroke-add-point"><span class="secno">6.1.2</span> <span class="content"><code class="idl"><span>addPoint(point)</span></code></span></a>
        <li><a href="#handwriting-stroke-get-points"><span class="secno">6.1.3</span> <span class="content"><code class="idl"><span>getPoints()</span></code></span></a>
        <li><a href="#handwriting-stroke-clear"><span class="secno">6.1.4</span> <span class="content"><code class="idl"><span>clear()</span></code></span></a>
       </ol>
      <li>
       <a href="#handwriting-drawing-stroke-methods"><span class="secno">6.2</span> <span class="content"><code class="idl"><span>HandwritingDrawing</span></code></span></a>
       <ol class="toc">
        <li><a href="#handwriting-drawing-add-stroke"><span class="secno">6.2.1</span> <span class="content"><code class="idl"><span>addStroke(stroke)</span></code></span></a>
        <li><a href="#handwriting-drawing-remove-stroke"><span class="secno">6.2.2</span> <span class="content"><code class="idl"><span>removeStroke(stroke)</span></code></span></a>
        <li><a href="#handwriting-drawing-get-strokes"><span class="secno">6.2.3</span> <span class="content"><code class="idl"><span>getStrokes()</span></code></span></a>
        <li><a href="#handwriting-drawing-clear"><span class="secno">6.2.4</span> <span class="content"><code class="idl"><span>clear()</span></code></span></a>
       </ol>
     </ol>
    <li>
     <a href="#get-predictions-of-a-drawing"><span class="secno">7</span> <span class="content">Get predictions of a <code class="idl"><span>HandwritingDrawing</span></code></span></a>
     <ol class="toc">
      <li><a href="#handwriting-drawing-get-prediction"><span class="secno">7.1</span> <span class="content"><code class="idl"><span>getPrediction()</span></code></span></a>
      <li>
       <a href="#handwriting-prediction"><span class="secno">7.2</span> <span class="content"><code class="idl"><span>HandwritingPrediction</span></code> attributes</span></a>
       <ol class="toc">
        <li><a href="#handwriting-segment"><span class="secno">7.2.1</span> <span class="content"><code class="idl"><span>HandwritingSegment</span></code> attributes</span></a>
        <li><a href="#handwriting-drawing-segment"><span class="secno">7.2.2</span> <span class="content"><code class="idl"><span>HandwritingDrawingSegment</span></code> attributes</span></a>
       </ol>
     </ol>
    <li><a href="#privacy consideration"><span class="secno">8</span> <span class="content">Privacy Considerations</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
<script async src="https://resources.whatwg.org/file-issue.js"></script>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content"> Introduction </span><a class="self-link" href="#introduction"></a></h2>
   <ul>
    <li data-md>
     <p>This section is non-normative. *</p>
   </ul>
   <p>Handwriting inputs are drawings. A drawing captures the information required to recreate human’s pen-tip movements digitally.</p>
   <p>The API proposed here aims to expose operating system capabilities to the Web. We expect handwriting recognition capabilities to vary depending on the operating system, so the API aims to achieve a flexible design that can easily integrate with operating system specific features.</p>
   <p>We expect user agents to convert Web API data structure (defined in this spec) to the ones available on the host operating system, and connect the Web API with operating system APIs.</p>
   <p>The API doesn’t attempt to define recognition that behaves the same on all platforms.</p>
   <h2 class="heading settled" data-level="2" id="introduction-handwriting"><span class="secno">2. </span><span class="content"> Definitions </span><a class="self-link" href="#introduction-handwriting"></a></h2>
    In this spec, we define the following concepts, using the handwritten “WEB” for example: 
   <p><img alt="Handwriting Concepts" src="images/handwriting-concept.svg" width="100%"></p>
   <ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="drawing">drawing</dfn> consists of multiple strokes (e.g. the above letter E consists of three strokes).</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stroke">stroke</dfn> represents one continuous pen-tip movement that happens in a time period (e.g. from one <a href="https://www.w3.org/TR/touch-events/#the-touchstart-event"><code>touchstart</code></a> to its corresponding <a href="https://www.w3.org/TR/touch-events/#the-touchend-event"><code>touchend</code></a> event). The movement trajectory is represented by a series of <a data-link-type="dfn" href="#point" id="ref-for-point">points</a>.</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="point">point</dfn> is an observation of the pen-tip in space and time. It records the timestamp and position of the pen-tip on the writing surface (e.g. a <a href="https://www.w3.org/TR/touch-events/#the-touchmove-event"><code>touchmove</code></a> event).</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="transcription">transcription</dfn> is a string of Unicode characters that represents the text written in a drawing (e.g. string "WEB").</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="handwriting-recognizer">handwriting recognizer</dfn> is an interface (usually implemented by an external application or a service) that:</p>
   <ul>
    <li data-md>
     <p>Takes a <a data-link-type="dfn" href="#drawing" id="ref-for-drawing">drawing</a> as input</p>
    <li data-md>
     <p>Output several <a data-link-type="dfn" href="#transcription" id="ref-for-transcription">transcriptions</a> of the drawing</p>
    <li data-md>
     <p>Optionally, output <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation">segmentation</a> information about each <a data-link-type="dfn" href="#transcription" id="ref-for-transcription①">transcription</a></p>
   </ul>
   <p>What constitutes a handwriting recognizer is at the discretion of the user agent.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="convert-data-format">convert</dfn> data into and from a suitable format for handwriting recognizer, the user agent should match what’s defined in this spec to equivalent concepts used in <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer">handwriting recognizer</a>.</p>
   <div class="note" role="note">
     Some handwriting recognizers available on operating systems include: 
    <ul>
     <li data-md>
      <p><a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking">Microsoft Windows Ink (UWP)</a></p>
     <li data-md>
      <p><a href="https://developer.apple.com/documentation/pencilkit">Apple PencilKit</a></p>
     <li data-md>
      <p><a href="https://docs.google.com/document/d/1ezUf1hYTeFS2f5JUHZaNSracu2YmSBrjLkri6k6KB_w/edit#heading=h.5ugemo7p04z9">Chrome OS ML Service</a></p>
    </ul>
   </div>
   <p>A <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①">handwriting recognizer</a> may output extra information to help web applications better process the handwriting (e.g. delete a character from the handwriting).</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="segmentation">Segmentation</dfn> maps graphemes (user-perceived character) to their composing strokes and points. A grapheme can span multiple Unicode code points.</p>
   <div class="example" id="grapheme"><a class="self-link" href="#grapheme"></a> x is composed of one UTF-16 code point: <code>\u0078</code> <br> g̈ is composed of two UTF-16 code points: <code>\u0067\u0308</code>.<br> षि is composed of two UTF-16 code points: <code>\u0937\u093f</code>. </div>
   <p>Take the handwritten text "int" for example:</p>
   <p><img alt="Handwriting Segmentation" src="images/segmentation-concept.svg" width="360px"></p>
   <ul>
    <li data-md>
     <p>Stroke 1 and 5 makes up letter "i"</p>
    <li data-md>
     <p>Stroke 2 makes up letter "n"</p>
    <li data-md>
     <p>Stroke 3 and 4 makes up letter "t"</p>
   </ul>
   <div class="example" id="character-editing"><a class="self-link" href="#character-editing"></a> If the application wants to delete character "t", it can remove stroke 3 and 4 from the drawing. </div>
   <h2 class="heading settled" data-dfn-for="Navigator" data-level="3" id="api-query"><span class="secno">3. </span><span class="content">Feature Query</span><a class="self-link" href="#api-query"></a></h2>
   <p>Feature query interface provides allows web applications to query implementation-specific capabilities, so they can decide whether to use its feature.</p>
<pre class="example highlight" id="example-query"><a class="self-link" href="#example-query"></a><c- a>const</c-> modelConstraint <c- o>=</c-> <c- p>{</c-> languages<c- o>:</c-> <c- p>[</c-><c- t>'zh-CN'</c-><c- p>,</c-> <c- t>'en'</c-><c- p>]</c-> <c- p>};</c->
<c- a>const</c-> modelDesc <c- o>=</c-> <c- k>await</c-> navigator<c- p>.</c->queryHandwritingRecognizer<c- p>(</c->modelConstraint<c- p>);</c->

<c- c1>// `modelDesc` describes the handwriting recognizer meeting the `modelConstraint`.</c->
<c- c1>// If the constraints can’t be satisfied, `modelDesc` will be null.</c->
<c- p>{</c->
  textAlternatives<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
  textSegmentation<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
  hints<c- o>:</c-> <c- p>{</c->
    alternatives<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
    textContext<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
    inputTypes<c- o>:</c-> <c- p>[</c-><c- t>'mouse'</c-><c- p>,</c-> <c- t>'touch'</c-><c- p>,</c-> <c- t>'stylus'</c-><c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult"><c- n>HandwritingRecognizerQueryResult</c-></a>?>
      <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="method" data-export data-lt="queryHandwritingRecognizer(constraint)" id="dom-navigator-queryhandwritingrecognizer"><code><c- g>queryHandwritingRecognizer</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <dfn class="idl-code" data-dfn-for="Navigator/queryHandwritingRecognizer(constraint)" data-dfn-type="argument" data-export id="dom-navigator-queryhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code><a class="self-link" href="#dom-navigator-queryhandwritingrecognizer-constraint-constraint"></a></dfn>);
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingmodelconstraint"><code><c- g>HandwritingModelConstraint</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingModelConstraint" data-dfn-type="dict-member" data-export data-type="sequence<DOMString> " id="dom-handwritingmodelconstraint-languages"><code><c- g>languages</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingrecognizerqueryresult"><code><c- g>HandwritingRecognizerQueryResult</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-handwritingrecognizerqueryresult-textalternatives"><code><c- g>textAlternatives</c-></code><a class="self-link" href="#dom-handwritingrecognizerqueryresult-textalternatives"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-handwritingrecognizerqueryresult-textsegmentation"><code><c- g>textSegmentation</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult"><c- n>HandwritingHintsQueryResult</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="HandwritingHintsQueryResult " id="dom-handwritingrecognizerqueryresult-hints"><code><c- g>hints</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritinghintsqueryresult"><code><c- g>HandwritingHintsQueryResult</c-></code></dfn> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritingrecognitiontype" id="ref-for-enumdef-handwritingrecognitiontype"><c- n>HandwritingRecognitionType</c-></a>> <dfn class="idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingRecognitionType> " id="dom-handwritinghintsqueryresult-recognitiontype"><code><c- g>recognitionType</c-></code><a class="self-link" href="#dom-handwritinghintsqueryresult-recognitiontype"></a></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritinginputtype" id="ref-for-enumdef-handwritinginputtype"><c- n>HandwritingInputType</c-></a>> <dfn class="idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingInputType> " id="dom-handwritinghintsqueryresult-inputtype"><code><c- g>inputType</c-></code><a class="self-link" href="#dom-handwritinghintsqueryresult-inputtype"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-handwritinghintsqueryresult-textcontext"><code><c- g>textContext</c-></code><a class="self-link" href="#dom-handwritinghintsqueryresult-textcontext"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-handwritinghintsqueryresult-alternatives"><code><c- g>alternatives</c-></code><a class="self-link" href="#dom-handwritinghintsqueryresult-alternatives"></a></dfn>;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-handwritingrecognitiontype"><code><c- g>HandwritingRecognitionType</c-></code></dfn>{
  <dfn class="idl-code" data-dfn-for="HandwritingRecognitionType" data-dfn-type="enum-value" data-export id="dom-handwritingrecognitiontype-text"><code><c- s>"text"</c-></code><a class="self-link" href="#dom-handwritingrecognitiontype-text"></a></dfn>, <dfn class="idl-code" data-dfn-for="HandwritingRecognitionType" data-dfn-type="enum-value" data-export id="dom-handwritingrecognitiontype-per-character"><code><c- s>"per-character"</c-></code><a class="self-link" href="#dom-handwritingrecognitiontype-per-character"></a></dfn>
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-handwritinginputtype"><code><c- g>HandwritingInputType</c-></code></dfn> {
  <dfn class="idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-mouse"><code><c- s>"mouse"</c-></code><a class="self-link" href="#dom-handwritinginputtype-mouse"></a></dfn>, <dfn class="idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-stylus"><code><c- s>"stylus"</c-></code><a class="self-link" href="#dom-handwritinginputtype-stylus"></a></dfn>, <dfn class="idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-touch"><code><c- s>"touch"</c-></code><a class="self-link" href="#dom-handwritinginputtype-touch"></a></dfn>
};
</pre>
   <h3 class="heading settled" data-level="3.1" id="api-query-handwriting-recognizer"><span class="secno">3.1. </span><span class="content"><dfn data-dfn-type="dfn" data-export id="queryhandwritingrecognizer-constraint"><code class="idl"><a data-link-type="idl" href="#dom-navigator-queryhandwritingrecognizer" id="ref-for-dom-navigator-queryhandwritingrecognizer">queryHandwritingRecognizer(constraint)</a></code><a class="self-link" href="#queryhandwritingrecognizer-constraint"></a></dfn></span><a class="self-link" href="#api-query-handwriting-recognizer"></a></h3>
   <p>This method offers web applications a way to query the underlying recognizer’s capability and decide whether they want to use the recognizer:</p>
   <ul>
    <li data-md>
     <p>If the constraint can be satisfied, resolves to a description of the handwriting recognizer,</p>
    <li data-md>
     <p>if the constraint can’t be satisfied, resolves to <code>null</code></p>
   </ul>
   <p>The same <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint①">HandwritingModelConstraint</a></code> can be used to invoke <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer">createHandwritingRecognizer(constraint)</a></code> to create a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer">HandwritingRecognizer</a></code> that satisfies the constraint.</p>
   <div class="algorithm" data-algorithm="navigator-query-handwriting-recognizer">
     When <code class="idl"><a data-link-type="idl" href="#dom-navigator-queryhandwritingrecognizer" id="ref-for-dom-navigator-queryhandwritingrecognizer①">queryHandwritingRecognizer(constraint)</a></code> method is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>constraint</var> doesn’t have a <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages">languages</a></code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code></p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a></p>
      <ol>
       <li data-md>
        <p>If <var>constraint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages①">languages</a></code> member is an empty array, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a> <var>p</var> with <code>null</code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format">Convert <var>constraint</var> into a suitable form for handwriting recognizer</a>.</p>
       <li data-md>
        <p>If the user agent can’t find or create a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②">handwriting recognizer</a> that satisfies the converted <var>constraint</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">resolve</a> <var>p</var> with <code>null</code> and abort.</p>
       <li data-md>
        <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult①">HandwritingRecognizerQueryResult</a></code></p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format①">Convert the handwriting recognizer’s feature description</a>, and fills in all members of <var>result</var>,.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
    </ol>
    <p>The implementation should follow these rules when converting to <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult②">HandwritingRecognizerQueryResult</a></code> and <code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult①">HandwritingHintsQueryResult</a></code>:</p>
    <ul>
     <li data-md>
      <p>If the recognizer doesn’t accept any hint, set <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizerqueryresult-hints" id="ref-for-dom-handwritingrecognizerqueryresult-hints">hints</a></code> to <code>null</code>.</p>
     <li data-md>
      <p>If a feature or hint isn’t supported, set its attribute to <code>null</code>.</p>
     <li data-md>
      <p>If a enum hint is supported, set its attribute to the list of acceptable values.</p>
     <li data-md>
      <p>If a non-enum hint is supported, set its attribute to <code>true</code>.</p>
    </ul>
   </div>
   <h3 class="heading settled" data-level="3.2" id="api-handwriting-model-constraint"><span class="secno">3.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint②">HandwritingModelConstraint</a></code> attributes</span><a class="self-link" href="#api-handwriting-model-constraint"></a></h3>
   <p>This describes the constraint that must be satisfied by the underlying handwriting recognizer (if it will be created).</p>
   <p>This is also used to create a handwriting recognizer in <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer①">createHandwritingRecognizer(constraint)</a></code>.</p>
   <dl>
    <dt><code>languages</code>
    <dd>A list of <a data-link-type="biblio" href="#biblio-bcp47">[BCP47]</a> language tags that describes the languages that the recognizer has to recognize.
    <p>If more than one language is provided, the recognizer has to recognize all of them to satisfy the constraint.</p>
    <p>User agents should consider all possible scripts of a given language tag. For example, a handwriting recognizer that only recognizes Azerbaijani in Latin alphabet ("az-Latn") shouldn’t be used for "az" language tag, because Azerbaijani can also be written in Cyrillic alphabet ("az-Cyrl").</p>
    <p class="domintro non-normative">Consider using the most specific language tag when the distinction between scripts matters. For example, use "az-Latn" if the application only needs to work with Azerbaijani in latin scripts.</p>
    <p class="domintro non-normative">Some recognizers only work with a single language. Consider creating one recognizer for each language for better interoperability.</p>
   </dl>
   <h3 class="heading settled" data-level="3.3" id="api-handwriting-recognizer-query-result"><span class="secno">3.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult③">HandwritingRecognizerQueryResult</a></code> attributes </span><a class="self-link" href="#api-handwriting-recognizer-query-result"></a></h3>
   <p>This describes intrinsic features of a handwriting recognizer implementation.</p>
   <dl>
    <dt><code>textAlternatives</code>
    <dd>A boolean indicating whether the implementation returns multiple candidates <a data-link-type="dfn" href="#transcription" id="ref-for-transcription②">transcriptions</a> instead of a single one.
    <dt><code>textSegmentation</code>
    <dd>A boolean indicating whether the implementation returns <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation①">segmentation</a> information for each transcription.
    <dt><code>hints</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult②">HandwritingHintsQueryResult</a></code> object that describes acceptable hints in <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing">startDrawing()</a></code>.
   </dl>
   <h4 class="heading settled" data-level="3.3.1" id="api-handwriting-hints-query-result"><span class="secno">3.3.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult③">HandwritingHintsQueryResult</a></code> attributes </span><a class="self-link" href="#api-handwriting-hints-query-result"></a></h4>
   <p>This describes a set of hints that can be optionally provided to <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing①">startDrawing()</a></code> to improve accuracy or performance.</p>
   <p>Conventionally, the attribute names here matches the ones accepted in <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing②">startDrawing()</a></code> method.</p>
   <dl>
    <dt><code>recognitionType</code>
    <dd>A list of <code class="idl"><a data-link-type="idl" href="#enumdef-handwritingrecognitiontype" id="ref-for-enumdef-handwritingrecognitiontype①">HandwritingRecognitionType</a></code> enums describing the type of text that is likely to be drawn.
    <p>Hints don’t guarantee the result transcriptions meet the description.</p>
    <dl>
     <dt><code>"text"</code>
     <dd>Free form text in typical writing prose. It means the drawing represents real words. For example, a sentence in everyday speech.
     <dt><code>"per-character"</code>
     <dd>The handwriting is made up of individual, unrelated graphemes (user-perceived characters). For example, serial numbers, license keys.
    </dl>
    <dt><code>inputType</code>
    <dd>A list of <code class="idl"><a data-link-type="idl" href="#enumdef-handwritinginputtype" id="ref-for-enumdef-handwritinginputtype①">HandwritingInputType</a></code> enums describing how the drawing is made. 
    <dl>
     <dt><code>"touch"</code>
     <dd>Drawn with finger movements.
     <dt><code>"stylus"</code>
     <dd>Drawn with a stylus.
     <dt><code>"mouse"</code>
     <dd>Drawn with a mouse cursor.
    </dl>
    <dt><code>textContext</code>
    <dd>A boolean indicating if textContext is accepted. <code>textContext</code> is a string that contains the text shown to user, or previously recognized text that comes before the current drawing.
    <dt><code>alternatives</code>
    <dd>A boolean indicating if the number of alternative transcriptions can be set. This limits the maximum number of alternatives returned in <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction">getPrediction</a></code>.
   </dl>
   <h2 class="heading settled" data-dfn-for="Navigator" data-level="4" id="create-a-handwriting-recognizer"><span class="secno">4. </span><span class="content">Create a handwriting recognizer</span><a class="self-link" href="#create-a-handwriting-recognizer"></a></h2>
   <p>A <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer①">HandwritingRecognizer</a></code> manages the resources necessary for performing recognitions.</p>
<pre class="example highlight" id="example-create"><a class="self-link" href="#example-create"></a><c- a>const</c-> modelConstraint <c- o>=</c-> <c- p>{</c-> languages<c- o>:</c-> <c- p>[</c-><c- t>'en'</c-><c- p>]</c-> <c- p>};</c->

<c- k>try</c-> <c- p>{</c->
  <c- a>const</c-> recognizer <c- o>=</c-> <c- k>await</c-> navigator<c- p>.</c->createHandwritingRecognizer<c- p>(</c->modelConstraint<c- p>);</c->
  <c- c1>// Use `recognizer` to perform recognitions.</c->
<c- p>}</c-> <c- k>catch</c-> <c- p>(</c->err<c- p>)</c-> <c- p>{</c->
  <c- c1>// The provided model constraint can’t be satisfied.</c->
<c- p>}</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator①"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer②"><c- n>HandwritingRecognizer</c-></a>>
      <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="method" data-export data-lt="createHandwritingRecognizer(constraint)" id="dom-navigator-createhandwritingrecognizer"><code><c- g>createHandwritingRecognizer</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint③"><c- n>HandwritingModelConstraint</c-></a> <dfn class="idl-code" data-dfn-for="Navigator/createHandwritingRecognizer(constraint)" data-dfn-type="argument" data-export id="dom-navigator-createhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code><a class="self-link" href="#dom-navigator-createhandwritingrecognizer-constraint-constraint"></a></dfn>);
};
</pre>
   <h3 class="heading settled" data-level="4.1" id="api-create-handwriting-recognizer"><span class="secno">4.1. </span><span class="content"><dfn data-dfn-type="dfn" data-export id="createhandwritingrecognizer-constraint"><code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer②">createHandwritingRecognizer(constraint)</a></code><a class="self-link" href="#createhandwritingrecognizer-constraint"></a></dfn> method </span><a class="self-link" href="#api-create-handwriting-recognizer"></a></h3>
    This method creates a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer③">HandwritingRecognizer</a></code> object that satisfies the provided <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint④">HandwritingModelConstraint</a></code>, and reserves the necessary resources to perform recognitions. It represents an entry point to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer③">handwriting recognizer</a>. 
   <ul>
    <li data-md>
     <p>If the constraint can be satisfied, and there’s sufficient resource on the operating system to perform recognition, resolves to a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer④">HandwritingRecognizer</a></code> object.</p>
    <li data-md>
     <p>Otherwise, rejects with an error.</p>
   </ul>
   <p class="domintro non-normative">The user agent might ask the user to install handwriting models and download handwriting models. Web applications shouldn’t assume this method always resolves quickly.</p>
   <div class="algorithm" data-algorithm="navigator-create-handwriting-recognizer">
     When <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer③">createHandwritingRecognizer(constraint)</a></code> method is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>constraint</var> doesn’t have a <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages②">languages</a></code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code></p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a>.</p>
     <li data-md>
      <p>Run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a></p>
      <ol>
       <li data-md>
        <p>If <var>constraint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages③">languages</a></code> is an empty array, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror">"NotSupportedError"</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format②">Convert <var>constraint</var> into a suitable form</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer④">handwriting recognizer</a>.</p>
       <li data-md>
        <p>If the user agent can’t find a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑤">handwriting recognizer</a> that satisfies the converted <var>constraint</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name①">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①">"NotSupportedError"</a></code> and abort.</p>
       <li data-md>
        <p>If creating a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑥">handwriting recognizer</a> would cause the user agent to exceed its limit for total number of active recognizer, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name②">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#quotaexceedederror" id="ref-for-quotaexceedederror">"QuotaExceededError"</a></code>.</p>
       <li data-md>
        <p>If the user agent can’t prepare <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑦">handwriting recognizer</a> to perform recognitions, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code> object whose name depending on the failure cause and abort:</p>
        <ul>
         <li data-md>
          <p>If the web application shouldn’t retry, <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror">"OperationError"</a></code>.</p>
         <li data-md>
          <p>Otherwise <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#unknownerror" id="ref-for-unknownerror">"UnknownError"</a></code>.</p>
        </ul>
       <li data-md>
        <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑤">HandwritingRecognizer</a></code> object, whose <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active">active</a> flag is <code>true</code></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="5" id="using-a-recognizer"><span class="secno">5. </span><span class="content">Use a recognizer</span><a class="self-link" href="#using-a-recognizer"></a></h2>
<pre class="example highlight" id="example-recognizer"><a class="self-link" href="#example-recognizer"></a><c- a>const</c-> drawingHints <c- o>=</c-> <c- p>{</c-> textContext<c- o>:</c-> <c- u>"Hello world."</c-> <c- p>}</c->
<c- a>const</c-> drawing <c- o>=</c-> recognizer<c- p>.</c->startDrawing<c- p>(</c->textContext<c- p>)</c->

<c- c1>// Do something with `drawing`.</c->

<c- c1>// Frees resources associated with recognizer.</c->
recognizer<c- p>.</c->finish<c- p>()</c->
</pre>
   <h3 class="heading settled" data-level="5.1" id="handwriting-recognizer-object"><span class="secno">5.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑥">HandwritingRecognizer</a></code> object </span><a class="self-link" href="#handwriting-recognizer-object"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingrecognizer"><code><c- g>HandwritingRecognizer</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute"><c- g>RaisesException</c-></a>]
  <a data-link-type="idl-name" href="#handwritingdrawing" id="ref-for-handwritingdrawing"><c- n>HandwritingDrawing</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizer" data-dfn-type="method" data-export data-lt="startDrawing(hints)|startDrawing()" id="dom-handwritingrecognizer-startdrawing"><code><c- g>startDrawing</c-></code></dfn>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-handwritinghints" id="ref-for-dictdef-handwritinghints"><c- n>HandwritingHints</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingRecognizer/startDrawing(hints), HandwritingRecognizer/startDrawing()" data-dfn-type="argument" data-export id="dom-handwritingrecognizer-startdrawing-hints-hints"><code><c- g>hints</c-></code><a class="self-link" href="#dom-handwritingrecognizer-startdrawing-hints-hints"></a></dfn> = {});

  [<a class="idl-code" data-link-type="extended-attribute"><c- g>RaisesException</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizer" data-dfn-type="method" data-export data-lt="finish()" id="dom-handwritingrecognizer-finish"><code><c- g>finish</c-></code></dfn>();
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritinghints"><code><c- g>HandwritingHints</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="idl-code" data-default="&quot;text&quot;" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-handwritinghints-recognitiontype"><code><c- g>recognitionType</c-></code><a class="self-link" href="#dom-handwritinghints-recognitiontype"></a></dfn> = "text";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="idl-code" data-default="&quot;mouse&quot;" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-handwritinghints-inputtype"><code><c- g>inputType</c-></code><a class="self-link" href="#dom-handwritinghints-inputtype"></a></dfn> = "mouse";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-handwritinghints-textcontext"><code><c- g>textContext</c-></code><a class="self-link" href="#dom-handwritinghints-textcontext"></a></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-default="3" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritinghints-alternatives"><code><c- g>alternatives</c-></code><a class="self-link" href="#dom-handwritinghints-alternatives"></a></dfn> = 3;
};
</pre>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑦">HandwritingRecognizer</a></code> has an <dfn class="dfn-paneled" data-dfn-for="HandwritingRecognizer" data-dfn-type="dfn" data-noexport id="handwritingrecognizer-active">active</dfn> flag, which is a boolean. <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active①">active</a> flag is initially <code>true</code>, and becomes <code>false</code> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-finish" id="ref-for-dom-handwritingrecognizer-finish">finish()</a></code> method is called.</p>
   <p>When the recognizer’s <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active②">active</a> flag is <code>true</code>, web applications can create new drawings associated with this recognizer, and perform recognitions.</p>
   <p>User agents may limit the total number of <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active③">active</a> <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑧">handwriting recognizer</a>s for a website.</p>
   <h3 class="heading settled" data-level="5.2" id="handwriting-recognizer-create-drawing"><span class="secno">5.2. </span><span class="content"><dfn data-dfn-type="dfn" data-export id="startdrawing-hints"><code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing③">startDrawing(hints)</a></code><a class="self-link" href="#startdrawing-hints"></a></dfn></span><a class="self-link" href="#handwriting-recognizer-create-drawing"></a></h3>
   <p>This method creates a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①">HandwritingDrawing</a></code> which stores the drawing information for subsequent recognitions.</p>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing②">HandwritingDrawing</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingDrawing" data-dfn-type="dfn" data-noexport id="handwritingdrawing-strokes">strokes</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke">HandwritingStroke</a></code>s, and initially empty.</p>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing③">HandwritingDrawing</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingDrawing" data-dfn-type="dfn" data-noexport id="handwritingdrawing-recognizer">recognizer</dfn>, which stores a reference to the <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑧">HandwritingRecognizer</a></code> creating this <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing④">HandwritingDrawing</a></code>.</p>
   <div class="algorithm" data-algorithm="handwriting-recognizer-start-drawing">
     When <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing④">startDrawing(hints)</a></code> is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active④">active</a> flag isn’t <code>true</code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw②">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code> object, whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name③">name</a></code> member is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">"InvalidStateError"</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format③">Convert the provided <var>hints</var> to format suitable</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑨">handwriting recognizer</a>.</p>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑤">HandwritingDrawing</a></code> as <var>result</var>, store the converted hint in it if necessary.</p>
     <li data-md>
      <p>Set <var>result</var>.<a data-link-type="dfn" href="#handwritingdrawing-recognizer" id="ref-for-handwritingdrawing-recognizer">recognizer</a> to <code>this</code>.</p>
     <li data-md>
      <p>Set <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes">strokes</a> to an new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
    <p>If the provided <var>hints</var> contains features unsupported by <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⓪">handwriting recognizer</a>, the user agent should ignore relevant attributes.</p>
    <p>If the <var>hints</var> isn’t provided, the user agent might apply default at their own discretion.</p>
    <p class="note" role="note">user agents might create and pass the converted <var>hints</var> to an equivalent <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①①">handwriting recognizer</a> drawing object without storing it in <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑥">HandwritingDrawing</a></code>.</p>
   </div>
   <h3 class="heading settled" data-level="5.3" id="handwriting-recognizer-finish"><span class="secno">5.3. </span><span class="content"><dfn data-dfn-type="dfn" data-export id="finish"><code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-finish" id="ref-for-dom-handwritingrecognizer-finish①">finish()</a></code><a class="self-link" href="#finish"></a></dfn></span><a class="self-link" href="#handwriting-recognizer-finish"></a></h3>
   <p>This method sets <code>this</code>'s <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑤">active</a> flag to <code>false</code>, frees the allocated <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①②">handwriting recognizer</a> resources, and cause future operations involving <code>this</code>'s <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①③">handwriting recognizer</a> to fail.</p>
   <div class="algorithm" data-algorithm="handwriting-recognizer-finish">
    <ol>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑥">active</a> isn’t <code>true</code>, abort.</p>
     <li data-md>
      <p>Set <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑦">active</a> to <code>false</code>.</p>
    </ol>
   </div>
   <p>The user agent should free resources associated with <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①④">handwriting recognizer</a>.</p>
   <p class="note" role="note"> After calling <code>finish()</code>, subsequent <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction①">getPrediction()</a></code> calls on <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑦">HandwritingDrawing</a></code> created by <code>this</code> will fail. </p>
   <h2 class="heading settled" data-level="6" id="handwriting-drawing"><span class="secno">6. </span><span class="content">Build a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑧">HandwritingDrawing</a></code></span><a class="self-link" href="#handwriting-drawing"></a></h2>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑨">HandwritingDrawing</a></code> manages contextual information about a drawing, and maintains the strokes and points making up of the drawing. It represents a <a data-link-type="dfn" href="#drawing" id="ref-for-drawing①">drawing</a>.</p>
   <p class="note" role="note">User agent can store all strokes and points in memory, the convert them to a format suitable for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑤">handwriting recognizer</a> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction②">getPrediction()</a></code> is called. In this case, <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⓪">HandwritingDrawing</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①">HandwritingStroke</a></code> acts like a list. </p>
   <div class="note" id="change-tracking" role="note">
    <a class="self-link" href="#change-tracking"></a> Alternatively, user agent can immediately convert each stroke and point to a format suitable, and pass them to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑥">handwriting recognizer</a> when each <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke②">HandwritingStroke</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①①">HandwritingDrawing</a></code> method is called. In this case, <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①②">HandwritingDrawing</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke③">HandwritingStroke</a></code> acts as a wrapper for platform-dependent objects of <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑦">handwriting recognizer</a>. 
    <p>user agent can track drawing changes to improve <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction③">getPrediction()</a></code> performance. Such change tracking can be achieved by marking strokes as "modified" when relevant methods are called. Change tracking enables user agent to perform incremental recognitions with a supported <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑧">handwriting recognizer</a>.</p>
    <p>For example, consider a drawing consists of three paragraphs of text, whose predictions from previous <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction④">getPrediction()</a></code> call is stored. The web application then adds a stroke to the third paragraph. With change tracking, the implementation will request <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑨">handwriting recognizer</a> to make a new prediction about the strokes of the third paragraph (e.g. including strokes near the changed stroke), and merge this prediction with existing ones.</p>
   </div>
<pre class="example highlight" id="example-drawing"><a class="self-link" href="#example-drawing"></a><c- a>const</c-> handwritingStroke <c- o>=</c-> <c- k>new</c-> HandwritingStroke<c- p>()</c->

<c- c1>// Add points to a stroke.</c->
handwritingStroke<c- p>.</c->addPoint<c- p>({</c-> x<c- o>:</c-> <c- mf>1</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>2</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>0</c-><c- p>});</c->
handwritingStroke<c- p>.</c->addPoint<c- p>({</c-> x<c- o>:</c-> <c- mf>7</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>6</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>33</c-><c- p>});</c->

<c- c1>// Retrieve points of this stroke.</c->
<c- c1>// Returns a copy of all the points, modifying the returned points</c->
<c- c1>// has no effect.</c->
<c- a>const</c-> points <c- o>=</c-> handwritingStroke<c- p>.</c->getPoints<c- p>();</c->

<c- p>[</c-> <c- p>{</c-> x<c- o>:</c-> <c- mf>1</c-><c- o>:</c-><c- p>,</c-> t<c- o>:</c-><c- mf>2</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- p>{</c-> x<c- o>:</c-> <c- mf>7</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>6</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>33</c-><c- p>}</c-> <c- p>];</c->

<c- c1>// Delete all points in a stroke.</c->
handwritingStroke<c- p>.</c->clear<c- p>();</c->

<c- c1>// Add a stroke to the drawing.</c->
drawing<c- p>.</c->addStroke<c- p>(</c->handwritingStroke<c- p>);</c->

<c- c1>// Get all strokes of the drawing.</c->
<c- c1>// Returns a list of `HandwritingStroke` in the drawing. Web applications can</c->
<c- c1>// modify the stroke. For example, calling HandwritingStroke.addPoint().</c->
drawing<c- p>.</c->getStrokes<c- p>();</c->

<c- p>[</c-> HandwritingStroke<c- p>,</c-> <c- d>/* ... */</c-> <c- p>]</c->

<c- c1>// Delete a stroke from the drawing.</c->
drawing<c- p>.</c->removeStroke<c- p>(</c->handwritingStroke<c- p>);</c->

<c- c1>// Delete all strokes from the drawing.</c->
drawing<c- p>.</c->clear<c- p>();</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingdrawing"><code><c- g>HandwritingDrawing</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="addStroke(stroke)" id="dom-handwritingdrawing-addstroke"><code><c- g>addStroke</c-></code></dfn>(<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke④"><c- n>HandwritingStroke</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingDrawing/addStroke(stroke)" data-dfn-type="argument" data-export id="dom-handwritingdrawing-addstroke-stroke-stroke"><code><c- g>stroke</c-></code><a class="self-link" href="#dom-handwritingdrawing-addstroke-stroke-stroke"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="removeStroke(stroke)" id="dom-handwritingdrawing-removestroke"><code><c- g>removeStroke</c-></code></dfn>(<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke⑤"><c- n>HandwritingStroke</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingDrawing/removeStroke(stroke)" data-dfn-type="argument" data-export id="dom-handwritingdrawing-removestroke-stroke-stroke"><code><c- g>stroke</c-></code><a class="self-link" href="#dom-handwritingdrawing-removestroke-stroke-stroke"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="clear()" id="dom-handwritingdrawing-clear"><code><c- g>clear</c-></code></dfn>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke⑥"><c- n>HandwritingStroke</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="getStrokes()" id="dom-handwritingdrawing-getstrokes"><code><c- g>getStrokes</c-></code></dfn>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction"><c- n>HandwritingPrediction</c-></a>>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="getPrediction()" id="dom-handwritingdrawing-getprediction"><code><c- g>getPrediction</c-></code></dfn>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext④"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingstroke"><code><c- g>HandwritingStroke</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="constructor" data-export data-lt="HandwritingStroke()|constructor()" id="dom-handwritingstroke-handwritingstroke"><code><c- g>constructor</c-></code></dfn>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="addPoint(point)" id="dom-handwritingstroke-addpoint"><code><c- g>addPoint</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingStroke/addPoint(point)" data-dfn-type="argument" data-export id="dom-handwritingstroke-addpoint-point-point"><code><c- g>point</c-></code><a class="self-link" href="#dom-handwritingstroke-addpoint-point-point"></a></dfn>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint①"><c- n>HandwritingPoint</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="getPoints()" id="dom-handwritingstroke-getpoints"><code><c- g>getPoints</c-></code></dfn>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="clear()" id="dom-handwritingstroke-clear"><code><c- g>clear</c-></code></dfn>();
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingpoint"><code><c- g>HandwritingPoint</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="double " id="dom-handwritingpoint-x"><code><c- g>x</c-></code><a class="self-link" href="#dom-handwritingpoint-x"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="double " id="dom-handwritingpoint-y"><code><c- g>y</c-></code><a class="self-link" href="#dom-handwritingpoint-y"></a></dfn>;

  // Optional. Number of milliseconds since a reference time point for a
  // drawing.
  <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="DOMHighResTimeStamp " id="dom-handwritingpoint-t"><code><c- g>t</c-></code><a class="self-link" href="#dom-handwritingpoint-t"></a></dfn>;
};
</pre>
   <div class="domintro non-normative">
     If web application provides <code>t</code> in <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint②">HandwritingPoint</a></code>, measure all of <code>t</code> values from a common starting point for a given <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①③">HandwritingDrawing</a></code>. 
    <p>For example, define <code>t === 0</code> to the time point when <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing⑤">startDrawing()</a></code> is called. Or use <code>Date.now()</code> when the point is collected (e.g. when a <a href="https://www.w3.org/TR/touch-events/#the-touchmove-event"><code>touchmove</code></a> event occurred).</p>
   </div>
   <h3 class="heading settled" data-level="6.1" id="handwriting-stroke"><span class="secno">6.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑦">HandwritingStroke</a></code></span><a class="self-link" href="#handwriting-stroke"></a></h3>
    <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑧">HandwritingStroke</a></code> represents a <a data-link-type="dfn" href="#stroke" id="ref-for-stroke">stroke</a>. It stores the information necessary to recreate one such movement. 
   <p><code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑨">HandwritingStroke</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingStroke" data-dfn-type="dfn" data-noexport id="handwritingstroke-points">Points</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> that stores the <a data-link-type="dfn" href="#point" id="ref-for-point①">points</a> of this stroke. <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points">points</a> is initially empty.</p>
   <h4 class="heading settled" data-level="6.1.1" id="handwriting-stroke-constructor"><span class="secno">6.1.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-handwritingstroke" id="ref-for-dom-handwritingstroke-handwritingstroke">HandwritingStroke()</a></code></span><a class="self-link" href="#handwriting-stroke-constructor"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-stroke-constructor">
    <ol>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⓪">HandwritingStroke</a></code> object, let it be <var>result</var>.</p>
     <li data-md>
      <p>Set <var>result</var>’s <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points①">points</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.1.2" id="handwriting-stroke-add-point"><span class="secno">6.1.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-addpoint" id="ref-for-dom-handwritingstroke-addpoint">addPoint(point)</a></code></span><a class="self-link" href="#handwriting-stroke-add-point"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-stroke-add-point">
     This method adds a <a data-link-type="dfn" href="#point" id="ref-for-point②">point</a> to <code>this</code>, when invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>point</var> doesn’t has a <code>x</code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw③">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var>.<code>x</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw④">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var> doesn’t has a <code>y</code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑤">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var>.<code>y</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑥">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var> has a <code>t</code> member, and <code>t</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑦">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>Let <var>p</var> be a new object,</p>
     <li data-md>
      <p>Set <var>p</var>.<code>x</code> to <var>point</var>.<code>x</code></p>
     <li data-md>
      <p>Set <var>p</var>.<code>y</code> to <var>point</var>.<code>y</code></p>
     <li data-md>
      <p>If <var>point</var> has a <code>t</code> member, set <var>p</var>.<code>t</code> to <var>point</var>.<code>t</code></p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>p</var> to <code>this</code>.<a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points②">points</a>.</p>
    </ol>
    <p>If <var>point</var> doesn’t have <code>t</code> member, The implementation shouldn’t interpolate or use a default numerical value. The implementation should reflect <var>point</var>.<code>t</code> isn’t set in <var>p</var>.<code>t</code>.</p>
    <p class="domintro non-normative"> Modifying <var>point</var> after calling <code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-addpoint" id="ref-for-dom-handwritingstroke-addpoint①">addPoint(point)</a></code> has no effect on the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①①">HandwritingStroke</a></code>. </p>
   </div>
   <h4 class="heading settled" data-level="6.1.3" id="handwriting-stroke-get-points"><span class="secno">6.1.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-getpoints" id="ref-for-dom-handwritingstroke-getpoints">getPoints()</a></code></span><a class="self-link" href="#handwriting-stroke-get-points"></a></h4>
   <p>This method returns points in this stroke.</p>
   <div class="algorithm" data-algorithm="handwriting-stroke-get-points">
     When this method is invoked: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points③">points</a> as <var>p</var></p>
      <ol>
       <li data-md>
        <p>Create a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object">object</a></code> as <var>pt</var></p>
       <li data-md>
        <p>Set <var>pt</var>.<code>x</code> member to <var>p</var>.<code>x</code></p>
       <li data-md>
        <p>Set <var>pt</var>.<code>y</code> member to <var>p</var>.<code>y</code></p>
       <li data-md>
        <p>If <var>p</var> has <code>t</code> member, set <var>pt</var>.<code>t</code> to <var>p</var>.t</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>pt</var> to <var>result</var></p>
      </ol>
     <li data-md>
      <p>Return <var>result</var></p>
    </ol>
   </div>
   <p class="note" role="note">A deep copy prevents modifications to the internal <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points④">points</a>, and enables <a href="#change-tracking">change tracking</a>.</p>
   <p class="domintro non-normative"> Modifying the return value of <code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-getpoints" id="ref-for-dom-handwritingstroke-getpoints①">getPoints()</a></code> has no effect on the stroke. </p>
   <h4 class="heading settled algorithm" data-algorithm="stroke-clear" data-level="6.1.4" id="handwriting-stroke-clear"><span class="secno">6.1.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-clear" id="ref-for-dom-handwritingstroke-clear">clear()</a></code></span><a class="self-link" href="#handwriting-stroke-clear"></a></h4>
   <p>This method removes all points of this stroke, effectively making this stroke an empty one.</p>
   <div class="algorithm" data-algorithm="handwriting-stroke-clear">
     When this method is invoked, 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">Empty</a> <code>this</code>.<a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points⑤">points</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.2" id="handwriting-drawing-stroke-methods"><span class="secno">6.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①④">HandwritingDrawing</a></code></span><a class="self-link" href="#handwriting-drawing-stroke-methods"></a></h3>
   <h4 class="heading settled" data-level="6.2.1" id="handwriting-drawing-add-stroke"><span class="secno">6.2.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-addstroke" id="ref-for-dom-handwritingdrawing-addstroke">addStroke(stroke)</a></code></span><a class="self-link" href="#handwriting-drawing-add-stroke"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-add-stroke">
    <ol>
     <li data-md>
      <p>If <var>stroke</var> isn’t an instance of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①②">HandwritingStroke</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑧">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> a reference to <var>stroke</var> to <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes①">strokes</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.2.2" id="handwriting-drawing-remove-stroke"><span class="secno">6.2.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-removestroke" id="ref-for-dom-handwritingdrawing-removestroke">removeStroke(stroke)</a></code></span><a class="self-link" href="#handwriting-drawing-remove-stroke"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-remove-stroke">
    <ol>
     <li data-md>
      <p>If <var>stroke</var> isn’t an instance of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①③">HandwritingStroke</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑨">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> items <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes②">strokes</a> if the item is the same object as <var>stroke</var></p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.2.3" id="handwriting-drawing-get-strokes"><span class="secno">6.2.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getstrokes" id="ref-for-dom-handwritingdrawing-getstrokes">getStrokes()</a></code></span><a class="self-link" href="#handwriting-drawing-get-strokes"></a></h4>
   <p>This method returns a list of strokes in this drawing.</p>
   <div class="algorithm" data-algorithm="handwriting-drawing-get-strokes">
     When this method is invoked, 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes③">strokes</a> as <var>s</var></p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>s</var> to <var>result</var></p>
      </ol>
     <li data-md>
      <p>Return <var>result</var></p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="6.2.4" id="handwriting-drawing-clear"><span class="secno">6.2.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-clear" id="ref-for-dom-handwritingdrawing-clear">clear()</a></code></span><a class="self-link" href="#handwriting-drawing-clear"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-clear">
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">Empty</a> <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes④">strokes</a>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="7" id="get-predictions-of-a-drawing"><span class="secno">7. </span><span class="content">Get predictions of a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑤">HandwritingDrawing</a></code></span><a class="self-link" href="#get-predictions-of-a-drawing"></a></h2>
<pre class="example highlight" id="example-get-prediction"><a class="self-link" href="#example-get-prediction"></a><c- c1>// Get predictions for the strokes in this drawing.</c->
<c- a>const</c-> predictions <c- o>=</c-> <c- k>await</c-> drawing<c- p>.</c->getPrediction<c- p>();</c->

<c- c1>// `predictions` is a list of `HandwritingPrediction`s, whose attributes</c->
<c- c1>// depends on handwriting recognizer’s capability, and align with model</c->
<c- c1>// descriptor returned in queryHandwritingRecognizer().</c->
<c- c1>//</c->
<c- c1>// For example, a `recognizer` supports textSegmentation.</c->
<c- p>[</c->
  <c- p>{</c->
    text<c- o>:</c-> <c- u>"hello"</c-><c- p>,</c->
    segmentationResult<c- o>:</c-> <c- p>[</c->
      <c- p>{</c->
        grapheme<c- o>:</c-> <c- u>"h"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"0"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"1"</c-><c- p>,</c->
        drawingSegments<c- o>:</c-> <c- p>[</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>1</c-><c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>0</c-><c- p>,</c-> endPointIndex<c- o>:</c-> <c- mf>32</c-> <c- p>},</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>2</c-> <c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>0</c-><c- p>,</c-> endPointIndex<c- o>::</c-> <c- mf>40</c-> <c- p>},</c->
        <c- p>]</c->
      <c- p>},</c->
      <c- p>{</c->
        grapheme<c- o>:</c-> <c- u>"2"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"1"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"2"</c-><c- p>,</c->
        drawingSegments<c- o>:</c-> <c- p>[</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>2</c-> <c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>41</c-><c- p>,</c-> endPointIndex<c- o>::</c-> <c- mf>130</c-> <c- p>},</c->
        <c- p>]</c->
      <c- p>},</c->
      <c- c1>// ...</c->
    <c- p>]</c->
  <c- p>},</c->
  <c- p>{</c->
    text<c- o>:</c-> <c- u>"he11o"</c-><c- p>,</c->
    segmentationResult<c- o>:</c-> <c- p>[</c-> <c- d>/* ... */</c-> <c- p>]</c->
  <c- p>},</c->
  <c- c1>// Up to a total of `alternatives` predictions, if provided in startDrawing().</c->
<c- p>];</c->
</pre>
   <h3 class="heading settled" data-level="7.1" id="handwriting-drawing-get-prediction"><span class="secno">7.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑤">getPrediction()</a></code></span><a class="self-link" href="#handwriting-drawing-get-prediction"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑥">getPrediction()</a></code> methods returns a list of predictions of <code>this</code> drawing, and their metadata.</p>
   <p>The predictions are ordered in decreasing confidence. If non-empty, the first prediction should be the most likely result.</p>
   <p>If the handwriting recognizer wasn’t able to recognize anything, <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑦">getPrediction()</a></code> should resolve with an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑥">list</a>.</p>
   <p class="note" role="note"> The user agent might perform <a href="#change-tracking">change tracking</a> and perform incremental recognition to improve performance. </p>
   <div class="algorithm" data-algorithm="handwriting-drawing-get-prediction">
     When <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑧">getPrediction()</a></code> is invoked: 
    <ol>
     <li data-md>
      <p>Let <var>p</var> be a new Promise, run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a></p>
      <ol>
       <li data-md>
        <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-recognizer" id="ref-for-handwritingdrawing-recognizer①">recognizer</a>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑧">active</a> isn’t true, reject <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code> whose name is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">"InvalidStateError"</a></code> and abort.</p>
       <li data-md>
        <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes⑤">strokes</a> is empty, resolve <var>p</var> with a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑦">list</a>.</p>
       <li data-md>
        <p>Let <var>result</var> be a list.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format④">Convert <code>this</code> drawing into a format suitable</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②⓪">handwriting recognizer</a>.</p>
       <li data-md>
        <p>Send the converted drawing to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②①">handwriting recognizer</a>, and retrieves its prediction.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format⑤">Convert the retrieved predictions into </a> <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction①">HandwritingPrediction</a></code>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">append</a> the converted predictions to <var>result</var>.</p>
       <li data-md>
        <p>Resolve <var>p</var> with <var>result</var>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="7.2" id="handwriting-prediction"><span class="secno">7.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction②">HandwritingPrediction</a></code> attributes</span><a class="self-link" href="#handwriting-prediction"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction③">HandwritingPrediction</a></code> represents a prediction result from <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②②">handwriting recognizer</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingprediction"><code><c- g>HandwritingPrediction</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPrediction" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-handwritingprediction-text"><code><c- g>text</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment"><c- n>HandwritingSegment</c-></a>> <dfn class="idl-code" data-dfn-for="HandwritingPrediction" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingSegment> " id="dom-handwritingprediction-segmentationresult"><code><c- g>segmentationResult</c-></code><a class="self-link" href="#dom-handwritingprediction-segmentationresult"></a></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingsegment"><code><c- g>HandwritingSegment</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="DOMString " id="dom-handwritingsegment-grapheme"><code><c- g>grapheme</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritingsegment-beginindex"><code><c- g>beginIndex</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritingsegment-endindex"><code><c- g>endIndex</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑦"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment"><c- n>HandwritingDrawingSegment</c-></a>> <dfn class="idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingDrawingSegment> " id="dom-handwritingsegment-drawingsegments"><code><c- g>drawingSegments</c-></code><a class="self-link" href="#dom-handwritingsegment-drawingsegments"></a></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingdrawingsegment"><code><c- g>HandwritingDrawingSegment</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long③"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritingdrawingsegment-strokeindex"><code><c- g>strokeIndex</c-></code><a class="self-link" href="#dom-handwritingdrawingsegment-strokeindex"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long④"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritingdrawingsegment-beginpointindex"><code><c- g>beginPointIndex</c-></code><a class="self-link" href="#dom-handwritingdrawingsegment-beginpointindex"></a></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑤"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long " id="dom-handwritingdrawingsegment-endpointindex"><code><c- g>endPointIndex</c-></code><a class="self-link" href="#dom-handwritingdrawingsegment-endpointindex"></a></dfn>;
};
</pre>
   <dl>
    <dt><code>text</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥">DOMString</a></code> that represents the transcription of the drawing.
    <dt><code>segmentationResult</code>
    <dd>
     A list of <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment①">HandwritingSegment</a></code> that maps each recognized grapheme (a user-perceived character) to its composing strokes and points. 
     <p>If the <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②③">handwriting recognizer</a> doesn’t support text <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation②">segmentation</a>, <code>null</code>.</p>
     <p class="domintro non-normative">Web applications can use <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizerqueryresult-textsegmentation" id="ref-for-dom-handwritingrecognizerqueryresult-textsegmentation">textSegmentation</a></code> to check if this attribute will be null.</p>
   </dl>
   <h4 class="heading settled" data-level="7.2.1" id="handwriting-segment"><span class="secno">7.2.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment②">HandwritingSegment</a></code> attributes</span><a class="self-link" href="#handwriting-segment"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment③">HandwritingSegment</a></code> describes about a single grapheme that’s <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation③">segmented</a> from the drawing.</p>
   <dl>
    <dt><code>grapheme</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦">DOMString</a></code> that represents grapheme.
    <dt><code>beginIndex</code>
    <dd>The index where this grapheme begins in <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text">text</a></code>. 
    <dt><code>endIndex</code>
    <dd> The index where this grapheme ends (where the next grapheme begins) in <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text①">text</a></code>. 
    <dt><code>drawingSegments</code>
    <dd> A list of <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment①">HandwritingDrawingSegment</a></code> that describes the portion of the drawing that makes up of this grapheme. 
   </dl>
   <p>Slicing <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text②">text</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-beginindex" id="ref-for-dom-handwritingsegment-beginindex">beginIndex</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-endindex" id="ref-for-dom-handwritingsegment-endindex">endIndex</a></code> should result in <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-grapheme" id="ref-for-dom-handwritingsegment-grapheme">grapheme</a></code>.</p>
<pre class="example highlight" id="grapheme-slicing"><a class="self-link" href="#grapheme-slicing"></a><c- c1>// Web applications can slice `text` using `beginIndex` and `endIndex`.</c->
<c- c1>// For example, a `HandwritingPrediction` for "घोषित" is:</c->

<c- a>const</c-> prediction <c- o>=</c-> <c- p>{</c->
  <c- c1>// UTF-16 code points: \u0918 \u094b \u0937 \u093f \u0924</c->
  <c- c1>// Graphemes: घो, षि, त</c->
  text<c- o>:</c-> <c- u>"घोषित"</c-><c- p>,</c->
  segmentationResult<c- o>:</c-> <c- p>[</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"घो"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"0"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"2"</c-> <c- p>},</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"षि"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"2"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"4"</c-> <c- p>},</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"त"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"4"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"5"</c-> <c- p>},</c->
  <c- p>]</c->
<c- p>}</c->

<c- c1>// The followings are true:</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>1</c-><c- p>)</c-> <c- o>===</c-> <c- u>"घो"</c-><c- p>;</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>2</c-><c- p>,</c-> <c- mf>4</c-><c- p>)</c-> <c- o>===</c-> <c- u>"षि"</c-><c- p>;</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>4</c-><c- p>,</c-> <c- mf>5</c-><c- p>)</c-> <c- o>===</c-> <c- u>"त"</c-><c- p>;</c->

<c- c1>// Web applications can delete the 2nd grapheme (षि) by splicing.</c->
<c- a>const</c-> withoutSecondGrapheme <c- o>=</c-> <c- p>(</c->
  <c- p>[...</c->prediction<c- p>.</c->text<c- p>]</c->
    <c- p>.</c->splice<c- p>(</c->
      prediction<c- p>.</c->segmentationResult<c- p>[</c-><c- mf>1</c-><c- p>].</c->beginIndex<c- p>,</c->
      prediction<c- p>.</c->segmentationResult<c- p>[</c-><c- mf>1</c-><c- p>].</c->endIndex
    <c- p>)</c->
    <c- p>.</c->join<c- p>(</c-><c- t>''</c-><c- p>)</c->
<c- p>);</c->
<c- c1>// => "घोत"</c->
</pre>
   <h4 class="heading settled" data-level="7.2.2" id="handwriting-drawing-segment"><span class="secno">7.2.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment②">HandwritingDrawingSegment</a></code> attributes</span><a class="self-link" href="#handwriting-drawing-segment"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment③">HandwritingDrawingSegment</a></code> describes a continuous segment of a <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①④">HandwritingStroke</a></code>.</p>
   <p>The attributes are based on the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⑤">HandwritingStroke</a></code> in the <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑥">HandwritingDrawing</a></code> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑨">getPrediction()</a></code> is called.</p>
   <dl>
    <dt><code>strokeIndex</code>
    <dd>The index of the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⑥">HandwritingStroke</a></code> in <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑦">HandwritingDrawing</a></code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes⑥">strokes</a>. 
    <dt><code>beginIndex</code>
    <dd>The index where the drawing segment begins.
    <dt><code>endIndex</code>
    <dd>The index where the drawing segment ends (where the next drawing segment begins).
   </dl>
   <h2 class="heading settled" data-level="8" id="privacy consideration"><span class="secno">8. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy%20consideration"></a></h2>
    <em>This section is non-normative.</em> 
   <p>The fingerprint vector comes from two parts: feature detection and recognizer implementation.</p>
   <p>The amount of information (entropy) exposed depends on user agent’s implementation. We believe there isn’t a one-size-fits-all solution, and recommend the user agents decide whether privacy protections (e.g. permission prompts) are necessary for their users.</p>
   <p><strong>Feature detection</strong> could expose information about:</p>
   <ul>
    <li data-md>
     <p>User’s language choices (or installed handwriting recognition models). This is also available in <code>navigator.languages</code>.</p>
    <li data-md>
     <p>The recognizer implementation being used, by summarizing the set of supported features. This might lead to some conclusions about the operating system and its version.</p>
   </ul>
   <p>Fingerprinting can be mitigated with:</p>
   <ul>
    <li data-md>
     <p><a href="https://github.com/bslassey/privacy-budget">Privacy budget</a>: the user agent rejects promises, if the website issues excessive queries.</p>
    <li data-md>
     <p>Permission prompts: the user agent asks user to grant unrestricted handwriting recognition features.</p>
    <li data-md>
     <p>Hardcoded values: the user agent returns hard-coded values for query operations, if it’s possible to determine languages and features at build time.</p>
   </ul>
   <p><strong>Recognizer implementation</strong> might expose information about the operating system, the device, or the user’s habit. This largely depends on the recognizer technology being used.</p>
   <p>Below are some types of recognizer implementations, and their associated risks:</p>
   <ul>
    <li data-md>
     <p>No recognizer support: No fingerprint risk.</p>
    <li data-md>
     <p>Cloud-based recognizer: Little to no risk. The website might be able to detect the cloud service being used (by comparing the prediction result against the result obtained by calling the cloud service directly). No extra information is revealed about the user or their device.</p>
    <li data-md>
     <p>Stateless models (most common): Output of such models is entirely dependent on the input drawing and the model itself.</p>
     <ul>
      <li data-md>
       <p>Models that can only updated with the browser (e.g. entirely implemented within the browser): The website can learn about the browser’s version, which can otherwise be detected by other means.</p>
      <li data-md>
       <p>Models that can be updated outside of browser (e.g. implemented by calling an operating system API), depending on the scenario, the website can learn:</p>
       <ul>
        <li data-md>
         <p>OS version, if the models are updated along with every OS update.</p>
        <li data-md>
         <p>OS version range, if the models are updated with some but not all OS updates.</p>
        <li data-md>
         <p>A specific update patch revision, if the models are updated out-of-band or on-demand.</p>
       </ul>
      <li data-md>
       <p>If the models utilizes hardware accelerators (e.g. GPU). The result might reveal information about particular hardwares.</p>
     </ul>
    <li data-md>
     <p>Stateful / Online learning models (worst hypothetical case): These models can learn based on the previous usages. For example, an OS recognizer that adjusts its output based on user’s IME habits. These models can reveal large amount of information about the user, and poses a huge risk.</p>
   </ul>
   <p>However, we aren’t aware of any recognizer implementations that falls within this type. But we recommend using privacy protection for these models, or use a fresh / clean state for each session.</p>
   <p><strong>Cost of fingerprinting</strong>: the fingerprinting solution need to craft and curate a set of handwriting drawings (adversarial samples) to exploit differences across models. The cost of generating these samples may be high, but it’s safe to assume a motivated party can obtain such samples.</p>
  </main>
<script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#handwritingrecognizer-active">active</a><span>, in § 5.1</span>
   <li><a href="#dom-handwritingstroke-addpoint">addPoint(point)</a><span>, in § 6</span>
   <li><a href="#dom-handwritingdrawing-addstroke">addStroke(stroke)</a><span>, in § 6</span>
   <li>
    alternatives
    <ul>
     <li><a href="#dom-handwritinghints-alternatives">dict-member for HandwritingHints</a><span>, in § 5.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-alternatives">dict-member for HandwritingHintsQueryResult</a><span>, in § 3</span>
    </ul>
   <li><a href="#dom-handwritingsegment-beginindex">beginIndex</a><span>, in § 7.2</span>
   <li><a href="#dom-handwritingdrawingsegment-beginpointindex">beginPointIndex</a><span>, in § 7.2</span>
   <li>
    clear()
    <ul>
     <li><a href="#dom-handwritingdrawing-clear">method for HandwritingDrawing</a><span>, in § 6</span>
     <li><a href="#dom-handwritingstroke-clear">method for HandwritingStroke</a><span>, in § 6</span>
    </ul>
   <li><a href="#dom-handwritingstroke-handwritingstroke">constructor()</a><span>, in § 6</span>
   <li><a href="#convert-data-format">convert</a><span>, in § 2</span>
   <li>
    createHandwritingRecognizer(constraint)
    <ul>
     <li><a href="#createhandwritingrecognizer-constraint">definition of</a><span>, in § 4.1</span>
     <li><a href="#dom-navigator-createhandwritingrecognizer">method for Navigator</a><span>, in § 4</span>
    </ul>
   <li><a href="#drawing">drawing</a><span>, in § 2</span>
   <li><a href="#dom-handwritingsegment-drawingsegments">drawingSegments</a><span>, in § 7.2</span>
   <li><a href="#dom-handwritingsegment-endindex">endIndex</a><span>, in § 7.2</span>
   <li><a href="#dom-handwritingdrawingsegment-endpointindex">endPointIndex</a><span>, in § 7.2</span>
   <li>
    finish()
    <ul>
     <li><a href="#finish">definition of</a><span>, in § 5.3</span>
     <li><a href="#dom-handwritingrecognizer-finish">method for HandwritingRecognizer</a><span>, in § 5.1</span>
    </ul>
   <li><a href="#dom-handwritingstroke-getpoints">getPoints()</a><span>, in § 6</span>
   <li><a href="#dom-handwritingdrawing-getprediction">getPrediction()</a><span>, in § 6</span>
   <li><a href="#dom-handwritingdrawing-getstrokes">getStrokes()</a><span>, in § 6</span>
   <li><a href="#dom-handwritingsegment-grapheme">grapheme</a><span>, in § 7.2</span>
   <li><a href="#handwritingdrawing">HandwritingDrawing</a><span>, in § 6</span>
   <li><a href="#dictdef-handwritingdrawingsegment">HandwritingDrawingSegment</a><span>, in § 7.2</span>
   <li><a href="#dictdef-handwritinghints">HandwritingHints</a><span>, in § 5.1</span>
   <li><a href="#dictdef-handwritinghintsqueryresult">HandwritingHintsQueryResult</a><span>, in § 3</span>
   <li><a href="#enumdef-handwritinginputtype">HandwritingInputType</a><span>, in § 3</span>
   <li><a href="#dictdef-handwritingmodelconstraint">HandwritingModelConstraint</a><span>, in § 3</span>
   <li><a href="#dictdef-handwritingpoint">HandwritingPoint</a><span>, in § 6</span>
   <li><a href="#dictdef-handwritingprediction">HandwritingPrediction</a><span>, in § 7.2</span>
   <li><a href="#enumdef-handwritingrecognitiontype">HandwritingRecognitionType</a><span>, in § 3</span>
   <li><a href="#handwriting-recognizer">handwriting recognizer</a><span>, in § 2</span>
   <li><a href="#handwritingrecognizer">HandwritingRecognizer</a><span>, in § 5.1</span>
   <li><a href="#dictdef-handwritingrecognizerqueryresult">HandwritingRecognizerQueryResult</a><span>, in § 3</span>
   <li><a href="#dictdef-handwritingsegment">HandwritingSegment</a><span>, in § 7.2</span>
   <li><a href="#handwritingstroke">HandwritingStroke</a><span>, in § 6</span>
   <li><a href="#dom-handwritingstroke-handwritingstroke">HandwritingStroke()</a><span>, in § 6</span>
   <li><a href="#dom-handwritingrecognizerqueryresult-hints">hints</a><span>, in § 3</span>
   <li>
    inputType
    <ul>
     <li><a href="#dom-handwritinghints-inputtype">dict-member for HandwritingHints</a><span>, in § 5.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-inputtype">dict-member for HandwritingHintsQueryResult</a><span>, in § 3</span>
    </ul>
   <li><a href="#dom-handwritingmodelconstraint-languages">languages</a><span>, in § 3</span>
   <li><a href="#dom-handwritinginputtype-mouse">"mouse"</a><span>, in § 3</span>
   <li><a href="#dom-handwritingrecognitiontype-per-character">"per-character"</a><span>, in § 3</span>
   <li><a href="#point">point</a><span>, in § 2</span>
   <li><a href="#handwritingstroke-points">Points</a><span>, in § 6.1</span>
   <li>
    queryHandwritingRecognizer(constraint)
    <ul>
     <li><a href="#queryhandwritingrecognizer-constraint">definition of</a><span>, in § 3.1</span>
     <li><a href="#dom-navigator-queryhandwritingrecognizer">method for Navigator</a><span>, in § 3</span>
    </ul>
   <li>
    recognitionType
    <ul>
     <li><a href="#dom-handwritinghints-recognitiontype">dict-member for HandwritingHints</a><span>, in § 5.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-recognitiontype">dict-member for HandwritingHintsQueryResult</a><span>, in § 3</span>
    </ul>
   <li><a href="#handwritingdrawing-recognizer">recognizer</a><span>, in § 5.2</span>
   <li><a href="#dom-handwritingdrawing-removestroke">removeStroke(stroke)</a><span>, in § 6</span>
   <li><a href="#segmentation">Segmentation</a><span>, in § 2</span>
   <li><a href="#dom-handwritingprediction-segmentationresult">segmentationResult</a><span>, in § 7.2</span>
   <li><a href="#dom-handwritingrecognizer-startdrawing">startDrawing()</a><span>, in § 5.1</span>
   <li>
    startDrawing(hints)
    <ul>
     <li><a href="#startdrawing-hints">definition of</a><span>, in § 5.2</span>
     <li><a href="#dom-handwritingrecognizer-startdrawing">method for HandwritingRecognizer</a><span>, in § 5.1</span>
    </ul>
   <li><a href="#stroke">stroke</a><span>, in § 2</span>
   <li><a href="#dom-handwritingdrawingsegment-strokeindex">strokeIndex</a><span>, in § 7.2</span>
   <li><a href="#handwritingdrawing-strokes">strokes</a><span>, in § 5.2</span>
   <li><a href="#dom-handwritinginputtype-stylus">"stylus"</a><span>, in § 3</span>
   <li><a href="#dom-handwritingpoint-t">t</a><span>, in § 6</span>
   <li><a href="#dom-handwritingrecognitiontype-text">"text"</a><span>, in § 3</span>
   <li><a href="#dom-handwritingprediction-text">text</a><span>, in § 7.2</span>
   <li><a href="#dom-handwritingrecognizerqueryresult-textalternatives">textAlternatives</a><span>, in § 3</span>
   <li>
    textContext
    <ul>
     <li><a href="#dom-handwritinghints-textcontext">dict-member for HandwritingHints</a><span>, in § 5.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-textcontext">dict-member for HandwritingHintsQueryResult</a><span>, in § 3</span>
    </ul>
   <li><a href="#dom-handwritingrecognizerqueryresult-textsegmentation">textSegmentation</a><span>, in § 3</span>
   <li><a href="#dom-handwritinginputtype-touch">"touch"</a><span>, in § 3</span>
   <li><a href="#transcription">transcription</a><span>, in § 2</span>
   <li><a href="#dom-handwritingpoint-x">x</a><span>, in § 6</span>
   <li><a href="#dom-handwritingpoint-y">y</a><span>, in § 6</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-dom-domhighrestimestamp">
   <a href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp">https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domhighrestimestamp">6. Build a HandwritingDrawing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-navigator">
   <a href="https://html.spec.whatwg.org/multipage/system-state.html#navigator">https://html.spec.whatwg.org/multipage/system-state.html#navigator</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-navigator">3. Feature Query</a>
    <li><a href="#ref-for-navigator①">4. Create a handwriting recognizer</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-in-parallel">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-parallel">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-in-parallel①">4.1. createHandwritingRecognizer(constraint) method </a>
    <li><a href="#ref-for-in-parallel②">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-append">
   <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-append">6.1.2. addPoint(point)</a>
    <li><a href="#ref-for-list-append①">6.1.3. getPoints()</a>
    <li><a href="#ref-for-list-append②">6.2.1. addStroke(stroke)</a>
    <li><a href="#ref-for-list-append③">6.2.3. getStrokes()</a>
    <li><a href="#ref-for-list-append④">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-empty">
   <a href="https://infra.spec.whatwg.org/#list-empty">https://infra.spec.whatwg.org/#list-empty</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-empty">6.1.4. clear()</a>
    <li><a href="#ref-for-list-empty①">6.2.4. clear()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list">
   <a href="https://infra.spec.whatwg.org/#list">https://infra.spec.whatwg.org/#list</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list">5.2. startDrawing(hints)</a> <a href="#ref-for-list①">(2)</a>
    <li><a href="#ref-for-list②">6.1. HandwritingStroke</a>
    <li><a href="#ref-for-list③">6.1.1. HandwritingStroke()</a>
    <li><a href="#ref-for-list④">6.1.3. getPoints()</a>
    <li><a href="#ref-for-list⑤">6.2.3. getStrokes()</a>
    <li><a href="#ref-for-list⑥">7.1. getPrediction()</a> <a href="#ref-for-list⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-remove">
   <a href="https://infra.spec.whatwg.org/#list-remove">https://infra.spec.whatwg.org/#list-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-remove">6.2.2. removeStroke(stroke)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMException">
   <a href="https://webidl.spec.whatwg.org/#idl-DOMException">https://webidl.spec.whatwg.org/#idl-DOMException</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMException">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-idl-DOMException①">(2)</a> <a href="#ref-for-idl-DOMException②">(3)</a> <a href="#ref-for-idl-DOMException③">(4)</a>
    <li><a href="#ref-for-idl-DOMException④">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-idl-DOMException⑤">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-DOMString">
   <a href="https://webidl.spec.whatwg.org/#idl-DOMString">https://webidl.spec.whatwg.org/#idl-DOMString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-DOMString">3. Feature Query</a>
    <li><a href="#ref-for-idl-DOMString①">5.1. HandwritingRecognizer object </a> <a href="#ref-for-idl-DOMString②">(2)</a> <a href="#ref-for-idl-DOMString③">(3)</a>
    <li><a href="#ref-for-idl-DOMString④">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-idl-DOMString⑤">(2)</a> <a href="#ref-for-idl-DOMString⑥">(3)</a>
    <li><a href="#ref-for-idl-DOMString⑦">7.2.1. HandwritingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Exposed">
   <a href="https://webidl.spec.whatwg.org/#Exposed">https://webidl.spec.whatwg.org/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">6. Build a HandwritingDrawing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalidstateerror">
   <a href="https://webidl.spec.whatwg.org/#invalidstateerror">https://webidl.spec.whatwg.org/#invalidstateerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidstateerror">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-invalidstateerror①">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-notsupportederror">
   <a href="https://webidl.spec.whatwg.org/#notsupportederror">https://webidl.spec.whatwg.org/#notsupportederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notsupportederror">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-notsupportederror①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-operationerror">
   <a href="https://webidl.spec.whatwg.org/#operationerror">https://webidl.spec.whatwg.org/#operationerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-operationerror">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://webidl.spec.whatwg.org/#idl-promise">https://webidl.spec.whatwg.org/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">3. Feature Query</a>
    <li><a href="#ref-for-idl-promise①">4. Create a handwriting recognizer</a>
    <li><a href="#ref-for-idl-promise②">6. Build a HandwritingDrawing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-quotaexceedederror">
   <a href="https://webidl.spec.whatwg.org/#quotaexceedederror">https://webidl.spec.whatwg.org/#quotaexceedederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-quotaexceedederror">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-SecureContext">
   <a href="https://webidl.spec.whatwg.org/#SecureContext">https://webidl.spec.whatwg.org/#SecureContext</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SecureContext">3. Feature Query</a>
    <li><a href="#ref-for-SecureContext①">4. Create a handwriting recognizer</a>
    <li><a href="#ref-for-SecureContext②">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-SecureContext③">6. Build a HandwritingDrawing</a> <a href="#ref-for-SecureContext④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-exceptiondef-typeerror">
   <a href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror">https://webidl.spec.whatwg.org/#exceptiondef-typeerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-typeerror">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-exceptiondef-typeerror①">4.1. createHandwritingRecognizer(constraint) method </a>
    <li><a href="#ref-for-exceptiondef-typeerror②">6.1.2. addPoint(point)</a> <a href="#ref-for-exceptiondef-typeerror③">(2)</a> <a href="#ref-for-exceptiondef-typeerror④">(3)</a> <a href="#ref-for-exceptiondef-typeerror⑤">(4)</a> <a href="#ref-for-exceptiondef-typeerror⑥">(5)</a>
    <li><a href="#ref-for-exceptiondef-typeerror⑦">6.2.1. addStroke(stroke)</a>
    <li><a href="#ref-for-exceptiondef-typeerror⑧">6.2.2. removeStroke(stroke)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-unknownerror">
   <a href="https://webidl.spec.whatwg.org/#unknownerror">https://webidl.spec.whatwg.org/#unknownerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-unknownerror">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-new-promise">
   <a href="https://webidl.spec.whatwg.org/#a-new-promise">https://webidl.spec.whatwg.org/#a-new-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-new-promise">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-a-new-promise①">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://webidl.spec.whatwg.org/#idl-boolean">https://webidl.spec.whatwg.org/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">3. Feature Query</a> <a href="#ref-for-idl-boolean①">(2)</a> <a href="#ref-for-idl-boolean②">(3)</a> <a href="#ref-for-idl-boolean③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-double">
   <a href="https://webidl.spec.whatwg.org/#idl-double">https://webidl.spec.whatwg.org/#idl-double</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-double">6. Build a HandwritingDrawing</a> <a href="#ref-for-idl-double①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-domexception-name">
   <a href="https://webidl.spec.whatwg.org/#dom-domexception-name">https://webidl.spec.whatwg.org/#dom-domexception-name</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-domexception-name">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-dom-domexception-name①">(2)</a> <a href="#ref-for-dom-domexception-name②">(3)</a>
    <li><a href="#ref-for-dom-domexception-name③">5.2. startDrawing(hints)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-object">
   <a href="https://webidl.spec.whatwg.org/#idl-object">https://webidl.spec.whatwg.org/#idl-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-object">6.1.3. getPoints()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reject">
   <a href="https://webidl.spec.whatwg.org/#reject">https://webidl.spec.whatwg.org/#reject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-reject①">(2)</a> <a href="#ref-for-reject②">(3)</a> <a href="#ref-for-reject③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resolve">
   <a href="https://webidl.spec.whatwg.org/#resolve">https://webidl.spec.whatwg.org/#resolve</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve">3.1. queryHandwritingRecognizer(constraint)</a> <a href="#ref-for-resolve①">(2)</a> <a href="#ref-for-resolve②">(3)</a>
    <li><a href="#ref-for-resolve③">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-sequence">
   <a href="https://webidl.spec.whatwg.org/#idl-sequence">https://webidl.spec.whatwg.org/#idl-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-sequence">3. Feature Query</a> <a href="#ref-for-idl-sequence①">(2)</a> <a href="#ref-for-idl-sequence②">(3)</a>
    <li><a href="#ref-for-idl-sequence③">6. Build a HandwritingDrawing</a> <a href="#ref-for-idl-sequence④">(2)</a> <a href="#ref-for-idl-sequence⑤">(3)</a>
    <li><a href="#ref-for-idl-sequence⑥">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-idl-sequence⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-throw">
   <a href="https://webidl.spec.whatwg.org/#dfn-throw">https://webidl.spec.whatwg.org/#dfn-throw</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-throw">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-dfn-throw①">4.1. createHandwritingRecognizer(constraint) method </a>
    <li><a href="#ref-for-dfn-throw②">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-dfn-throw③">6.1.2. addPoint(point)</a> <a href="#ref-for-dfn-throw④">(2)</a> <a href="#ref-for-dfn-throw⑤">(3)</a> <a href="#ref-for-dfn-throw⑥">(4)</a> <a href="#ref-for-dfn-throw⑦">(5)</a>
    <li><a href="#ref-for-dfn-throw⑧">6.2.1. addStroke(stroke)</a>
    <li><a href="#ref-for-dfn-throw⑨">6.2.2. removeStroke(stroke)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
   <a href="https://webidl.spec.whatwg.org/#idl-undefined">https://webidl.spec.whatwg.org/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-idl-undefined①">6. Build a HandwritingDrawing</a> <a href="#ref-for-idl-undefined②">(2)</a> <a href="#ref-for-idl-undefined③">(3)</a> <a href="#ref-for-idl-undefined④">(4)</a> <a href="#ref-for-idl-undefined⑤">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-unsigned-long">
   <a href="https://webidl.spec.whatwg.org/#idl-unsigned-long">https://webidl.spec.whatwg.org/#idl-unsigned-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-unsigned-long">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-idl-unsigned-long①">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-idl-unsigned-long②">(2)</a> <a href="#ref-for-idl-unsigned-long③">(3)</a> <a href="#ref-for-idl-unsigned-long④">(4)</a> <a href="#ref-for-idl-unsigned-long⑤">(5)</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[hr-time-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-domhighrestimestamp">DOMHighResTimeStamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-navigator">Navigator</span>
     <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-list-append">append</span>
     <li><span class="dfn-paneled" id="term-for-list-empty">empty</span>
     <li><span class="dfn-paneled" id="term-for-list">list</span>
     <li><span class="dfn-paneled" id="term-for-list-remove">remove</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-idl-DOMException">DOMException</span>
     <li><span class="dfn-paneled" id="term-for-idl-DOMString">DOMString</span>
     <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
     <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
     <li><span class="dfn-paneled" id="term-for-notsupportederror">NotSupportedError</span>
     <li><span class="dfn-paneled" id="term-for-operationerror">OperationError</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
     <li><span class="dfn-paneled" id="term-for-quotaexceedederror">QuotaExceededError</span>
     <li><span class="dfn-paneled" id="term-for-SecureContext">SecureContext</span>
     <li><span class="dfn-paneled" id="term-for-exceptiondef-typeerror">TypeError</span>
     <li><span class="dfn-paneled" id="term-for-unknownerror">UnknownError</span>
     <li><span class="dfn-paneled" id="term-for-a-new-promise">a new promise</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
     <li><span class="dfn-paneled" id="term-for-idl-double">double</span>
     <li><span class="dfn-paneled" id="term-for-dom-domexception-name">name</span>
     <li><span class="dfn-paneled" id="term-for-idl-object">object</span>
     <li><span class="dfn-paneled" id="term-for-reject">reject</span>
     <li><span class="dfn-paneled" id="term-for-resolve">resolve</span>
     <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence</span>
     <li><span class="dfn-paneled" id="term-for-dfn-throw">throw</span>
     <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
     <li><span class="dfn-paneled" id="term-for-idl-unsigned-long">unsigned long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-bcp47">[BCP47]
   <dd>A. Phillips, Ed.; M. Davis, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc5646"><cite>Tags for Identifying Languages</cite></a>. September 2009. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
   <dt id="biblio-hr-time-2">[HR-TIME-2]
   <dd>Ilya Grigorik. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time Level 2</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingrecognizerqueryresult"><c- n>HandwritingRecognizerQueryResult</c-></a>?>
      <a href="#dom-navigator-queryhandwritingrecognizer"><code><c- g>queryHandwritingRecognizer</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <a href="#dom-navigator-queryhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingmodelconstraint"><code><c- g>HandwritingModelConstraint</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString> " href="#dom-handwritingmodelconstraint-languages"><code><c- g>languages</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingrecognizerqueryresult"><code><c- g>HandwritingRecognizerQueryResult</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-handwritingrecognizerqueryresult-textalternatives"><code><c- g>textAlternatives</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-handwritingrecognizerqueryresult-textsegmentation"><code><c- g>textSegmentation</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-handwritinghintsqueryresult"><c- n>HandwritingHintsQueryResult</c-></a> <a data-type="HandwritingHintsQueryResult " href="#dom-handwritingrecognizerqueryresult-hints"><code><c- g>hints</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritinghintsqueryresult"><code><c- g>HandwritingHintsQueryResult</c-></code></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritingrecognitiontype"><c- n>HandwritingRecognitionType</c-></a>> <a data-type="sequence<HandwritingRecognitionType> " href="#dom-handwritinghintsqueryresult-recognitiontype"><code><c- g>recognitionType</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritinginputtype"><c- n>HandwritingInputType</c-></a>> <a data-type="sequence<HandwritingInputType> " href="#dom-handwritinghintsqueryresult-inputtype"><code><c- g>inputType</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-handwritinghintsqueryresult-textcontext"><code><c- g>textContext</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean " href="#dom-handwritinghintsqueryresult-alternatives"><code><c- g>alternatives</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-handwritingrecognitiontype"><code><c- g>HandwritingRecognitionType</c-></code></a>{
  <a href="#dom-handwritingrecognitiontype-text"><code><c- s>"text"</c-></code></a>, <a href="#dom-handwritingrecognitiontype-per-character"><code><c- s>"per-character"</c-></code></a>
};

<c- b>enum</c-> <a href="#enumdef-handwritinginputtype"><code><c- g>HandwritingInputType</c-></code></a> {
  <a href="#dom-handwritinginputtype-mouse"><code><c- s>"mouse"</c-></code></a>, <a href="#dom-handwritinginputtype-stylus"><code><c- s>"stylus"</c-></code></a>, <a href="#dom-handwritinginputtype-touch"><code><c- s>"touch"</c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingrecognizer"><c- n>HandwritingRecognizer</c-></a>>
      <a href="#dom-navigator-createhandwritingrecognizer"><code><c- g>createHandwritingRecognizer</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <a href="#dom-navigator-createhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></a>);
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#handwritingrecognizer"><code><c- g>HandwritingRecognizer</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute"><c- g>RaisesException</c-></a>]
  <a data-link-type="idl-name" href="#handwritingdrawing"><c- n>HandwritingDrawing</c-></a> <a href="#dom-handwritingrecognizer-startdrawing"><code><c- g>startDrawing</c-></code></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-handwritinghints"><c- n>HandwritingHints</c-></a> <a href="#dom-handwritingrecognizer-startdrawing-hints-hints"><code><c- g>hints</c-></code></a> = {});

  [<a class="idl-code" data-link-type="extended-attribute"><c- g>RaisesException</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingrecognizer-finish"><code><c- g>finish</c-></code></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-handwritinghints"><code><c- g>HandwritingHints</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;text&quot;" data-type="DOMString " href="#dom-handwritinghints-recognitiontype"><code><c- g>recognitionType</c-></code></a> = "text";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;mouse&quot;" data-type="DOMString " href="#dom-handwritinghints-inputtype"><code><c- g>inputType</c-></code></a> = "mouse";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-handwritinghints-textcontext"><code><c- g>textContext</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-default="3" data-type="unsigned long " href="#dom-handwritinghints-alternatives"><code><c- g>alternatives</c-></code></a> = 3;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#handwritingdrawing"><code><c- g>HandwritingDrawing</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-addstroke"><code><c- g>addStroke</c-></code></a>(<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a> <a href="#dom-handwritingdrawing-addstroke-stroke-stroke"><code><c- g>stroke</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-removestroke"><code><c- g>removeStroke</c-></code></a>(<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a> <a href="#dom-handwritingdrawing-removestroke-stroke-stroke"><code><c- g>stroke</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-clear"><code><c- g>clear</c-></code></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a>> <a href="#dom-handwritingdrawing-getstrokes"><code><c- g>getStrokes</c-></code></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingprediction"><c- n>HandwritingPrediction</c-></a>>> <a href="#dom-handwritingdrawing-getprediction"><code><c- g>getPrediction</c-></code></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#handwritingstroke"><code><c- g>HandwritingStroke</c-></code></a> {
  <a href="#dom-handwritingstroke-handwritingstroke"><code><c- g>constructor</c-></code></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingstroke-addpoint"><code><c- g>addPoint</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a> <a href="#dom-handwritingstroke-addpoint-point-point"><code><c- g>point</c-></code></a>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a>> <a href="#dom-handwritingstroke-getpoints"><code><c- g>getPoints</c-></code></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingstroke-clear"><code><c- g>clear</c-></code></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingpoint"><code><c- g>HandwritingPoint</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double " href="#dom-handwritingpoint-x"><code><c- g>x</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double " href="#dom-handwritingpoint-y"><code><c- g>y</c-></code></a>;

  // Optional. Number of milliseconds since a reference time point for a
  // drawing.
  <a data-link-type="idl-name" href="https://www.w3.org/TR/hr-time-2/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-type="DOMHighResTimeStamp " href="#dom-handwritingpoint-t"><code><c- g>t</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingprediction"><code><c- g>HandwritingPrediction</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-handwritingprediction-text"><code><c- g>text</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingsegment"><c- n>HandwritingSegment</c-></a>> <a data-type="sequence<HandwritingSegment> " href="#dom-handwritingprediction-segmentationresult"><code><c- g>segmentationResult</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingsegment"><code><c- g>HandwritingSegment</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString " href="#dom-handwritingsegment-grapheme"><code><c- g>grapheme</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-handwritingsegment-beginindex"><code><c- g>beginIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-handwritingsegment-endindex"><code><c- g>endIndex</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingdrawingsegment"><c- n>HandwritingDrawingSegment</c-></a>> <a data-type="sequence<HandwritingDrawingSegment> " href="#dom-handwritingsegment-drawingsegments"><code><c- g>drawingSegments</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingdrawingsegment"><code><c- g>HandwritingDrawingSegment</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-handwritingdrawingsegment-strokeindex"><code><c- g>strokeIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-handwritingdrawingsegment-beginpointindex"><code><c- g>beginPointIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long " href="#dom-handwritingdrawingsegment-endpointindex"><code><c- g>endPointIndex</c-></code></a>;
};

</pre>
  <aside class="dfn-panel" data-for="drawing">
   <b><a href="#drawing">#drawing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-drawing">2.  Definitions </a>
    <li><a href="#ref-for-drawing①">6. Build a HandwritingDrawing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="stroke">
   <b><a href="#stroke">#stroke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-stroke">6.1. HandwritingStroke</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="point">
   <b><a href="#point">#point</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-point">2.  Definitions </a>
    <li><a href="#ref-for-point①">6.1. HandwritingStroke</a>
    <li><a href="#ref-for-point②">6.1.2. addPoint(point)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="transcription">
   <b><a href="#transcription">#transcription</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-transcription">2.  Definitions </a> <a href="#ref-for-transcription①">(2)</a>
    <li><a href="#ref-for-transcription②">3.3. HandwritingRecognizerQueryResult attributes </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwriting-recognizer">
   <b><a href="#handwriting-recognizer">#handwriting-recognizer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwriting-recognizer">2.  Definitions </a> <a href="#ref-for-handwriting-recognizer①">(2)</a>
    <li><a href="#ref-for-handwriting-recognizer②">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-handwriting-recognizer③">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-handwriting-recognizer④">(2)</a> <a href="#ref-for-handwriting-recognizer⑤">(3)</a> <a href="#ref-for-handwriting-recognizer⑥">(4)</a> <a href="#ref-for-handwriting-recognizer⑦">(5)</a>
    <li><a href="#ref-for-handwriting-recognizer⑧">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-handwriting-recognizer⑨">5.2. startDrawing(hints)</a> <a href="#ref-for-handwriting-recognizer①⓪">(2)</a> <a href="#ref-for-handwriting-recognizer①①">(3)</a>
    <li><a href="#ref-for-handwriting-recognizer①②">5.3. finish()</a> <a href="#ref-for-handwriting-recognizer①③">(2)</a> <a href="#ref-for-handwriting-recognizer①④">(3)</a>
    <li><a href="#ref-for-handwriting-recognizer①⑤">6. Build a HandwritingDrawing</a> <a href="#ref-for-handwriting-recognizer①⑥">(2)</a> <a href="#ref-for-handwriting-recognizer①⑦">(3)</a> <a href="#ref-for-handwriting-recognizer①⑧">(4)</a> <a href="#ref-for-handwriting-recognizer①⑨">(5)</a>
    <li><a href="#ref-for-handwriting-recognizer②⓪">7.1. getPrediction()</a> <a href="#ref-for-handwriting-recognizer②①">(2)</a>
    <li><a href="#ref-for-handwriting-recognizer②②">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-handwriting-recognizer②③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="convert-data-format">
   <b><a href="#convert-data-format">#convert-data-format</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-convert-data-format">3.1. queryHandwritingRecognizer(constraint)</a> <a href="#ref-for-convert-data-format①">(2)</a>
    <li><a href="#ref-for-convert-data-format②">4.1. createHandwritingRecognizer(constraint) method </a>
    <li><a href="#ref-for-convert-data-format③">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-convert-data-format④">7.1. getPrediction()</a> <a href="#ref-for-convert-data-format⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="segmentation">
   <b><a href="#segmentation">#segmentation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-segmentation">2.  Definitions </a>
    <li><a href="#ref-for-segmentation①">3.3. HandwritingRecognizerQueryResult attributes </a>
    <li><a href="#ref-for-segmentation②">7.2. HandwritingPrediction attributes</a>
    <li><a href="#ref-for-segmentation③">7.2.1. HandwritingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-navigator-queryhandwritingrecognizer">
   <b><a href="#dom-navigator-queryhandwritingrecognizer">#dom-navigator-queryhandwritingrecognizer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-queryhandwritingrecognizer">3.1. queryHandwritingRecognizer(constraint)</a> <a href="#ref-for-dom-navigator-queryhandwritingrecognizer①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingmodelconstraint">
   <b><a href="#dictdef-handwritingmodelconstraint">#dictdef-handwritingmodelconstraint</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingmodelconstraint">3. Feature Query</a>
    <li><a href="#ref-for-dictdef-handwritingmodelconstraint①">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-dictdef-handwritingmodelconstraint②">3.2. HandwritingModelConstraint attributes</a>
    <li><a href="#ref-for-dictdef-handwritingmodelconstraint③">4. Create a handwriting recognizer</a>
    <li><a href="#ref-for-dictdef-handwritingmodelconstraint④">4.1. createHandwritingRecognizer(constraint) method </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingmodelconstraint-languages">
   <b><a href="#dom-handwritingmodelconstraint-languages">#dom-handwritingmodelconstraint-languages</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingmodelconstraint-languages">3.1. queryHandwritingRecognizer(constraint)</a> <a href="#ref-for-dom-handwritingmodelconstraint-languages①">(2)</a>
    <li><a href="#ref-for-dom-handwritingmodelconstraint-languages②">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-dom-handwritingmodelconstraint-languages③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingrecognizerqueryresult">
   <b><a href="#dictdef-handwritingrecognizerqueryresult">#dictdef-handwritingrecognizerqueryresult</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingrecognizerqueryresult">3. Feature Query</a>
    <li><a href="#ref-for-dictdef-handwritingrecognizerqueryresult①">3.1. queryHandwritingRecognizer(constraint)</a> <a href="#ref-for-dictdef-handwritingrecognizerqueryresult②">(2)</a>
    <li><a href="#ref-for-dictdef-handwritingrecognizerqueryresult③">3.3. HandwritingRecognizerQueryResult attributes </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingrecognizerqueryresult-textsegmentation">
   <b><a href="#dom-handwritingrecognizerqueryresult-textsegmentation">#dom-handwritingrecognizerqueryresult-textsegmentation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingrecognizerqueryresult-textsegmentation">7.2. HandwritingPrediction attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingrecognizerqueryresult-hints">
   <b><a href="#dom-handwritingrecognizerqueryresult-hints">#dom-handwritingrecognizerqueryresult-hints</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingrecognizerqueryresult-hints">3.1. queryHandwritingRecognizer(constraint)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritinghintsqueryresult">
   <b><a href="#dictdef-handwritinghintsqueryresult">#dictdef-handwritinghintsqueryresult</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritinghintsqueryresult">3. Feature Query</a>
    <li><a href="#ref-for-dictdef-handwritinghintsqueryresult①">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-dictdef-handwritinghintsqueryresult②">3.3. HandwritingRecognizerQueryResult attributes </a>
    <li><a href="#ref-for-dictdef-handwritinghintsqueryresult③">3.3.1. HandwritingHintsQueryResult attributes </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-handwritingrecognitiontype">
   <b><a href="#enumdef-handwritingrecognitiontype">#enumdef-handwritingrecognitiontype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-handwritingrecognitiontype">3. Feature Query</a>
    <li><a href="#ref-for-enumdef-handwritingrecognitiontype①">3.3.1. HandwritingHintsQueryResult attributes </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-handwritinginputtype">
   <b><a href="#enumdef-handwritinginputtype">#enumdef-handwritinginputtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-handwritinginputtype">3. Feature Query</a>
    <li><a href="#ref-for-enumdef-handwritinginputtype①">3.3.1. HandwritingHintsQueryResult attributes </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-navigator-createhandwritingrecognizer">
   <b><a href="#dom-navigator-createhandwritingrecognizer">#dom-navigator-createhandwritingrecognizer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-createhandwritingrecognizer">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-dom-navigator-createhandwritingrecognizer①">3.2. HandwritingModelConstraint attributes</a>
    <li><a href="#ref-for-dom-navigator-createhandwritingrecognizer②">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-dom-navigator-createhandwritingrecognizer③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingrecognizer">
   <b><a href="#handwritingrecognizer">#handwritingrecognizer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingrecognizer">3.1. queryHandwritingRecognizer(constraint)</a>
    <li><a href="#ref-for-handwritingrecognizer①">4. Create a handwriting recognizer</a> <a href="#ref-for-handwritingrecognizer②">(2)</a>
    <li><a href="#ref-for-handwritingrecognizer③">4.1. createHandwritingRecognizer(constraint) method </a> <a href="#ref-for-handwritingrecognizer④">(2)</a> <a href="#ref-for-handwritingrecognizer⑤">(3)</a>
    <li><a href="#ref-for-handwritingrecognizer⑥">5.1. HandwritingRecognizer object </a> <a href="#ref-for-handwritingrecognizer⑦">(2)</a>
    <li><a href="#ref-for-handwritingrecognizer⑧">5.2. startDrawing(hints)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingrecognizer-startdrawing">
   <b><a href="#dom-handwritingrecognizer-startdrawing">#dom-handwritingrecognizer-startdrawing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingrecognizer-startdrawing">3.3. HandwritingRecognizerQueryResult attributes </a>
    <li><a href="#ref-for-dom-handwritingrecognizer-startdrawing①">3.3.1. HandwritingHintsQueryResult attributes </a> <a href="#ref-for-dom-handwritingrecognizer-startdrawing②">(2)</a>
    <li><a href="#ref-for-dom-handwritingrecognizer-startdrawing③">5.2. startDrawing(hints)</a> <a href="#ref-for-dom-handwritingrecognizer-startdrawing④">(2)</a>
    <li><a href="#ref-for-dom-handwritingrecognizer-startdrawing⑤">6. Build a HandwritingDrawing</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingrecognizer-finish">
   <b><a href="#dom-handwritingrecognizer-finish">#dom-handwritingrecognizer-finish</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingrecognizer-finish">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-dom-handwritingrecognizer-finish①">5.3. finish()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritinghints">
   <b><a href="#dictdef-handwritinghints">#dictdef-handwritinghints</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritinghints">5.1. HandwritingRecognizer object </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingrecognizer-active">
   <b><a href="#handwritingrecognizer-active">#handwritingrecognizer-active</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingrecognizer-active">4.1. createHandwritingRecognizer(constraint) method </a>
    <li><a href="#ref-for-handwritingrecognizer-active①">5.1. HandwritingRecognizer object </a> <a href="#ref-for-handwritingrecognizer-active②">(2)</a> <a href="#ref-for-handwritingrecognizer-active③">(3)</a>
    <li><a href="#ref-for-handwritingrecognizer-active④">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-handwritingrecognizer-active⑤">5.3. finish()</a> <a href="#ref-for-handwritingrecognizer-active⑥">(2)</a> <a href="#ref-for-handwritingrecognizer-active⑦">(3)</a>
    <li><a href="#ref-for-handwritingrecognizer-active⑧">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingdrawing-strokes">
   <b><a href="#handwritingdrawing-strokes">#handwritingdrawing-strokes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingdrawing-strokes">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-handwritingdrawing-strokes①">6.2.1. addStroke(stroke)</a>
    <li><a href="#ref-for-handwritingdrawing-strokes②">6.2.2. removeStroke(stroke)</a>
    <li><a href="#ref-for-handwritingdrawing-strokes③">6.2.3. getStrokes()</a>
    <li><a href="#ref-for-handwritingdrawing-strokes④">6.2.4. clear()</a>
    <li><a href="#ref-for-handwritingdrawing-strokes⑤">7.1. getPrediction()</a>
    <li><a href="#ref-for-handwritingdrawing-strokes⑥">7.2.2. HandwritingDrawingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingdrawing-recognizer">
   <b><a href="#handwritingdrawing-recognizer">#handwritingdrawing-recognizer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingdrawing-recognizer">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-handwritingdrawing-recognizer①">7.1. getPrediction()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingdrawing">
   <b><a href="#handwritingdrawing">#handwritingdrawing</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingdrawing">5.1. HandwritingRecognizer object </a>
    <li><a href="#ref-for-handwritingdrawing①">5.2. startDrawing(hints)</a> <a href="#ref-for-handwritingdrawing②">(2)</a> <a href="#ref-for-handwritingdrawing③">(3)</a> <a href="#ref-for-handwritingdrawing④">(4)</a> <a href="#ref-for-handwritingdrawing⑤">(5)</a> <a href="#ref-for-handwritingdrawing⑥">(6)</a>
    <li><a href="#ref-for-handwritingdrawing⑦">5.3. finish()</a>
    <li><a href="#ref-for-handwritingdrawing⑧">6. Build a HandwritingDrawing</a> <a href="#ref-for-handwritingdrawing⑨">(2)</a> <a href="#ref-for-handwritingdrawing①⓪">(3)</a> <a href="#ref-for-handwritingdrawing①①">(4)</a> <a href="#ref-for-handwritingdrawing①②">(5)</a> <a href="#ref-for-handwritingdrawing①③">(6)</a>
    <li><a href="#ref-for-handwritingdrawing①④">6.2. HandwritingDrawing</a>
    <li><a href="#ref-for-handwritingdrawing①⑤">7. Get predictions of a HandwritingDrawing</a>
    <li><a href="#ref-for-handwritingdrawing①⑥">7.2.2. HandwritingDrawingSegment attributes</a> <a href="#ref-for-handwritingdrawing①⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingdrawing-addstroke">
   <b><a href="#dom-handwritingdrawing-addstroke">#dom-handwritingdrawing-addstroke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingdrawing-addstroke">6.2.1. addStroke(stroke)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingdrawing-removestroke">
   <b><a href="#dom-handwritingdrawing-removestroke">#dom-handwritingdrawing-removestroke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingdrawing-removestroke">6.2.2. removeStroke(stroke)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingdrawing-clear">
   <b><a href="#dom-handwritingdrawing-clear">#dom-handwritingdrawing-clear</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingdrawing-clear">6.2.4. clear()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingdrawing-getstrokes">
   <b><a href="#dom-handwritingdrawing-getstrokes">#dom-handwritingdrawing-getstrokes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingdrawing-getstrokes">6.2.3. getStrokes()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingdrawing-getprediction">
   <b><a href="#dom-handwritingdrawing-getprediction">#dom-handwritingdrawing-getprediction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingdrawing-getprediction">3.3.1. HandwritingHintsQueryResult attributes </a>
    <li><a href="#ref-for-dom-handwritingdrawing-getprediction①">5.3. finish()</a>
    <li><a href="#ref-for-dom-handwritingdrawing-getprediction②">6. Build a HandwritingDrawing</a> <a href="#ref-for-dom-handwritingdrawing-getprediction③">(2)</a> <a href="#ref-for-dom-handwritingdrawing-getprediction④">(3)</a>
    <li><a href="#ref-for-dom-handwritingdrawing-getprediction⑤">7.1. getPrediction()</a> <a href="#ref-for-dom-handwritingdrawing-getprediction⑥">(2)</a> <a href="#ref-for-dom-handwritingdrawing-getprediction⑦">(3)</a> <a href="#ref-for-dom-handwritingdrawing-getprediction⑧">(4)</a>
    <li><a href="#ref-for-dom-handwritingdrawing-getprediction⑨">7.2.2. HandwritingDrawingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingstroke">
   <b><a href="#handwritingstroke">#handwritingstroke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingstroke">5.2. startDrawing(hints)</a>
    <li><a href="#ref-for-handwritingstroke①">6. Build a HandwritingDrawing</a> <a href="#ref-for-handwritingstroke②">(2)</a> <a href="#ref-for-handwritingstroke③">(3)</a> <a href="#ref-for-handwritingstroke④">(4)</a> <a href="#ref-for-handwritingstroke⑤">(5)</a> <a href="#ref-for-handwritingstroke⑥">(6)</a>
    <li><a href="#ref-for-handwritingstroke⑦">6.1. HandwritingStroke</a> <a href="#ref-for-handwritingstroke⑧">(2)</a> <a href="#ref-for-handwritingstroke⑨">(3)</a>
    <li><a href="#ref-for-handwritingstroke①⓪">6.1.1. HandwritingStroke()</a>
    <li><a href="#ref-for-handwritingstroke①①">6.1.2. addPoint(point)</a>
    <li><a href="#ref-for-handwritingstroke①②">6.2.1. addStroke(stroke)</a>
    <li><a href="#ref-for-handwritingstroke①③">6.2.2. removeStroke(stroke)</a>
    <li><a href="#ref-for-handwritingstroke①④">7.2.2. HandwritingDrawingSegment attributes</a> <a href="#ref-for-handwritingstroke①⑤">(2)</a> <a href="#ref-for-handwritingstroke①⑥">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingstroke-handwritingstroke">
   <b><a href="#dom-handwritingstroke-handwritingstroke">#dom-handwritingstroke-handwritingstroke</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingstroke-handwritingstroke">6.1.1. HandwritingStroke()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingstroke-addpoint">
   <b><a href="#dom-handwritingstroke-addpoint">#dom-handwritingstroke-addpoint</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingstroke-addpoint">6.1.2. addPoint(point)</a> <a href="#ref-for-dom-handwritingstroke-addpoint①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingstroke-getpoints">
   <b><a href="#dom-handwritingstroke-getpoints">#dom-handwritingstroke-getpoints</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingstroke-getpoints">6.1.3. getPoints()</a> <a href="#ref-for-dom-handwritingstroke-getpoints①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingstroke-clear">
   <b><a href="#dom-handwritingstroke-clear">#dom-handwritingstroke-clear</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingstroke-clear">6.1.4. clear()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingpoint">
   <b><a href="#dictdef-handwritingpoint">#dictdef-handwritingpoint</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingpoint">6. Build a HandwritingDrawing</a> <a href="#ref-for-dictdef-handwritingpoint①">(2)</a> <a href="#ref-for-dictdef-handwritingpoint②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handwritingstroke-points">
   <b><a href="#handwritingstroke-points">#handwritingstroke-points</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handwritingstroke-points">6.1. HandwritingStroke</a>
    <li><a href="#ref-for-handwritingstroke-points①">6.1.1. HandwritingStroke()</a>
    <li><a href="#ref-for-handwritingstroke-points②">6.1.2. addPoint(point)</a>
    <li><a href="#ref-for-handwritingstroke-points③">6.1.3. getPoints()</a> <a href="#ref-for-handwritingstroke-points④">(2)</a>
    <li><a href="#ref-for-handwritingstroke-points⑤">6.1.4. clear()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingprediction">
   <b><a href="#dictdef-handwritingprediction">#dictdef-handwritingprediction</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingprediction">6. Build a HandwritingDrawing</a>
    <li><a href="#ref-for-dictdef-handwritingprediction①">7.1. getPrediction()</a>
    <li><a href="#ref-for-dictdef-handwritingprediction②">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-dictdef-handwritingprediction③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingprediction-text">
   <b><a href="#dom-handwritingprediction-text">#dom-handwritingprediction-text</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingprediction-text">7.2.1. HandwritingSegment attributes</a> <a href="#ref-for-dom-handwritingprediction-text①">(2)</a> <a href="#ref-for-dom-handwritingprediction-text②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingsegment">
   <b><a href="#dictdef-handwritingsegment">#dictdef-handwritingsegment</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingsegment">7.2. HandwritingPrediction attributes</a> <a href="#ref-for-dictdef-handwritingsegment①">(2)</a>
    <li><a href="#ref-for-dictdef-handwritingsegment②">7.2.1. HandwritingSegment attributes</a> <a href="#ref-for-dictdef-handwritingsegment③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingsegment-grapheme">
   <b><a href="#dom-handwritingsegment-grapheme">#dom-handwritingsegment-grapheme</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingsegment-grapheme">7.2.1. HandwritingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingsegment-beginindex">
   <b><a href="#dom-handwritingsegment-beginindex">#dom-handwritingsegment-beginindex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingsegment-beginindex">7.2.1. HandwritingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-handwritingsegment-endindex">
   <b><a href="#dom-handwritingsegment-endindex">#dom-handwritingsegment-endindex</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-handwritingsegment-endindex">7.2.1. HandwritingSegment attributes</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-handwritingdrawingsegment">
   <b><a href="#dictdef-handwritingdrawingsegment">#dictdef-handwritingdrawingsegment</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-handwritingdrawingsegment">7.2. HandwritingPrediction attributes</a>
    <li><a href="#ref-for-dictdef-handwritingdrawingsegment①">7.2.1. HandwritingSegment attributes</a>
    <li><a href="#ref-for-dictdef-handwritingdrawingsegment②">7.2.2. HandwritingDrawingSegment attributes</a> <a href="#ref-for-dictdef-handwritingdrawingsegment③">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>