<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Handwriting Recognition API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version 742f3d674, updated Mon Nov 4 14:56:54 2024 -0800" name="generator">
  <link href="https://wicg.github.io/handwriting-recognition/" rel="canonical">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
  /* domintro from https://resources.whatwg.org/standard.css */
.domintro {
  position: relative;
  color: green;
  background: #DDFFDD;
  margin: 2.5em 0 2em 0;
  padding: 1.5em 1em 0.5em 2em;
}

.domintro dt, .domintro dt * {
  color: black;
  font-size: inherit;
}
.domintro dd {
  margin: 0.5em 0 1em 2em; padding: 0;
}
.domintro dd p {
  margin: 0.5em 0;
}
.domintro::before {
  content: 'For web developers (non-normative)';
  background: green;
  color: white;
  padding: 0.15em 0.25em;
  font-style: normal;
  position: absolute;
  top: -0.8em;
  left: -0.8em;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Handwriting Recognition API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2024-11-07">7 November 2024</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://wicg.github.io/handwriting-recognition/">https://wicg.github.io/handwriting-recognition/</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="127621"><a class="p-name fn u-url url" href="https://wacky.one/">Jiewei Qian</a> (<a class="p-org org" href="https://www.google.com/">Google</a>) <a class="u-email email" href="mailto:qjw@google.com">qjw@google.com</a>
     <dt>Participate:
     <dd><a href="https://github.com/WICG/handwriting-recognition">GitHub WICG/handwriting-recognition</a> (<a href="https://github.com/WICG/handwriting-recognition/issues/new">new issue</a>, <a href="https://github.com/WICG/handwriting-recognition/issues?state=open">open issues</a>)
     <dt>Commits:
     <dd><a href="https://github.com/WICG/handwriting-recognition/commits/main/spec.bs">GitHub spec.bs commits</a>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2024 the Contributors to the Handwriting Recognition API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>The handwriting recognition API enables web application to recognize handwritten texts, using existing operating system capabilities.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content"> Introduction </span></a>
    <li><a href="#introduction-handwriting"><span class="secno">2</span> <span class="content"> Definitions </span></a>
    <li><a href="#api-idioms"><span class="secno">3</span> <span class="content">API Idioms</span></a>
    <li>
     <a href="#api-query"><span class="secno">4</span> <span class="content">Feature Query</span></a>
     <ol class="toc">
      <li><a href="#api-query-handwriting-recognizer"><span class="secno">4.1</span> <span class="content"><span><code class="idl"><span>queryHandwritingRecognizer(constraint)</span></code></span></span></a>
      <li><a href="#api-handwriting-model-constraint"><span class="secno">4.2</span> <span class="content"><code class="idl"><span>HandwritingModelConstraint</span></code> attributes</span></a>
      <li>
       <a href="#api-handwriting-recognizer-query-result"><span class="secno">4.3</span> <span class="content"><code class="idl"><span>HandwritingRecognizerQueryResult</span></code> attributes </span></a>
       <ol class="toc">
        <li><a href="#api-handwriting-hints-query-result"><span class="secno">4.3.1</span> <span class="content"><code class="idl"><span>HandwritingHintsQueryResult</span></code> attributes </span></a>
       </ol>
     </ol>
    <li>
     <a href="#create-a-handwriting-recognizer"><span class="secno">5</span> <span class="content">Create a handwriting recognizer</span></a>
     <ol class="toc">
      <li><a href="#api-create-handwriting-recognizer"><span class="secno">5.1</span> <span class="content"><span><code class="idl"><span>createHandwritingRecognizer(constraint)</span></code></span> method </span></a>
     </ol>
    <li>
     <a href="#using-a-recognizer"><span class="secno">6</span> <span class="content">Use a recognizer</span></a>
     <ol class="toc">
      <li><a href="#handwriting-recognizer-object"><span class="secno">6.1</span> <span class="content"><code class="idl"><span>HandwritingRecognizer</span></code> object </span></a>
      <li><a href="#handwriting-recognizer-create-drawing"><span class="secno">6.2</span> <span class="content"><span><code class="idl"><span>startDrawing(hints)</span></code></span></span></a>
      <li><a href="#handwriting-recognizer-finish"><span class="secno">6.3</span> <span class="content"><span><code class="idl"><span>finish()</span></code></span></span></a>
     </ol>
    <li>
     <a href="#handwriting-drawing"><span class="secno">7</span> <span class="content">Build a <code class="idl"><span>HandwritingDrawing</span></code></span></a>
     <ol class="toc">
      <li>
       <a href="#handwriting-stroke"><span class="secno">7.1</span> <span class="content"><code class="idl"><span>HandwritingStroke</span></code></span></a>
       <ol class="toc">
        <li><a href="#handwriting-stroke-constructor"><span class="secno">7.1.1</span> <span class="content"><code class="idl"><span>HandwritingStroke()</span></code></span></a>
        <li><a href="#handwriting-stroke-add-point"><span class="secno">7.1.2</span> <span class="content"><code class="idl"><span>addPoint(point)</span></code></span></a>
        <li><a href="#handwriting-stroke-get-points"><span class="secno">7.1.3</span> <span class="content"><code class="idl"><span>getPoints()</span></code></span></a>
        <li><a href="#handwriting-stroke-clear"><span class="secno">7.1.4</span> <span class="content"><code class="idl"><span>clear()</span></code></span></a>
       </ol>
      <li>
       <a href="#handwriting-drawing-stroke-methods"><span class="secno">7.2</span> <span class="content"><code class="idl"><span>HandwritingDrawing</span></code></span></a>
       <ol class="toc">
        <li><a href="#handwriting-drawing-add-stroke"><span class="secno">7.2.1</span> <span class="content"><code class="idl"><span>addStroke(stroke)</span></code></span></a>
        <li><a href="#handwriting-drawing-remove-stroke"><span class="secno">7.2.2</span> <span class="content"><code class="idl"><span>removeStroke(stroke)</span></code></span></a>
        <li><a href="#handwriting-drawing-get-strokes"><span class="secno">7.2.3</span> <span class="content"><code class="idl"><span>getStrokes()</span></code></span></a>
        <li><a href="#handwriting-drawing-clear"><span class="secno">7.2.4</span> <span class="content"><code class="idl"><span>clear()</span></code></span></a>
       </ol>
     </ol>
    <li>
     <a href="#get-predictions-of-a-drawing"><span class="secno">8</span> <span class="content">Get predictions of a <code class="idl"><span>HandwritingDrawing</span></code></span></a>
     <ol class="toc">
      <li><a href="#handwriting-drawing-get-prediction"><span class="secno">8.1</span> <span class="content"><code class="idl"><span>getPrediction()</span></code></span></a>
      <li>
       <a href="#handwriting-prediction"><span class="secno">8.2</span> <span class="content"><code class="idl"><span>HandwritingPrediction</span></code> attributes</span></a>
       <ol class="toc">
        <li><a href="#handwriting-segment"><span class="secno">8.2.1</span> <span class="content"><code class="idl"><span>HandwritingSegment</span></code> attributes</span></a>
        <li><a href="#handwriting-drawing-segment"><span class="secno">8.2.2</span> <span class="content"><code class="idl"><span>HandwritingDrawingSegment</span></code> attributes</span></a>
       </ol>
     </ol>
    <li><a href="#privacy consideration"><span class="secno">9</span> <span class="content">Privacy Considerations</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <script async src="https://resources.whatwg.org/file-issue.js"></script>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content"> Introduction </span><a class="self-link" href="#introduction"></a></h2>
   <ul>
    <li data-md>
     <p>This section is non-normative. *</p>
   </ul>
   <p>Handwriting inputs are drawings. A drawing captures the information required to recreate human’s pen-tip movements digitally.</p>
   <p>The API proposed here aims to expose operating system capabilities to the Web. We expect handwriting recognition capabilities to vary depending on the operating system, so the API aims to achieve a flexible design that can easily integrate with operating system specific features.</p>
   <p>We expect user agents to convert Web API data structure (defined in this spec) to the ones available on the host operating system, and connect the Web API with operating system APIs.</p>
   <p>The API doesn’t attempt to define recognition that behaves the same on all platforms.</p>
   <h2 class="heading settled" data-level="2" id="introduction-handwriting"><span class="secno">2. </span><span class="content"> Definitions </span><a class="self-link" href="#introduction-handwriting"></a></h2>
    In this spec, we define the following concepts, using the handwritten “WEB” for example: 
   <p><img alt="Handwriting Concepts" src="images/handwriting-concept.svg" width="100%"></p>
   <ul>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="drawing">drawing</dfn> consists of multiple strokes (e.g. the above letter E consists of three strokes).</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="stroke">stroke</dfn> represents one continuous pen-tip movement that happens in a time period (e.g. from one <a href="https://www.w3.org/TR/touch-events/#the-touchstart-event"><code>touchstart</code></a> to its corresponding <a href="https://www.w3.org/TR/touch-events/#the-touchend-event"><code>touchend</code></a> event). The movement trajectory is represented by a series of <a data-link-type="dfn" href="#point" id="ref-for-point">points</a>.</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="point">point</dfn> is an observation of the pen-tip in space and time. It records the timestamp and position of the pen-tip on the writing surface (e.g. a <a href="https://www.w3.org/TR/touch-events/#the-touchmove-event"><code>touchmove</code></a> event).</p>
    <li data-md>
     <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="transcription">transcription</dfn> is a string of Unicode characters that represents the text written in a drawing (e.g. string "WEB").</p>
   </ul>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="handwriting-recognizer">handwriting recognizer</dfn> is an interface (usually implemented by an external application or a service) that:</p>
   <ul>
    <li data-md>
     <p>Takes a <a data-link-type="dfn" href="#drawing" id="ref-for-drawing">drawing</a> as input</p>
    <li data-md>
     <p>Output several <a data-link-type="dfn" href="#transcription" id="ref-for-transcription">transcriptions</a> of the drawing</p>
    <li data-md>
     <p>Optionally, output <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation">segmentation</a> information about each <a data-link-type="dfn" href="#transcription" id="ref-for-transcription①">transcription</a></p>
   </ul>
   <p>What constitutes a handwriting recognizer is at the discretion of the user agent.</p>
   <p>To <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="convert-data-format">convert</dfn> data into and from a suitable format for handwriting recognizer, the user agent should match what’s defined in this spec to equivalent concepts used in <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer">handwriting recognizer</a>.</p>
   <div class="note" role="note">
     Some handwriting recognizers available on operating systems include: 
    <ul>
     <li data-md>
      <p><a href="https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.inking">Microsoft Windows Ink (UWP)</a></p>
     <li data-md>
      <p><a href="https://developer.apple.com/documentation/pencilkit">Apple PencilKit</a></p>
     <li data-md>
      <p><a href="https://docs.google.com/document/d/1ezUf1hYTeFS2f5JUHZaNSracu2YmSBrjLkri6k6KB_w/edit#heading=h.5ugemo7p04z9">Chrome OS ML Service</a></p>
    </ul>
   </div>
   <p>A <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①">handwriting recognizer</a> may output extra information to help web applications better process the handwriting (e.g. delete a character from the handwriting).</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="segmentation">Segmentation</dfn> maps graphemes (user-perceived character) to their composing strokes and points. A grapheme can span multiple Unicode code points.</p>
   <div class="example" id="grapheme"><a class="self-link" href="#grapheme"></a> x is composed of one UTF-16 code point: <code>\u0078</code> <br> g̈ is composed of two UTF-16 code points: <code>\u0067\u0308</code>.<br> षि is composed of two UTF-16 code points: <code>\u0937\u093f</code>. </div>
   <p>Take the handwritten text "int" for example:</p>
   <p><img alt="Handwriting Segmentation" src="images/segmentation-concept.svg" width="360px"></p>
   <ul>
    <li data-md>
     <p>Stroke 1 and 5 makes up letter "i"</p>
    <li data-md>
     <p>Stroke 2 makes up letter "n"</p>
    <li data-md>
     <p>Stroke 3 and 4 makes up letter "t"</p>
   </ul>
   <div class="example" id="character-editing"><a class="self-link" href="#character-editing"></a> If the application wants to delete character "t", it can remove stroke 3 and 4 from the drawing. </div>
   <h2 class="heading settled" data-level="3" id="api-idioms"><span class="secno">3. </span><span class="content">API Idioms</span><a class="self-link" href="#api-idioms"></a></h2>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source" id="ref-for-task-source">task source</a> mentioned in this specification is the <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="handwriting-recognition-task-source">handwriting recognition task source</dfn>.</p>
   <p>When an algorithm <dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="queues-a-handwriting-recognition-api-task">queues a Handwriting Recognition API task</dfn> <var>T</var>, the user agent <em>MUST</em> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">queue a global task</a> <var>T</var> on the <a data-link-type="dfn" href="#handwriting-recognition-task-source" id="ref-for-handwriting-recognition-task-source">handwriting recognition task source</a> using the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#global-object" id="ref-for-global-object">global object</a> of <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm" id="ref-for-current-realm">the current realm record</a>.</p>
   <p>Unless specified, the <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm" id="ref-for-realm">realm</a> for JavaScript objects constructed by algorithm steps is <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm" id="ref-for-current-realm①">the current realm record</a>.</p>
   <h2 class="heading settled" data-dfn-for="Navigator" data-level="4" id="api-query"><span class="secno">4. </span><span class="content">Feature Query</span><a class="self-link" href="#api-query"></a></h2>
   <p>Feature query interface provides allows web applications to query implementation-specific capabilities, so they can decide whether to use its feature.</p>
<pre class="example highlight" id="example-query"><a class="self-link" href="#example-query"></a><c- a>const</c-> modelConstraint <c- o>=</c-> <c- p>{</c-> languages<c- o>:</c-> <c- p>[</c-><c- t>'zh-CN'</c-><c- p>,</c-> <c- t>'en'</c-><c- p>]</c-> <c- p>};</c->
<c- a>const</c-> modelDesc <c- o>=</c-> <c- k>await</c-> navigator<c- p>.</c->queryHandwritingRecognizer<c- p>(</c->modelConstraint<c- p>);</c->

<c- c1>// \`modelDesc\` describes the handwriting recognizer meeting the \`modelConstraint\`.</c->
<c- c1>// If the constraints can't be satisfied, \`modelDesc\` will be null.</c->
<c- p>{</c->
  textAlternatives<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
  textSegmentation<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
  hints<c- o>:</c-> <c- p>{</c->
    alternatives<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
    textContext<c- o>:</c-> <c- kc>true</c-><c- p>,</c->
    inputTypes<c- o>:</c-> <c- p>[</c-><c- t>'mouse'</c-><c- p>,</c-> <c- t>'touch'</c-><c- p>,</c-> <c- t>'stylus'</c-><c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult"><c- n>HandwritingRecognizerQueryResult</c-></a>?>
      <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="method" data-export data-lt="queryHandwritingRecognizer(constraint)" id="dom-navigator-queryhandwritingrecognizer"><code><c- g>queryHandwritingRecognizer</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator/queryHandwritingRecognizer(constraint)" data-dfn-type="argument" data-export id="dom-navigator-queryhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></dfn>);
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingmodelconstraint"><code><c- g>HandwritingModelConstraint</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingModelConstraint" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-handwritingmodelconstraint-languages"><code><c- g>languages</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingrecognizerqueryresult"><code><c- g>HandwritingRecognizerQueryResult</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-handwritingrecognizerqueryresult-textalternatives"><code><c- g>textAlternatives</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-handwritingrecognizerqueryresult-textsegmentation"><code><c- g>textSegmentation</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult"><c- n>HandwritingHintsQueryResult</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizerQueryResult" data-dfn-type="dict-member" data-export data-type="HandwritingHintsQueryResult" id="dom-handwritingrecognizerqueryresult-hints"><code><c- g>hints</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritinghintsqueryresult"><code><c- g>HandwritingHintsQueryResult</c-></code></dfn> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritingrecognitiontype" id="ref-for-enumdef-handwritingrecognitiontype"><c- n>HandwritingRecognitionType</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingRecognitionType>" id="dom-handwritinghintsqueryresult-recognitiontype"><code><c- g>recognitionType</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritinginputtype" id="ref-for-enumdef-handwritinginputtype"><c- n>HandwritingInputType</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingInputType>" id="dom-handwritinghintsqueryresult-inputtype"><code><c- g>inputType</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-handwritinghintsqueryresult-textcontext"><code><c- g>textContext</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingHintsQueryResult" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-handwritinghintsqueryresult-alternatives"><code><c- g>alternatives</c-></code></dfn>;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-handwritingrecognitiontype"><code><c- g>HandwritingRecognitionType</c-></code></dfn>{
  <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognitionType" data-dfn-type="enum-value" data-export id="dom-handwritingrecognitiontype-text"><code><c- s>"text"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognitionType" data-dfn-type="enum-value" data-export id="dom-handwritingrecognitiontype-per-character"><code><c- s>"per-character"</c-></code></dfn>
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-handwritinginputtype"><code><c- g>HandwritingInputType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-mouse"><code><c- s>"mouse"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-stylus"><code><c- s>"stylus"</c-></code></dfn>, <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingInputType" data-dfn-type="enum-value" data-export id="dom-handwritinginputtype-touch"><code><c- s>"touch"</c-></code></dfn>
};
</pre>
   <h3 class="heading settled" data-level="4.1" id="api-query-handwriting-recognizer"><span class="secno">4.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="queryhandwritingrecognizer-constraint"><code class="idl"><a data-link-type="idl" href="#dom-navigator-queryhandwritingrecognizer" id="ref-for-dom-navigator-queryhandwritingrecognizer">queryHandwritingRecognizer(constraint)</a></code></dfn></span><a class="self-link" href="#api-query-handwriting-recognizer"></a></h3>
   <p>This method offers web applications a way to query the underlying recognizer’s capability and decide whether they want to use the recognizer:</p>
   <ul>
    <li data-md>
     <p>If the constraint can be satisfied, resolves to a description of the handwriting recognizer,</p>
    <li data-md>
     <p>if the constraint can’t be satisfied, resolves to <code>null</code></p>
   </ul>
   <p>The same <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint①">HandwritingModelConstraint</a></code> can be used to invoke <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer">createHandwritingRecognizer(constraint)</a></code> to create a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer">HandwritingRecognizer</a></code> that satisfies the constraint.</p>
   <div class="algorithm" data-algorithm="navigator-query-handwriting-recognizer">
     When <code class="idl"><a data-link-type="idl" href="#dom-navigator-queryhandwritingrecognizer" id="ref-for-dom-navigator-queryhandwritingrecognizer①">queryHandwritingRecognizer(constraint)</a></code> method is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>constraint</var> doesn’t have a <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages">languages</a></code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code></p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a></p>
      <ol>
       <li data-md>
        <p>If <var>constraint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages①">languages</a></code> member is an empty array, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a> <var>p</var> with <code>null</code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format">Convert <var>constraint</var> into a suitable form for handwriting recognizer</a>.</p>
       <li data-md>
        <p>If the user agent can’t find or create a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②">handwriting recognizer</a> that satisfies the converted <var>constraint</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">resolve</a> <var>p</var> with <code>null</code> and abort.</p>
       <li data-md>
        <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult①">HandwritingRecognizerQueryResult</a></code></p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format①">Convert the handwriting recognizer’s feature description</a>, and fills in all members of <var>result</var>,.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
    </ol>
    <p>The implementation should follow these rules when converting to <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult②">HandwritingRecognizerQueryResult</a></code> and <code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult①">HandwritingHintsQueryResult</a></code>:</p>
    <ul>
     <li data-md>
      <p>If the recognizer doesn’t accept any hint, set <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizerqueryresult-hints" id="ref-for-dom-handwritingrecognizerqueryresult-hints">hints</a></code> to <code>null</code>.</p>
     <li data-md>
      <p>If a feature or hint isn’t supported, set its attribute to <code>null</code>.</p>
     <li data-md>
      <p>If a enum hint is supported, set its attribute to the list of acceptable values.</p>
     <li data-md>
      <p>If a non-enum hint is supported, set its attribute to <code>true</code>.</p>
    </ul>
   </div>
   <h3 class="heading settled" data-level="4.2" id="api-handwriting-model-constraint"><span class="secno">4.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint②">HandwritingModelConstraint</a></code> attributes</span><a class="self-link" href="#api-handwriting-model-constraint"></a></h3>
   <p>This describes the constraint that must be satisfied by the underlying handwriting recognizer (if it will be created).</p>
   <p>This is also used to create a handwriting recognizer in <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer①">createHandwritingRecognizer(constraint)</a></code>.</p>
   <dl>
    <dt><code>languages</code>
    <dd>A list of <a data-link-type="biblio" href="#biblio-bcp47" title="Tags for Identifying Languages">[BCP47]</a> language tags that describes the languages that the recognizer has to recognize.</dd>
    <p>If more than one language is provided, the recognizer has to recognize all of them to satisfy the constraint.</p>
    <p>User agents should consider all possible scripts of a given language tag. For example, a handwriting recognizer that only recognizes Azerbaijani in Latin alphabet ("az-Latn") shouldn’t be used for "az" language tag, because Azerbaijani can also be written in Cyrillic alphabet ("az-Cyrl").</p>
    <p class="domintro non-normative">Consider using the most specific language tag when the distinction between scripts matters. For example, use "az-Latn" if the application only needs to work with Azerbaijani in latin scripts.</p>
    <p class="domintro non-normative">Some recognizers only work with a single language. Consider creating one recognizer for each language for better interoperability.</p>
   </dl>
   <h3 class="heading settled" data-level="4.3" id="api-handwriting-recognizer-query-result"><span class="secno">4.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingrecognizerqueryresult" id="ref-for-dictdef-handwritingrecognizerqueryresult③">HandwritingRecognizerQueryResult</a></code> attributes </span><a class="self-link" href="#api-handwriting-recognizer-query-result"></a></h3>
   <p>This describes intrinsic features of a handwriting recognizer implementation.</p>
   <dl>
    <dt><code>textAlternatives</code>
    <dd>A boolean indicating whether the implementation returns multiple candidates <a data-link-type="dfn" href="#transcription" id="ref-for-transcription②">transcriptions</a> instead of a single one.
    <dt><code>textSegmentation</code>
    <dd>A boolean indicating whether the implementation returns <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation①">segmentation</a> information for each transcription.
    <dt><code>hints</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult②">HandwritingHintsQueryResult</a></code> object that describes acceptable hints in <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing">startDrawing()</a></code>.
   </dl>
   <h4 class="heading settled" data-level="4.3.1" id="api-handwriting-hints-query-result"><span class="secno">4.3.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritinghintsqueryresult" id="ref-for-dictdef-handwritinghintsqueryresult③">HandwritingHintsQueryResult</a></code> attributes </span><a class="self-link" href="#api-handwriting-hints-query-result"></a></h4>
   <p>This describes a set of hints that can be optionally provided to <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing①">startDrawing()</a></code> to improve accuracy or performance.</p>
   <p>Conventionally, the attribute names here matches the ones accepted in <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing②">startDrawing()</a></code> method.</p>
   <dl>
    <dt><code>recognitionType</code>
    <dd>A list of <code class="idl"><a data-link-type="idl" href="#enumdef-handwritingrecognitiontype" id="ref-for-enumdef-handwritingrecognitiontype①">HandwritingRecognitionType</a></code> enums describing the type of text that is likely to be drawn.</dd>
    <p>Hints don’t guarantee the result transcriptions meet the description.</p>
    <dl>
     <dt><code>"text"</code>
     <dd>Free form text in typical writing prose. It means the drawing represents real words. For example, a sentence in everyday speech.
     <dt><code>"per-character"</code>
     <dd>The handwriting is made up of individual, unrelated graphemes (user-perceived characters). For example, serial numbers, license keys.
    </dl>
    <dt><code>inputType</code>
    <dd>A list of <code class="idl"><a data-link-type="idl" href="#enumdef-handwritinginputtype" id="ref-for-enumdef-handwritinginputtype①">HandwritingInputType</a></code> enums describing how the drawing is made. </dd>
    <dl>
     <dt><code>"touch"</code>
     <dd>Drawn with finger movements.
     <dt><code>"stylus"</code>
     <dd>Drawn with a stylus.
     <dt><code>"mouse"</code>
     <dd>Drawn with a mouse cursor.
    </dl>
    <dt><code>textContext</code>
    <dd>A boolean indicating if textContext is accepted. <code>textContext</code> is a string that contains the text shown to user, or previously recognized text that comes before the current drawing.
    <dt><code>alternatives</code>
    <dd>A boolean indicating if the number of alternative transcriptions can be set. This limits the maximum number of alternatives returned in <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction">getPrediction</a></code>.
   </dl>
   <h2 class="heading settled" data-dfn-for="Navigator" data-level="5" id="create-a-handwriting-recognizer"><span class="secno">5. </span><span class="content">Create a handwriting recognizer</span><a class="self-link" href="#create-a-handwriting-recognizer"></a></h2>
   <p>A <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer①">HandwritingRecognizer</a></code> manages the resources necessary for performing recognitions.</p>
<pre class="example highlight" id="example-create"><a class="self-link" href="#example-create"></a><c- a>const</c-> modelConstraint <c- o>=</c-> <c- p>{</c-> languages<c- o>:</c-> <c- p>[</c-><c- t>'en'</c-><c- p>]</c-> <c- p>};</c->

<c- k>try</c-> <c- p>{</c->
  <c- a>const</c-> recognizer <c- o>=</c-> <c- k>await</c-> navigator<c- p>.</c->createHandwritingRecognizer<c- p>(</c->modelConstraint<c- p>);</c->
  <c- c1>// Use \`recognizer\` to perform recognitions.</c->
<c- p>}</c-> <c- k>catch</c-> <c- p>(</c->err<c- p>)</c-> <c- p>{</c->
  <c- c1>// The provided model constraint can't be satisfied.</c->
<c- p>}</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator" id="ref-for-navigator①"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer②"><c- n>HandwritingRecognizer</c-></a>>
      <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="method" data-export data-lt="createHandwritingRecognizer(constraint)" id="dom-navigator-createhandwritingrecognizer"><code><c- g>createHandwritingRecognizer</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint③"><c- n>HandwritingModelConstraint</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="Navigator/createHandwritingRecognizer(constraint)" data-dfn-type="argument" data-export id="dom-navigator-createhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></dfn>);
};
</pre>
   <h3 class="heading settled" data-level="5.1" id="api-create-handwriting-recognizer"><span class="secno">5.1. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="createhandwritingrecognizer-constraint"><code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer②">createHandwritingRecognizer(constraint)</a></code></dfn> method </span><a class="self-link" href="#api-create-handwriting-recognizer"></a></h3>
    This method creates a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer③">HandwritingRecognizer</a></code> object that satisfies the provided <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingmodelconstraint" id="ref-for-dictdef-handwritingmodelconstraint④">HandwritingModelConstraint</a></code>, and reserves the necessary resources to perform recognitions. It represents an entry point to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer③">handwriting recognizer</a>. 
   <ul>
    <li data-md>
     <p>If the constraint can be satisfied, and there’s sufficient resource on the operating system to perform recognition, resolves to a <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer④">HandwritingRecognizer</a></code> object.</p>
    <li data-md>
     <p>Otherwise, rejects with an error.</p>
   </ul>
   <p class="domintro non-normative">The user agent might ask the user to install handwriting models and download handwriting models. Web applications shouldn’t assume this method always resolves quickly.</p>
   <div class="algorithm" data-algorithm="navigator-create-handwriting-recognizer">
     When <code class="idl"><a data-link-type="idl" href="#dom-navigator-createhandwritingrecognizer" id="ref-for-dom-navigator-createhandwritingrecognizer③">createHandwritingRecognizer(constraint)</a></code> method is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>constraint</var> doesn’t have a <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages②">languages</a></code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw①">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code></p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a>.</p>
     <li data-md>
      <p>Run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a></p>
      <ol>
       <li data-md>
        <p>If <var>constraint</var>’s <code class="idl"><a data-link-type="idl" href="#dom-handwritingmodelconstraint-languages" id="ref-for-dom-handwritingmodelconstraint-languages③">languages</a></code> is an empty array, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror">"NotSupportedError"</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format②">Convert <var>constraint</var> into a suitable form</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer④">handwriting recognizer</a>.</p>
       <li data-md>
        <p>If the user agent can’t find a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑤">handwriting recognizer</a> that satisfies the converted <var>constraint</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name①">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#notsupportederror" id="ref-for-notsupportederror①">"NotSupportedError"</a></code> and abort.</p>
       <li data-md>
        <p>If creating a <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑥">handwriting recognizer</a> would cause the user agent to exceed its limit for total number of active recognizer, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code> whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name②">name</a></code> attribute is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#quotaexceedederror" id="ref-for-quotaexceedederror">"QuotaExceededError"</a></code>.</p>
       <li data-md>
        <p>If the user agent can’t prepare <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑦">handwriting recognizer</a> to perform recognitions, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>p</var> with a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code> object whose name depending on the failure cause and abort:</p>
        <ul>
         <li data-md>
          <p>If the web application shouldn’t retry, <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#operationerror" id="ref-for-operationerror">"OperationError"</a></code>.</p>
         <li data-md>
          <p>Otherwise <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#unknownerror" id="ref-for-unknownerror">"UnknownError"</a></code>.</p>
        </ul>
       <li data-md>
        <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑤">HandwritingRecognizer</a></code> object, whose <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active">active</a> flag is <code>true</code></p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">Resolve</a> <var>p</var> with <var>result</var>.</p>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="6" id="using-a-recognizer"><span class="secno">6. </span><span class="content">Use a recognizer</span><a class="self-link" href="#using-a-recognizer"></a></h2>
<pre class="example highlight" id="example-recognizer"><a class="self-link" href="#example-recognizer"></a><c- a>const</c-> drawingHints <c- o>=</c-> <c- p>{</c-> textContext<c- o>:</c-> <c- u>"Hello world."</c-> <c- p>}</c->
<c- a>const</c-> drawing <c- o>=</c-> recognizer<c- p>.</c->startDrawing<c- p>(</c->textContext<c- p>)</c->

<c- c1>// Do something with \`drawing\`.</c->

<c- c1>// Frees resources associated with recognizer.</c->
recognizer<c- p>.</c->finish<c- p>()</c->
</pre>
   <h3 class="heading settled" data-level="6.1" id="handwriting-recognizer-object"><span class="secno">6.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑥">HandwritingRecognizer</a></code> object </span><a class="self-link" href="#handwriting-recognizer-object"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingrecognizer"><code><c- g>HandwritingRecognizer</c-></code></dfn> {
  <a data-link-type="idl-name" href="#handwritingdrawing" id="ref-for-handwritingdrawing"><c- n>HandwritingDrawing</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizer" data-dfn-type="method" data-export data-lt="startDrawing(hints)|startDrawing()" id="dom-handwritingrecognizer-startdrawing"><code><c- g>startDrawing</c-></code></dfn>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-handwritinghints" id="ref-for-dictdef-handwritinghints"><c- n>HandwritingHints</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizer/startDrawing(hints), HandwritingRecognizer/startDrawing()" data-dfn-type="argument" data-export id="dom-handwritingrecognizer-startdrawing-hints-hints"><code><c- g>hints</c-></code></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingRecognizer" data-dfn-type="method" data-export data-lt="finish()" id="dom-handwritingrecognizer-finish"><code><c- g>finish</c-></code></dfn>();
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritinghints"><code><c- g>HandwritingHints</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;text&quot;" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-handwritinghints-recognitiontype"><code><c- g>recognitionType</c-></code></dfn> = "text";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;mouse&quot;" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-handwritinghints-inputtype"><code><c- g>inputType</c-></code></dfn> = "mouse";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-handwritinghints-textcontext"><code><c- g>textContext</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-default="3" data-dfn-for="HandwritingHints" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritinghints-alternatives"><code><c- g>alternatives</c-></code></dfn> = 3;
};
</pre>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑦">HandwritingRecognizer</a></code> has an <dfn class="dfn-paneled" data-dfn-for="HandwritingRecognizer" data-dfn-type="dfn" data-noexport id="handwritingrecognizer-active">active</dfn> flag, which is a boolean. <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active①">active</a> flag is initially <code>true</code>, and becomes <code>false</code> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-finish" id="ref-for-dom-handwritingrecognizer-finish">finish()</a></code> method is called.</p>
   <p>When the recognizer’s <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active②">active</a> flag is <code>true</code>, web applications can create new drawings associated with this recognizer, and perform recognitions.</p>
   <p>User agents may limit the total number of <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active③">active</a> <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑧">handwriting recognizer</a>s for a website.</p>
   <h3 class="heading settled" data-level="6.2" id="handwriting-recognizer-create-drawing"><span class="secno">6.2. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="startdrawing-hints"><code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing③">startDrawing(hints)</a></code></dfn></span><a class="self-link" href="#handwriting-recognizer-create-drawing"></a></h3>
   <p>This method creates a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①">HandwritingDrawing</a></code> which stores the drawing information for subsequent recognitions.</p>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing②">HandwritingDrawing</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingDrawing" data-dfn-type="dfn" data-noexport id="handwritingdrawing-strokes">strokes</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke">HandwritingStroke</a></code>s, and initially empty.</p>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing③">HandwritingDrawing</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingDrawing" data-dfn-type="dfn" data-noexport id="handwritingdrawing-recognizer">recognizer</dfn>, which stores a reference to the <code class="idl"><a data-link-type="idl" href="#handwritingrecognizer" id="ref-for-handwritingrecognizer⑧">HandwritingRecognizer</a></code> creating this <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing④">HandwritingDrawing</a></code>.</p>
   <div class="algorithm" data-algorithm="handwriting-recognizer-start-drawing">
     When <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing④">startDrawing(hints)</a></code> is invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active④">active</a> flag isn’t <code>true</code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw②">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code> object, whose <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#dom-domexception-name" id="ref-for-dom-domexception-name③">name</a></code> member is <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror">"InvalidStateError"</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format③">Convert the provided <var>hints</var> to format suitable</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer⑨">handwriting recognizer</a>.</p>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑤">HandwritingDrawing</a></code> as <var>result</var>, store the converted hint in it if necessary.</p>
     <li data-md>
      <p>Set <var>result</var>.<a data-link-type="dfn" href="#handwritingdrawing-recognizer" id="ref-for-handwritingdrawing-recognizer">recognizer</a> to <code>this</code>.</p>
     <li data-md>
      <p>Set <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes">strokes</a> to an new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
    <p>If the provided <var>hints</var> contains features unsupported by <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⓪">handwriting recognizer</a>, the user agent should ignore relevant attributes.</p>
    <p>If the <var>hints</var> isn’t provided, the user agent might apply default at their own discretion.</p>
    <p class="note" role="note">user agents might create and pass the converted <var>hints</var> to an equivalent <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①①">handwriting recognizer</a> drawing object without storing it in <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑥">HandwritingDrawing</a></code>.</p>
   </div>
   <h3 class="heading settled" data-level="6.3" id="handwriting-recognizer-finish"><span class="secno">6.3. </span><span class="content"><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="finish"><code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-finish" id="ref-for-dom-handwritingrecognizer-finish①">finish()</a></code></dfn></span><a class="self-link" href="#handwriting-recognizer-finish"></a></h3>
   <p>This method sets <code>this</code>’s <a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑤">active</a> flag to <code>false</code>, frees the allocated <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①②">handwriting recognizer</a> resources, and cause future operations involving <code>this</code>’s <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①③">handwriting recognizer</a> to fail.</p>
   <div class="algorithm" data-algorithm="handwriting-recognizer-finish">
    <ol>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑥">active</a> isn’t <code>true</code>, abort.</p>
     <li data-md>
      <p>Set <code>this</code>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑦">active</a> to <code>false</code>.</p>
    </ol>
   </div>
   <p>The user agent should free resources associated with <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①④">handwriting recognizer</a>.</p>
   <p class="note" role="note"> After calling <code>finish()</code>, subsequent <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction①">getPrediction()</a></code> calls on <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑦">HandwritingDrawing</a></code> created by <code>this</code> will fail. </p>
   <h2 class="heading settled" data-level="7" id="handwriting-drawing"><span class="secno">7. </span><span class="content">Build a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑧">HandwritingDrawing</a></code></span><a class="self-link" href="#handwriting-drawing"></a></h2>
   <p><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing⑨">HandwritingDrawing</a></code> manages contextual information about a drawing, and maintains the strokes and points making up of the drawing. It represents a <a data-link-type="dfn" href="#drawing" id="ref-for-drawing①">drawing</a>.</p>
   <p class="note" role="note">User agent can store all strokes and points in memory, the convert them to a format suitable for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑤">handwriting recognizer</a> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction②">getPrediction()</a></code> is called. In this case, <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⓪">HandwritingDrawing</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①">HandwritingStroke</a></code> acts like a list. </p>
   <div class="note" id="change-tracking" role="note">
    <a class="self-link" href="#change-tracking"></a> Alternatively, user agent can immediately convert each stroke and point to a format suitable, and pass them to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑥">handwriting recognizer</a> when each <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke②">HandwritingStroke</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①①">HandwritingDrawing</a></code> method is called. In this case, <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①②">HandwritingDrawing</a></code> and <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke③">HandwritingStroke</a></code> acts as a wrapper for platform-dependent objects of <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑦">handwriting recognizer</a>. 
    <p>user agent can track drawing changes to improve <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction③">getPrediction()</a></code> performance. Such change tracking can be achieved by marking strokes as "modified" when relevant methods are called. Change tracking enables user agent to perform incremental recognitions with a supported <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑧">handwriting recognizer</a>.</p>
    <p>For example, consider a drawing consists of three paragraphs of text, whose predictions from previous <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction④">getPrediction()</a></code> call is stored. The web application then adds a stroke to the third paragraph. With change tracking, the implementation will request <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer①⑨">handwriting recognizer</a> to make a new prediction about the strokes of the third paragraph (e.g. including strokes near the changed stroke), and merge this prediction with existing ones.</p>
   </div>
<pre class="example highlight" id="example-drawing"><a class="self-link" href="#example-drawing"></a><c- a>const</c-> handwritingStroke <c- o>=</c-> <c- ow>new</c-> HandwritingStroke<c- p>()</c->

<c- c1>// Add points to a stroke.</c->
handwritingStroke<c- p>.</c->addPoint<c- p>({</c-> x<c- o>:</c-> <c- mf>1</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>2</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>0</c-><c- p>});</c->
handwritingStroke<c- p>.</c->addPoint<c- p>({</c-> x<c- o>:</c-> <c- mf>7</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>6</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>33</c-><c- p>});</c->

<c- c1>// Retrieve points of this stroke.</c->
<c- c1>// Returns a copy of all the points, modifying the returned points</c->
<c- c1>// has no effect.</c->
<c- a>const</c-> points <c- o>=</c-> handwritingStroke<c- p>.</c->getPoints<c- p>();</c->

<c- p>[</c-> <c- p>{</c-> x<c- o>:</c-> <c- mf>1</c-><c- o>:</c-><c- p>,</c-> t<c- o>:</c-><c- mf>2</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>0</c-> <c- p>},</c-> <c- p>{</c-> x<c- o>:</c-> <c- mf>7</c-><c- p>,</c-> y<c- o>:</c-> <c- mf>6</c-><c- p>,</c-> t<c- o>:</c-> <c- mf>33</c-><c- p>}</c-> <c- p>];</c->

<c- c1>// Delete all points in a stroke.</c->
handwritingStroke<c- p>.</c->clear<c- p>();</c->

<c- c1>// Add a stroke to the drawing.</c->
drawing<c- p>.</c->addStroke<c- p>(</c->handwritingStroke<c- p>);</c->

<c- c1>// Get all strokes of the drawing.</c->
<c- c1>// Returns a list of \`HandwritingStroke\` in the drawing. Web applications can</c->
<c- c1>// modify the stroke. For example, calling HandwritingStroke.addPoint().</c->
drawing<c- p>.</c->getStrokes<c- p>();</c->

<c- p>[</c-> HandwritingStroke<c- p>,</c-> <c- d>/* ... */</c-> <c- p>]</c->

<c- c1>// Delete a stroke from the drawing.</c->
drawing<c- p>.</c->removeStroke<c- p>(</c->handwritingStroke<c- p>);</c->

<c- c1>// Delete all strokes from the drawing.</c->
drawing<c- p>.</c->clear<c- p>();</c->
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingdrawing"><code><c- g>HandwritingDrawing</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="addStroke(stroke)" id="dom-handwritingdrawing-addstroke"><code><c- g>addStroke</c-></code></dfn>(<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke④"><c- n>HandwritingStroke</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing/addStroke(stroke)" data-dfn-type="argument" data-export id="dom-handwritingdrawing-addstroke-stroke-stroke"><code><c- g>stroke</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="removeStroke(stroke)" id="dom-handwritingdrawing-removestroke"><code><c- g>removeStroke</c-></code></dfn>(<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke⑤"><c- n>HandwritingStroke</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing/removeStroke(stroke)" data-dfn-type="argument" data-export id="dom-handwritingdrawing-removestroke-stroke-stroke"><code><c- g>stroke</c-></code></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="clear()" id="dom-handwritingdrawing-clear"><code><c- g>clear</c-></code></dfn>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingstroke" id="ref-for-handwritingstroke⑥"><c- n>HandwritingStroke</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="getStrokes()" id="dom-handwritingdrawing-getstrokes"><code><c- g>getStrokes</c-></code></dfn>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction"><c- n>HandwritingPrediction</c-></a>>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawing" data-dfn-type="method" data-export data-lt="getPrediction()" id="dom-handwritingdrawing-getprediction"><code><c- g>getPrediction</c-></code></dfn>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext④"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="handwritingstroke"><code><c- g>HandwritingStroke</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="constructor" data-export data-lt="HandwritingStroke()|constructor()" id="dom-handwritingstroke-handwritingstroke"><code><c- g>constructor</c-></code></dfn>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="addPoint(point)" id="dom-handwritingstroke-addpoint"><code><c- g>addPoint</c-></code></dfn>(<a data-link-type="idl-name" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke/addPoint(point)" data-dfn-type="argument" data-export id="dom-handwritingstroke-addpoint-point-point"><code><c- g>point</c-></code></dfn>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint①"><c- n>HandwritingPoint</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="getPoints()" id="dom-handwritingstroke-getpoints"><code><c- g>getPoints</c-></code></dfn>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingStroke" data-dfn-type="method" data-export data-lt="clear()" id="dom-handwritingstroke-clear"><code><c- g>clear</c-></code></dfn>();
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingpoint"><code><c- g>HandwritingPoint</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="double" id="dom-handwritingpoint-x"><code><c- g>x</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①"><c- b>double</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="double" id="dom-handwritingpoint-y"><code><c- g>y</c-></code></dfn>;

  // Optional. Number of milliseconds since a reference time point for a
  // drawing.
  <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPoint" data-dfn-type="dict-member" data-export data-type="DOMHighResTimeStamp" id="dom-handwritingpoint-t"><code><c- g>t</c-></code></dfn>;
};
</pre>
   <div class="domintro non-normative">
     If web application provides <code>t</code> in <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingpoint" id="ref-for-dictdef-handwritingpoint②">HandwritingPoint</a></code>, measure all of <code>t</code> values from a common starting point for a given <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①③">HandwritingDrawing</a></code>. 
    <p>For example, define <code>t === 0</code> to the time point when <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizer-startdrawing" id="ref-for-dom-handwritingrecognizer-startdrawing⑤">startDrawing()</a></code> is called. Or use <code>Date.now()</code> when the point is collected (e.g. when a <a href="https://www.w3.org/TR/touch-events/#the-touchmove-event"><code>touchmove</code></a> event occurred).</p>
   </div>
   <h3 class="heading settled" data-level="7.1" id="handwriting-stroke"><span class="secno">7.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑦">HandwritingStroke</a></code></span><a class="self-link" href="#handwriting-stroke"></a></h3>
    <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑧">HandwritingStroke</a></code> represents a <a data-link-type="dfn" href="#stroke" id="ref-for-stroke">stroke</a>. It stores the information necessary to recreate one such movement. 
   <p><code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke⑨">HandwritingStroke</a></code> has a <dfn class="dfn-paneled" data-dfn-for="HandwritingStroke" data-dfn-type="dfn" data-noexport id="handwritingstroke-points">Points</dfn> which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> that stores the <a data-link-type="dfn" href="#point" id="ref-for-point①">points</a> of this stroke. <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points">points</a> is initially empty.</p>
   <h4 class="heading settled" data-level="7.1.1" id="handwriting-stroke-constructor"><span class="secno">7.1.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-handwritingstroke" id="ref-for-dom-handwritingstroke-handwritingstroke">HandwritingStroke()</a></code></span><a class="self-link" href="#handwriting-stroke-constructor"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-stroke-constructor">
    <ol>
     <li data-md>
      <p>Create a new <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⓪">HandwritingStroke</a></code> object, let it be <var>result</var>.</p>
     <li data-md>
      <p>Set <var>result</var>’s <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points①">points</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="7.1.2" id="handwriting-stroke-add-point"><span class="secno">7.1.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-addpoint" id="ref-for-dom-handwritingstroke-addpoint">addPoint(point)</a></code></span><a class="self-link" href="#handwriting-stroke-add-point"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-stroke-add-point">
     This method adds a <a data-link-type="dfn" href="#point" id="ref-for-point②">point</a> to <code>this</code>, when invoked, do the following: 
    <ol>
     <li data-md>
      <p>If <var>point</var> doesn’t has a <code>x</code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw③">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var>.<code>x</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw④">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var> doesn’t has a <code>y</code> member, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑤">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var>.<code>y</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑥">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>If <var>point</var> has a <code>t</code> member, and <code>t</code> isn’t a number, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑦">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code> and abort.</p>
     <li data-md>
      <p>Let <var>p</var> be a new object,</p>
     <li data-md>
      <p>Set <var>p</var>.<code>x</code> to <var>point</var>.<code>x</code></p>
     <li data-md>
      <p>Set <var>p</var>.<code>y</code> to <var>point</var>.<code>y</code></p>
     <li data-md>
      <p>If <var>point</var> has a <code>t</code> member, set <var>p</var>.<code>t</code> to <var>point</var>.<code>t</code></p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>p</var> to <code>this</code>.<a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points②">points</a>.</p>
    </ol>
    <p>If <var>point</var> doesn’t have <code>t</code> member, The implementation shouldn’t interpolate or use a default numerical value. The implementation should reflect <var>point</var>.<code>t</code> isn’t set in <var>p</var>.<code>t</code>.</p>
    <p class="domintro non-normative"> Modifying <var>point</var> after calling <code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-addpoint" id="ref-for-dom-handwritingstroke-addpoint①">addPoint(point)</a></code> has no effect on the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①①">HandwritingStroke</a></code>. </p>
   </div>
   <h4 class="heading settled" data-level="7.1.3" id="handwriting-stroke-get-points"><span class="secno">7.1.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-getpoints" id="ref-for-dom-handwritingstroke-getpoints">getPoints()</a></code></span><a class="self-link" href="#handwriting-stroke-get-points"></a></h4>
   <p>This method returns points in this stroke.</p>
   <div class="algorithm" data-algorithm="handwriting-stroke-get-points">
     When this method is invoked: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points③">points</a> as <var>p</var></p>
      <ol>
       <li data-md>
        <p>Create a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object">object</a></code> as <var>pt</var></p>
       <li data-md>
        <p>Set <var>pt</var>.<code>x</code> member to <var>p</var>.<code>x</code></p>
       <li data-md>
        <p>Set <var>pt</var>.<code>y</code> member to <var>p</var>.<code>y</code></p>
       <li data-md>
        <p>If <var>p</var> has <code>t</code> member, set <var>pt</var>.<code>t</code> to <var>p</var>.t</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">Append</a> <var>pt</var> to <var>result</var></p>
      </ol>
     <li data-md>
      <p>Return <var>result</var></p>
    </ol>
   </div>
   <p class="note" role="note">A deep copy prevents modifications to the internal <a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points④">points</a>, and enables <a href="#change-tracking">change tracking</a>.</p>
   <p class="domintro non-normative"> Modifying the return value of <code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-getpoints" id="ref-for-dom-handwritingstroke-getpoints①">getPoints()</a></code> has no effect on the stroke. </p>
   <h4 class="heading settled algorithm" data-algorithm="stroke-clear" data-level="7.1.4" id="handwriting-stroke-clear"><span class="secno">7.1.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingstroke-clear" id="ref-for-dom-handwritingstroke-clear">clear()</a></code></span><a class="self-link" href="#handwriting-stroke-clear"></a></h4>
   <p>This method removes all points of this stroke, effectively making this stroke an empty one.</p>
   <div class="algorithm" data-algorithm="handwriting-stroke-clear">
     When this method is invoked, 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">Empty</a> <code>this</code>.<a data-link-type="dfn" href="#handwritingstroke-points" id="ref-for-handwritingstroke-points⑤">points</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="7.2" id="handwriting-drawing-stroke-methods"><span class="secno">7.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①④">HandwritingDrawing</a></code></span><a class="self-link" href="#handwriting-drawing-stroke-methods"></a></h3>
   <h4 class="heading settled" data-level="7.2.1" id="handwriting-drawing-add-stroke"><span class="secno">7.2.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-addstroke" id="ref-for-dom-handwritingdrawing-addstroke">addStroke(stroke)</a></code></span><a class="self-link" href="#handwriting-drawing-add-stroke"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-add-stroke">
    <ol>
     <li data-md>
      <p>If <var>stroke</var> isn’t an instance of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①②">HandwritingStroke</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑧">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">Append</a> a reference to <var>stroke</var> to <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes①">strokes</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="7.2.2" id="handwriting-drawing-remove-stroke"><span class="secno">7.2.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-removestroke" id="ref-for-dom-handwritingdrawing-removestroke">removeStroke(stroke)</a></code></span><a class="self-link" href="#handwriting-drawing-remove-stroke"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-remove-stroke">
    <ol>
     <li data-md>
      <p>If <var>stroke</var> isn’t an instance of <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①③">HandwritingStroke</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-throw" id="ref-for-dfn-throw⑨">throw</a> a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code> and abort.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> items <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes②">strokes</a> if the item is the same object as <var>stroke</var></p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="7.2.3" id="handwriting-drawing-get-strokes"><span class="secno">7.2.3. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getstrokes" id="ref-for-dom-handwritingdrawing-getstrokes">getStrokes()</a></code></span><a class="self-link" href="#handwriting-drawing-get-strokes"></a></h4>
   <p>This method returns a list of strokes in this drawing.</p>
   <div class="algorithm" data-algorithm="handwriting-drawing-get-strokes">
     When this method is invoked, 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a></p>
     <li data-md>
      <p>For each <a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes③">strokes</a> as <var>s</var></p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>s</var> to <var>result</var></p>
      </ol>
     <li data-md>
      <p>Return <var>result</var></p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="7.2.4" id="handwriting-drawing-clear"><span class="secno">7.2.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-clear" id="ref-for-dom-handwritingdrawing-clear">clear()</a></code></span><a class="self-link" href="#handwriting-drawing-clear"></a></h4>
   <div class="algorithm" data-algorithm="handwriting-drawing-clear">
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">Empty</a> <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes④">strokes</a>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="8" id="get-predictions-of-a-drawing"><span class="secno">8. </span><span class="content">Get predictions of a <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑤">HandwritingDrawing</a></code></span><a class="self-link" href="#get-predictions-of-a-drawing"></a></h2>
<pre class="example highlight" id="example-get-prediction"><a class="self-link" href="#example-get-prediction"></a><c- c1>// Get predictions for the strokes in this drawing.</c->
<c- a>const</c-> predictions <c- o>=</c-> <c- k>await</c-> drawing<c- p>.</c->getPrediction<c- p>();</c->

<c- c1>// \`predictions\` is a list of \`HandwritingPrediction\`s, whose attributes</c->
<c- c1>// depends on handwriting recognizer's capability, and align with model</c->
<c- c1>// descriptor returned in queryHandwritingRecognizer().</c->
<c- c1>//</c->
<c- c1>// For example, a \`recognizer\` supports textSegmentation.</c->
<c- p>[</c->
  <c- p>{</c->
    text<c- o>:</c-> <c- u>"hello"</c-><c- p>,</c->
    segmentationResult<c- o>:</c-> <c- p>[</c->
      <c- p>{</c->
        grapheme<c- o>:</c-> <c- u>"h"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"0"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"1"</c-><c- p>,</c->
        drawingSegments<c- o>:</c-> <c- p>[</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>1</c-><c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>0</c-><c- p>,</c-> endPointIndex<c- o>:</c-> <c- mf>32</c-> <c- p>},</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>2</c-> <c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>0</c-><c- p>,</c-> endPointIndex<c- o>::</c-> <c- mf>40</c-> <c- p>},</c->
        <c- p>]</c->
      <c- p>},</c->
      <c- p>{</c->
        grapheme<c- o>:</c-> <c- u>"2"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"1"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"2"</c-><c- p>,</c->
        drawingSegments<c- o>:</c-> <c- p>[</c->
          <c- p>{</c-> strokeIndex<c- o>:</c-> <c- mf>2</c-> <c- p>,</c-> beginPointIndex<c- o>:</c-> <c- mf>41</c-><c- p>,</c-> endPointIndex<c- o>::</c-> <c- mf>130</c-> <c- p>},</c->
        <c- p>]</c->
      <c- p>},</c->
      <c- c1>// ...</c->
    <c- p>]</c->
  <c- p>},</c->
  <c- p>{</c->
    text<c- o>:</c-> <c- u>"he11o"</c-><c- p>,</c->
    segmentationResult<c- o>:</c-> <c- p>[</c-> <c- d>/* ... */</c-> <c- p>]</c->
  <c- p>},</c->
  <c- c1>// Up to a total of \`alternatives\` predictions, if provided in startDrawing().</c->
<c- p>];</c->
</pre>
   <h3 class="heading settled" data-level="8.1" id="handwriting-drawing-get-prediction"><span class="secno">8.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑤">getPrediction()</a></code></span><a class="self-link" href="#handwriting-drawing-get-prediction"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑥">getPrediction()</a></code> methods returns a list of predictions of <code>this</code> drawing, and their metadata.</p>
   <p>The predictions are ordered in decreasing confidence. If non-empty, the first prediction should be the most likely result.</p>
   <p>If the handwriting recognizer wasn’t able to recognize anything, <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑦">getPrediction()</a></code> should resolve with an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑥">list</a>.</p>
   <p class="note" role="note"> The user agent might perform <a href="#change-tracking">change tracking</a> and perform incremental recognition to improve performance. </p>
   <div class="algorithm" data-algorithm="handwriting-drawing-get-prediction">
     When <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑧">getPrediction()</a></code> is invoked: 
    <ol>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-recognizer" id="ref-for-handwritingdrawing-recognizer①">recognizer</a>.<a data-link-type="dfn" href="#handwritingrecognizer-active" id="ref-for-handwritingrecognizer-active⑧">active</a> isn’t true, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#invalidstateerror" id="ref-for-invalidstateerror①">"InvalidStateError"</a></code> <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>.</p>
     <li data-md>
      <p>If <code>this</code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes⑤">strokes</a> is empty, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> a new empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑦">list</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format④">Convert <code>this</code> drawing into a format suitable</a> for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②⓪">handwriting recognizer</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be a new Promise, run the following step <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a></p>
      <ol>
       <li data-md>
        <p>Send the converted drawing to <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②①">handwriting recognizer</a>.</p>
       <li data-md>
        <p>Wait for <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②②">handwriting recognizer</a> to return its predictions.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="#queues-a-handwriting-recognition-api-task" id="ref-for-queues-a-handwriting-recognition-api-task">Queue a Handwriting Recognition API task</a> to perform the following steps:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be a list.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> returned prediction <var>pred</var>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="#convert-data-format" id="ref-for-convert-data-format⑤">Convert <var>pred</var> into</a> <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction①">HandwritingPrediction</a></code> <var>idl_pred</var>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">Append</a> <var>idl_pred</var> to <var>result</var>.</p>
          </ol>
         <li data-md>
          <p>Resolve <var>p</var> with <var>result</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>p</var></p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="8.2" id="handwriting-prediction"><span class="secno">8.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction②">HandwritingPrediction</a></code> attributes</span><a class="self-link" href="#handwriting-prediction"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingprediction" id="ref-for-dictdef-handwritingprediction③">HandwritingPrediction</a></code> represents a prediction result from <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②③">handwriting recognizer</a>.</p>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingprediction"><code><c- g>HandwritingPrediction</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPrediction" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-handwritingprediction-text"><code><c- g>text</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment"><c- n>HandwritingSegment</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingPrediction" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingSegment>" id="dom-handwritingprediction-segmentationresult"><code><c- g>segmentationResult</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingsegment"><code><c- g>HandwritingSegment</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-handwritingsegment-grapheme"><code><c- g>grapheme</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritingsegment-beginindex"><code><c- g>beginIndex</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritingsegment-endindex"><code><c- g>endIndex</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑦"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment"><c- n>HandwritingDrawingSegment</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingSegment" data-dfn-type="dict-member" data-export data-type="sequence<HandwritingDrawingSegment>" id="dom-handwritingsegment-drawingsegments"><code><c- g>drawingSegments</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-handwritingdrawingsegment"><code><c- g>HandwritingDrawingSegment</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long③"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritingdrawingsegment-strokeindex"><code><c- g>strokeIndex</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long④"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritingdrawingsegment-beginpointindex"><code><c- g>beginPointIndex</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑤"><c- b>unsigned</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HandwritingDrawingSegment" data-dfn-type="dict-member" data-export data-type="unsigned long" id="dom-handwritingdrawingsegment-endpointindex"><code><c- g>endPointIndex</c-></code></dfn>;
};
</pre>
   <dl>
    <dt><code>text</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥">DOMString</a></code> that represents the transcription of the drawing.
    <dt><code>segmentationResult</code>
    <dd>
     A list of <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment①">HandwritingSegment</a></code> that maps each recognized grapheme (a user-perceived character) to its composing strokes and points. 
     <p>If the <a data-link-type="dfn" href="#handwriting-recognizer" id="ref-for-handwriting-recognizer②④">handwriting recognizer</a> doesn’t support text <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation②">segmentation</a>, <code>null</code>.</p>
     <p class="domintro non-normative">Web applications can use <code class="idl"><a data-link-type="idl" href="#dom-handwritingrecognizerqueryresult-textsegmentation" id="ref-for-dom-handwritingrecognizerqueryresult-textsegmentation">textSegmentation</a></code> to check if this attribute will be null.</p>
   </dl>
   <h4 class="heading settled" data-level="8.2.1" id="handwriting-segment"><span class="secno">8.2.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment②">HandwritingSegment</a></code> attributes</span><a class="self-link" href="#handwriting-segment"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingsegment" id="ref-for-dictdef-handwritingsegment③">HandwritingSegment</a></code> describes about a single grapheme that’s <a data-link-type="dfn" href="#segmentation" id="ref-for-segmentation③">segmented</a> from the drawing.</p>
   <dl>
    <dt><code>grapheme</code>
    <dd>A <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦">DOMString</a></code> that represents grapheme.
    <dt><code>beginIndex</code>
    <dd>The index where this grapheme begins in <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text">text</a></code>. 
    <dt><code>endIndex</code>
    <dd> The index where this grapheme ends (where the next grapheme begins) in <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text①">text</a></code>. 
    <dt><code>drawingSegments</code>
    <dd> A list of <code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment①">HandwritingDrawingSegment</a></code> that describes the portion of the drawing that makes up of this grapheme. 
   </dl>
   <p>Slicing <code class="idl"><a data-link-type="idl" href="#dom-handwritingprediction-text" id="ref-for-dom-handwritingprediction-text②">text</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-beginindex" id="ref-for-dom-handwritingsegment-beginindex">beginIndex</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-endindex" id="ref-for-dom-handwritingsegment-endindex">endIndex</a></code> should result in <code class="idl"><a data-link-type="idl" href="#dom-handwritingsegment-grapheme" id="ref-for-dom-handwritingsegment-grapheme">grapheme</a></code>.</p>
<pre class="example highlight" id="grapheme-slicing"><a class="self-link" href="#grapheme-slicing"></a><c- c1>// Web applications can slice \`text\` using \`beginIndex\` and \`endIndex\`.</c->
<c- c1>// For example, a \`HandwritingPrediction\` for "घोषित" is:</c->

<c- a>const</c-> prediction <c- o>=</c-> <c- p>{</c->
  <c- c1>// UTF-16 code points: \u0918 \u094b \u0937 \u093f \u0924</c->
  <c- c1>// Graphemes: घो, षि, त</c->
  text<c- o>:</c-> <c- u>"घोषित"</c-><c- p>,</c->
  segmentationResult<c- o>:</c-> <c- p>[</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"घो"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"0"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"2"</c-> <c- p>},</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"षि"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"2"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"4"</c-> <c- p>},</c->
    <c- p>{</c-> grapheme<c- o>:</c-> <c- u>"त"</c-><c- p>,</c-> beginIndex<c- o>:</c-> <c- u>"4"</c-><c- p>,</c-> endIndex<c- o>:</c-> <c- u>"5"</c-> <c- p>},</c->
  <c- p>]</c->
<c- p>}</c->

<c- c1>// The followings are true:</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>0</c-><c- p>,</c-> <c- mf>1</c-><c- p>)</c-> <c- o>===</c-> <c- u>"घो"</c-><c- p>;</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>2</c-><c- p>,</c-> <c- mf>4</c-><c- p>)</c-> <c- o>===</c-> <c- u>"षि"</c-><c- p>;</c->
prediction<c- p>.</c->text<c- p>.</c->slice<c- p>(</c-><c- mf>4</c-><c- p>,</c-> <c- mf>5</c-><c- p>)</c-> <c- o>===</c-> <c- u>"त"</c-><c- p>;</c->

<c- c1>// Web applications can delete the 2nd grapheme (षि) by splicing.</c->
<c- a>const</c-> withoutSecondGrapheme <c- o>=</c-> <c- p>(</c->
  <c- p>[...</c->prediction<c- p>.</c->text<c- p>]</c->
    <c- p>.</c->splice<c- p>(</c->
      prediction<c- p>.</c->segmentationResult<c- p>[</c-><c- mf>1</c-><c- p>].</c->beginIndex<c- p>,</c->
      prediction<c- p>.</c->segmentationResult<c- p>[</c-><c- mf>1</c-><c- p>].</c->endIndex
    <c- p>)</c->
    <c- p>.</c->join<c- p>(</c-><c- t>''</c-><c- p>)</c->
<c- p>);</c->
<c- c1>// => "घोत"</c->
</pre>
   <h4 class="heading settled" data-level="8.2.2" id="handwriting-drawing-segment"><span class="secno">8.2.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment②">HandwritingDrawingSegment</a></code> attributes</span><a class="self-link" href="#handwriting-drawing-segment"></a></h4>
   <p><code class="idl"><a data-link-type="idl" href="#dictdef-handwritingdrawingsegment" id="ref-for-dictdef-handwritingdrawingsegment③">HandwritingDrawingSegment</a></code> describes a continuous segment of a <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①④">HandwritingStroke</a></code>.</p>
   <p>The attributes are based on the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⑤">HandwritingStroke</a></code> in the <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑥">HandwritingDrawing</a></code> when <code class="idl"><a data-link-type="idl" href="#dom-handwritingdrawing-getprediction" id="ref-for-dom-handwritingdrawing-getprediction⑨">getPrediction()</a></code> is called.</p>
   <dl>
    <dt><code>strokeIndex</code>
    <dd>The index of the <code class="idl"><a data-link-type="idl" href="#handwritingstroke" id="ref-for-handwritingstroke①⑥">HandwritingStroke</a></code> in <code class="idl"><a data-link-type="idl" href="#handwritingdrawing" id="ref-for-handwritingdrawing①⑦">HandwritingDrawing</a></code>.<a data-link-type="dfn" href="#handwritingdrawing-strokes" id="ref-for-handwritingdrawing-strokes⑥">strokes</a>. 
    <dt><code>beginIndex</code>
    <dd>The index where the drawing segment begins.
    <dt><code>endIndex</code>
    <dd>The index where the drawing segment ends (where the next drawing segment begins).
   </dl>
   <h2 class="heading settled" data-level="9" id="privacy consideration"><span class="secno">9. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy%20consideration"></a></h2>
    <em>This section is non-normative.</em> 
   <p>The fingerprint vector comes from two parts: feature detection and recognizer implementation.</p>
   <p>The amount of information (entropy) exposed depends on user agent’s implementation. We believe there isn’t a one-size-fits-all solution, and recommend the user agents decide whether privacy protections (e.g. permission prompts) are necessary for their users.</p>
   <p><strong>Feature detection</strong> could expose information about:</p>
   <ul>
    <li data-md>
     <p>User’s language choices (or installed handwriting recognition models). This is also available in <code>navigator.languages</code>.</p>
    <li data-md>
     <p>The recognizer implementation being used, by summarizing the set of supported features. This might lead to some conclusions about the operating system and its version.</p>
   </ul>
   <p>Fingerprinting can be mitigated with:</p>
   <ul>
    <li data-md>
     <p><a href="https://github.com/bslassey/privacy-budget">Privacy budget</a>: the user agent rejects promises, if the website issues excessive queries.</p>
    <li data-md>
     <p>Permission prompts: the user agent asks user to grant unrestricted handwriting recognition features.</p>
    <li data-md>
     <p>Hardcoded values: the user agent returns hard-coded values for query operations, if it’s possible to determine languages and features at build time.</p>
   </ul>
   <p><strong>Recognizer implementation</strong> might expose information about the operating system, the device, or the user’s habit. This largely depends on the recognizer technology being used.</p>
   <p>Below are some types of recognizer implementations, and their associated risks:</p>
   <ul>
    <li data-md>
     <p>No recognizer support: No fingerprint risk.</p>
    <li data-md>
     <p>Cloud-based recognizer: Little to no risk. The website might be able to detect the cloud service being used (by comparing the prediction result against the result obtained by calling the cloud service directly). No extra information is revealed about the user or their device.</p>
    <li data-md>
     <p>Stateless models (most common): Output of such models is entirely dependent on the input drawing and the model itself.</p>
     <ul>
      <li data-md>
       <p>Models that can only updated with the browser (e.g. entirely implemented within the browser): The website can learn about the browser’s version, which can otherwise be detected by other means.</p>
      <li data-md>
       <p>Models that can be updated outside of browser (e.g. implemented by calling an operating system API), depending on the scenario, the website can learn:</p>
       <ul>
        <li data-md>
         <p>OS version, if the models are updated along with every OS update.</p>
        <li data-md>
         <p>OS version range, if the models are updated with some but not all OS updates.</p>
        <li data-md>
         <p>A specific update patch revision, if the models are updated out-of-band or on-demand.</p>
       </ul>
      <li data-md>
       <p>If the models utilizes hardware accelerators (e.g. GPU). The result might reveal information about particular hardwares.</p>
     </ul>
    <li data-md>
     <p>Stateful / Online learning models (worst hypothetical case): These models can learn based on the previous usages. For example, an OS recognizer that adjusts its output based on user’s IME habits. These models can reveal large amount of information about the user, and poses a huge risk.</p>
   </ul>
   <p>However, we aren’t aware of any recognizer implementations that falls within this type. But we recommend using privacy protection for these models, or use a fresh / clean state for each session.</p>
   <p><strong>Cost of fingerprinting</strong>: the fingerprinting solution need to craft and curate a set of handwriting drawings (adversarial samples) to exploit differences across models. The cost of generating these samples may be high, but it’s safe to assume a motivated party can obtain such samples.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#handwritingrecognizer-active">active</a><span>, in § 6.1</span>
   <li><a href="#dom-handwritingstroke-addpoint">addPoint(point)</a><span>, in § 7</span>
   <li><a href="#dom-handwritingdrawing-addstroke">addStroke(stroke)</a><span>, in § 7</span>
   <li>
    alternatives
    <ul>
     <li><a href="#dom-handwritinghints-alternatives">dict-member for HandwritingHints</a><span>, in § 6.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-alternatives">dict-member for HandwritingHintsQueryResult</a><span>, in § 4</span>
    </ul>
   <li><a href="#dom-handwritingsegment-beginindex">beginIndex</a><span>, in § 8.2</span>
   <li><a href="#dom-handwritingdrawingsegment-beginpointindex">beginPointIndex</a><span>, in § 8.2</span>
   <li>
    clear()
    <ul>
     <li><a href="#dom-handwritingdrawing-clear">method for HandwritingDrawing</a><span>, in § 7</span>
     <li><a href="#dom-handwritingstroke-clear">method for HandwritingStroke</a><span>, in § 7</span>
    </ul>
   <li><a href="#dom-handwritingstroke-handwritingstroke">constructor()</a><span>, in § 7</span>
   <li><a href="#convert-data-format">convert</a><span>, in § 2</span>
   <li>
    createHandwritingRecognizer(constraint)
    <ul>
     <li><a href="#createhandwritingrecognizer-constraint">definition of</a><span>, in § 5.1</span>
     <li><a href="#dom-navigator-createhandwritingrecognizer">method for Navigator</a><span>, in § 5</span>
    </ul>
   <li><a href="#drawing">drawing</a><span>, in § 2</span>
   <li><a href="#dom-handwritingsegment-drawingsegments">drawingSegments</a><span>, in § 8.2</span>
   <li><a href="#dom-handwritingsegment-endindex">endIndex</a><span>, in § 8.2</span>
   <li><a href="#dom-handwritingdrawingsegment-endpointindex">endPointIndex</a><span>, in § 8.2</span>
   <li>
    finish()
    <ul>
     <li><a href="#finish">definition of</a><span>, in § 6.3</span>
     <li><a href="#dom-handwritingrecognizer-finish">method for HandwritingRecognizer</a><span>, in § 6.1</span>
    </ul>
   <li><a href="#dom-handwritingstroke-getpoints">getPoints()</a><span>, in § 7</span>
   <li><a href="#dom-handwritingdrawing-getprediction">getPrediction()</a><span>, in § 7</span>
   <li><a href="#dom-handwritingdrawing-getstrokes">getStrokes()</a><span>, in § 7</span>
   <li><a href="#dom-handwritingsegment-grapheme">grapheme</a><span>, in § 8.2</span>
   <li><a href="#handwritingdrawing">HandwritingDrawing</a><span>, in § 7</span>
   <li><a href="#dictdef-handwritingdrawingsegment">HandwritingDrawingSegment</a><span>, in § 8.2</span>
   <li><a href="#dictdef-handwritinghints">HandwritingHints</a><span>, in § 6.1</span>
   <li><a href="#dictdef-handwritinghintsqueryresult">HandwritingHintsQueryResult</a><span>, in § 4</span>
   <li><a href="#enumdef-handwritinginputtype">HandwritingInputType</a><span>, in § 4</span>
   <li><a href="#dictdef-handwritingmodelconstraint">HandwritingModelConstraint</a><span>, in § 4</span>
   <li><a href="#dictdef-handwritingpoint">HandwritingPoint</a><span>, in § 7</span>
   <li><a href="#dictdef-handwritingprediction">HandwritingPrediction</a><span>, in § 8.2</span>
   <li><a href="#handwriting-recognition-task-source">handwriting recognition task source</a><span>, in § 3</span>
   <li><a href="#enumdef-handwritingrecognitiontype">HandwritingRecognitionType</a><span>, in § 4</span>
   <li><a href="#handwriting-recognizer">handwriting recognizer</a><span>, in § 2</span>
   <li><a href="#handwritingrecognizer">HandwritingRecognizer</a><span>, in § 6.1</span>
   <li><a href="#dictdef-handwritingrecognizerqueryresult">HandwritingRecognizerQueryResult</a><span>, in § 4</span>
   <li><a href="#dictdef-handwritingsegment">HandwritingSegment</a><span>, in § 8.2</span>
   <li><a href="#handwritingstroke">HandwritingStroke</a><span>, in § 7</span>
   <li><a href="#dom-handwritingstroke-handwritingstroke">HandwritingStroke()</a><span>, in § 7</span>
   <li><a href="#dom-handwritingrecognizerqueryresult-hints">hints</a><span>, in § 4</span>
   <li>
    inputType
    <ul>
     <li><a href="#dom-handwritinghints-inputtype">dict-member for HandwritingHints</a><span>, in § 6.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-inputtype">dict-member for HandwritingHintsQueryResult</a><span>, in § 4</span>
    </ul>
   <li><a href="#dom-handwritingmodelconstraint-languages">languages</a><span>, in § 4</span>
   <li><a href="#dom-handwritinginputtype-mouse">"mouse"</a><span>, in § 4</span>
   <li><a href="#dom-handwritingrecognitiontype-per-character">"per-character"</a><span>, in § 4</span>
   <li><a href="#point">point</a><span>, in § 2</span>
   <li><a href="#handwritingstroke-points">Points</a><span>, in § 7.1</span>
   <li>
    queryHandwritingRecognizer(constraint)
    <ul>
     <li><a href="#queryhandwritingrecognizer-constraint">definition of</a><span>, in § 4.1</span>
     <li><a href="#dom-navigator-queryhandwritingrecognizer">method for Navigator</a><span>, in § 4</span>
    </ul>
   <li><a href="#queues-a-handwriting-recognition-api-task">queues a Handwriting Recognition API task</a><span>, in § 3</span>
   <li>
    recognitionType
    <ul>
     <li><a href="#dom-handwritinghints-recognitiontype">dict-member for HandwritingHints</a><span>, in § 6.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-recognitiontype">dict-member for HandwritingHintsQueryResult</a><span>, in § 4</span>
    </ul>
   <li><a href="#handwritingdrawing-recognizer">recognizer</a><span>, in § 6.2</span>
   <li><a href="#dom-handwritingdrawing-removestroke">removeStroke(stroke)</a><span>, in § 7</span>
   <li><a href="#segmentation">Segmentation</a><span>, in § 2</span>
   <li><a href="#dom-handwritingprediction-segmentationresult">segmentationResult</a><span>, in § 8.2</span>
   <li><a href="#dom-handwritingrecognizer-startdrawing">startDrawing()</a><span>, in § 6.1</span>
   <li>
    startDrawing(hints)
    <ul>
     <li><a href="#startdrawing-hints">definition of</a><span>, in § 6.2</span>
     <li><a href="#dom-handwritingrecognizer-startdrawing">method for HandwritingRecognizer</a><span>, in § 6.1</span>
    </ul>
   <li><a href="#stroke">stroke</a><span>, in § 2</span>
   <li><a href="#dom-handwritingdrawingsegment-strokeindex">strokeIndex</a><span>, in § 8.2</span>
   <li><a href="#handwritingdrawing-strokes">strokes</a><span>, in § 6.2</span>
   <li><a href="#dom-handwritinginputtype-stylus">"stylus"</a><span>, in § 4</span>
   <li><a href="#dom-handwritingpoint-t">t</a><span>, in § 7</span>
   <li><a href="#dom-handwritingrecognitiontype-text">"text"</a><span>, in § 4</span>
   <li><a href="#dom-handwritingprediction-text">text</a><span>, in § 8.2</span>
   <li><a href="#dom-handwritingrecognizerqueryresult-textalternatives">textAlternatives</a><span>, in § 4</span>
   <li>
    textContext
    <ul>
     <li><a href="#dom-handwritinghints-textcontext">dict-member for HandwritingHints</a><span>, in § 6.1</span>
     <li><a href="#dom-handwritinghintsqueryresult-textcontext">dict-member for HandwritingHintsQueryResult</a><span>, in § 4</span>
    </ul>
   <li><a href="#dom-handwritingrecognizerqueryresult-textsegmentation">textSegmentation</a><span>, in § 4</span>
   <li><a href="#dom-handwritinginputtype-touch">"touch"</a><span>, in § 4</span>
   <li><a href="#transcription">transcription</a><span>, in § 2</span>
   <li><a href="#dom-handwritingpoint-x">x</a><span>, in § 7</span>
   <li><a href="#dom-handwritingpoint-y">y</a><span>, in § 7</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a5f015e3">realm</span>
     <li><span class="dfn-paneled" id="06137087">the current Realm Record</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0e9f636b">DOMHighResTimeStamp</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="be0c27b2">Navigator</span>
     <li><span class="dfn-paneled" id="4b6086d7">global object</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
     <li><span class="dfn-paneled" id="c3b2d08c">task source</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty</span>
     <li><span class="dfn-paneled" id="16d07e10">for each</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="99c988d6">remove</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="797018a7">InvalidStateError</span>
     <li><span class="dfn-paneled" id="3182eb71">NotSupportedError</span>
     <li><span class="dfn-paneled" id="34443090">OperationError</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="5e129c74">QuotaExceededError</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="81dd847b">UnknownError</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="8f5c2179">a promise resolved with</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="db82b00d">name</span>
     <li><span class="dfn-paneled" id="efd1ec5d">object</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="b4cfa5ce">throw</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
     <li><span class="dfn-paneled" id="e97a9688">unsigned long</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-bcp47">[BCP47]
   <dd>A. Phillips, Ed.; M. Davis, Ed.. <a href="https://www.rfc-editor.org/rfc/rfc5646"><cite>Tags for Identifying Languages</cite></a>. September 2009. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingrecognizerqueryresult"><c- n>HandwritingRecognizerQueryResult</c-></a>?>
      <a href="#dom-navigator-queryhandwritingrecognizer"><code><c- g>queryHandwritingRecognizer</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <a href="#dom-navigator-queryhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingmodelconstraint"><code><c- g>HandwritingModelConstraint</c-></code></a> {
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-handwritingmodelconstraint-languages"><code><c- g>languages</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingrecognizerqueryresult"><code><c- g>HandwritingRecognizerQueryResult</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-handwritingrecognizerqueryresult-textalternatives"><code><c- g>textAlternatives</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-handwritingrecognizerqueryresult-textsegmentation"><code><c- g>textSegmentation</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-handwritinghintsqueryresult"><c- n>HandwritingHintsQueryResult</c-></a> <a data-type="HandwritingHintsQueryResult" href="#dom-handwritingrecognizerqueryresult-hints"><code><c- g>hints</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritinghintsqueryresult"><code><c- g>HandwritingHintsQueryResult</c-></code></a> {
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritingrecognitiontype"><c- n>HandwritingRecognitionType</c-></a>> <a data-type="sequence<HandwritingRecognitionType>" href="#dom-handwritinghintsqueryresult-recognitiontype"><code><c- g>recognitionType</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-handwritinginputtype"><c- n>HandwritingInputType</c-></a>> <a data-type="sequence<HandwritingInputType>" href="#dom-handwritinghintsqueryresult-inputtype"><code><c- g>inputType</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-handwritinghintsqueryresult-textcontext"><code><c- g>textContext</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-handwritinghintsqueryresult-alternatives"><code><c- g>alternatives</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-handwritingrecognitiontype"><code><c- g>HandwritingRecognitionType</c-></code></a>{
  <a href="#dom-handwritingrecognitiontype-text"><code><c- s>"text"</c-></code></a>, <a href="#dom-handwritingrecognitiontype-per-character"><code><c- s>"per-character"</c-></code></a>
};

<c- b>enum</c-> <a href="#enumdef-handwritinginputtype"><code><c- g>HandwritingInputType</c-></code></a> {
  <a href="#dom-handwritinginputtype-mouse"><code><c- s>"mouse"</c-></code></a>, <a href="#dom-handwritinginputtype-stylus"><code><c- s>"stylus"</c-></code></a>, <a href="#dom-handwritinginputtype-touch"><code><c- s>"touch"</c-></code></a>
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/system-state.html#navigator"><c- g>Navigator</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingrecognizer"><c- n>HandwritingRecognizer</c-></a>>
      <a href="#dom-navigator-createhandwritingrecognizer"><code><c- g>createHandwritingRecognizer</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingmodelconstraint"><c- n>HandwritingModelConstraint</c-></a> <a href="#dom-navigator-createhandwritingrecognizer-constraint-constraint"><code><c- g>constraint</c-></code></a>);
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#handwritingrecognizer"><code><c- g>HandwritingRecognizer</c-></code></a> {
  <a data-link-type="idl-name" href="#handwritingdrawing"><c- n>HandwritingDrawing</c-></a> <a href="#dom-handwritingrecognizer-startdrawing"><code><c- g>startDrawing</c-></code></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-handwritinghints"><c- n>HandwritingHints</c-></a> <a href="#dom-handwritingrecognizer-startdrawing-hints-hints"><code><c- g>hints</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingrecognizer-finish"><code><c- g>finish</c-></code></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-handwritinghints"><code><c- g>HandwritingHints</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;text&quot;" data-type="DOMString" href="#dom-handwritinghints-recognitiontype"><code><c- g>recognitionType</c-></code></a> = "text";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-default="&quot;mouse&quot;" data-type="DOMString" href="#dom-handwritinghints-inputtype"><code><c- g>inputType</c-></code></a> = "mouse";
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-handwritinghints-textcontext"><code><c- g>textContext</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-default="3" data-type="unsigned long" href="#dom-handwritinghints-alternatives"><code><c- g>alternatives</c-></code></a> = 3;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#handwritingdrawing"><code><c- g>HandwritingDrawing</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-addstroke"><code><c- g>addStroke</c-></code></a>(<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a> <a href="#dom-handwritingdrawing-addstroke-stroke-stroke"><code><c- g>stroke</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-removestroke"><code><c- g>removeStroke</c-></code></a>(<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a> <a href="#dom-handwritingdrawing-removestroke-stroke-stroke"><code><c- g>stroke</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingdrawing-clear"><code><c- g>clear</c-></code></a>();
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#handwritingstroke"><c- n>HandwritingStroke</c-></a>> <a href="#dom-handwritingdrawing-getstrokes"><code><c- g>getStrokes</c-></code></a>();

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingprediction"><c- n>HandwritingPrediction</c-></a>>> <a href="#dom-handwritingdrawing-getprediction"><code><c- g>getPrediction</c-></code></a>();
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
<c- b>interface</c-> <a href="#handwritingstroke"><code><c- g>HandwritingStroke</c-></code></a> {
  <a href="#dom-handwritingstroke-handwritingstroke"><code><c- g>constructor</c-></code></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingstroke-addpoint"><code><c- g>addPoint</c-></code></a>(<a data-link-type="idl-name" href="#dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a> <a href="#dom-handwritingstroke-addpoint-point-point"><code><c- g>point</c-></code></a>);
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingpoint"><c- n>HandwritingPoint</c-></a>> <a href="#dom-handwritingstroke-getpoints"><code><c- g>getPoints</c-></code></a>();
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-handwritingstroke-clear"><code><c- g>clear</c-></code></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingpoint"><code><c- g>HandwritingPoint</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-handwritingpoint-x"><code><c- g>x</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a> <a data-type="double" href="#dom-handwritingpoint-y"><code><c- g>y</c-></code></a>;

  // Optional. Number of milliseconds since a reference time point for a
  // drawing.
  <a data-link-type="idl-name" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp"><c- n>DOMHighResTimeStamp</c-></a> <a data-type="DOMHighResTimeStamp" href="#dom-handwritingpoint-t"><code><c- g>t</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingprediction"><code><c- g>HandwritingPrediction</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-handwritingprediction-text"><code><c- g>text</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingsegment"><c- n>HandwritingSegment</c-></a>> <a data-type="sequence<HandwritingSegment>" href="#dom-handwritingprediction-segmentationresult"><code><c- g>segmentationResult</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingsegment"><code><c- g>HandwritingSegment</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-handwritingsegment-grapheme"><code><c- g>grapheme</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-handwritingsegment-beginindex"><code><c- g>beginIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-handwritingsegment-endindex"><code><c- g>endIndex</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-handwritingdrawingsegment"><c- n>HandwritingDrawingSegment</c-></a>> <a data-type="sequence<HandwritingDrawingSegment>" href="#dom-handwritingsegment-drawingsegments"><code><c- g>drawingSegments</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-handwritingdrawingsegment"><code><c- g>HandwritingDrawingSegment</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-handwritingdrawingsegment-strokeindex"><code><c- g>strokeIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-handwritingdrawingsegment-beginpointindex"><code><c- g>beginPointIndex</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a> <a data-type="unsigned long" href="#dom-handwritingdrawingsegment-endpointindex"><code><c- g>endPointIndex</c-></code></a>;
};

</pre>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"}],"title":"7.1.4. clear()"},{"refs":[{"id":"ref-for-list-empty\u2460"}],"title":"7.2.4. clear()"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"06137087": {"dfnID":"06137087","dfnText":"the current Realm Record","external":true,"refSections":[{"refs":[{"id":"ref-for-current-realm"},{"id":"ref-for-current-realm\u2460"}],"title":"3. API Idioms"}],"url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm"},
"0e9f636b": {"dfnID":"0e9f636b","dfnText":"DOMHighResTimeStamp","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-domhighrestimestamp"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://w3c.github.io/hr-time/#dom-domhighrestimestamp"},
"16d07e10": {"dfnID":"16d07e10","dfnText":"for each","external":true,"refSections":[{"refs":[{"id":"ref-for-list-iterate"}],"title":"8.1. getPrediction()"}],"url":"https://infra.spec.whatwg.org/#list-iterate"},
"3182eb71": {"dfnID":"3182eb71","dfnText":"NotSupportedError","external":true,"refSections":[{"refs":[{"id":"ref-for-notsupportederror"},{"id":"ref-for-notsupportederror\u2460"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#notsupportederror"},
"34443090": {"dfnID":"34443090","dfnText":"OperationError","external":true,"refSections":[{"refs":[{"id":"ref-for-operationerror"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#operationerror"},
"3b90bdcd": {"dfnID":"3b90bdcd","dfnText":"resolve","external":true,"refSections":[{"refs":[{"id":"ref-for-resolve"},{"id":"ref-for-resolve\u2460"},{"id":"ref-for-resolve\u2461"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-resolve\u2462"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#resolve"},
"48438eb3": {"dfnID":"48438eb3","dfnText":"queue a global task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-global-task"}],"title":"3. API Idioms"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"4b6086d7": {"dfnID":"4b6086d7","dfnText":"global object","external":true,"refSections":[{"refs":[{"id":"ref-for-global-object"}],"title":"3. API Idioms"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#global-object"},
"53275e46": {"dfnID":"53275e46","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"}],"title":"7.1.2. addPoint(point)"},{"refs":[{"id":"ref-for-list-append\u2460"}],"title":"7.1.3. getPoints()"},{"refs":[{"id":"ref-for-list-append\u2461"}],"title":"7.2.1. addStroke(stroke)"},{"refs":[{"id":"ref-for-list-append\u2462"}],"title":"7.2.3. getStrokes()"},{"refs":[{"id":"ref-for-list-append\u2463"}],"title":"8.1. getPrediction()"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"},{"id":"ref-for-idl-boolean\u2462"}],"title":"4. Feature Query"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"5e129c74": {"dfnID":"5e129c74","dfnText":"QuotaExceededError","external":true,"refSections":[{"refs":[{"id":"ref-for-quotaexceedederror"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#quotaexceedederror"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"},{"id":"ref-for-idl-undefined\u2463"},{"id":"ref-for-idl-undefined\u2464"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"},{"id":"ref-for-list\u2460"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-list\u2461"}],"title":"7.1. HandwritingStroke"},{"refs":[{"id":"ref-for-list\u2462"}],"title":"7.1.1. HandwritingStroke()"},{"refs":[{"id":"ref-for-list\u2463"}],"title":"7.1.3. getPoints()"},{"refs":[{"id":"ref-for-list\u2464"}],"title":"7.2.3. getStrokes()"},{"refs":[{"id":"ref-for-list\u2465"},{"id":"ref-for-list\u2466"}],"title":"8.1. getPrediction()"}],"url":"https://infra.spec.whatwg.org/#list"},
"797018a7": {"dfnID":"797018a7","dfnText":"InvalidStateError","external":true,"refSections":[{"refs":[{"id":"ref-for-invalidstateerror"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-invalidstateerror\u2460"}],"title":"8.1. getPrediction()"}],"url":"https://webidl.spec.whatwg.org/#invalidstateerror"},
"81dd847b": {"dfnID":"81dd847b","dfnText":"UnknownError","external":true,"refSections":[{"refs":[{"id":"ref-for-unknownerror"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#unknownerror"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2460"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2465"}],"title":"7.1.2. addPoint(point)"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2466"}],"title":"7.2.1. addStroke(stroke)"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2467"}],"title":"7.2.2. removeStroke(stroke)"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"}],"title":"8.2. HandwritingPrediction attributes"},{"refs":[{"id":"ref-for-idl-DOMString\u2466"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-Exposed\u2460"},{"id":"ref-for-Exposed\u2461"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8c800cdf": {"dfnID":"8c800cdf","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"},{"id":"ref-for-idl-double\u2460"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://webidl.spec.whatwg.org/#idl-double"},
"8f5c2179": {"dfnID":"8f5c2179","dfnText":"a promise resolved with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-resolved-with"}],"title":"8.1. getPrediction()"}],"url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"}],"title":"7.2.2. removeStroke(stroke)"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-idl-sequence\u2462"},{"id":"ref-for-idl-sequence\u2463"},{"id":"ref-for-idl-sequence\u2464"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-idl-sequence\u2465"},{"id":"ref-for-idl-sequence\u2466"}],"title":"8.2. HandwritingPrediction attributes"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"a5f015e3": {"dfnID":"a5f015e3","dfnText":"realm","external":true,"refSections":[{"refs":[{"id":"ref-for-realm"}],"title":"3. API Idioms"}],"url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-in-parallel\u2460"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-in-parallel\u2461"}],"title":"8.1. getPrediction()"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"b262501e": {"dfnID":"b262501e","dfnText":"reject","external":true,"refSections":[{"refs":[{"id":"ref-for-reject"},{"id":"ref-for-reject\u2460"},{"id":"ref-for-reject\u2461"},{"id":"ref-for-reject\u2462"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#reject"},
"b4cfa5ce": {"dfnID":"b4cfa5ce","dfnText":"throw","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-throw"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dfn-throw\u2460"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-dfn-throw\u2461"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-dfn-throw\u2462"},{"id":"ref-for-dfn-throw\u2463"},{"id":"ref-for-dfn-throw\u2464"},{"id":"ref-for-dfn-throw\u2465"},{"id":"ref-for-dfn-throw\u2466"}],"title":"7.1.2. addPoint(point)"},{"refs":[{"id":"ref-for-dfn-throw\u2467"}],"title":"7.2.1. addStroke(stroke)"},{"refs":[{"id":"ref-for-dfn-throw\u2468"}],"title":"7.2.2. removeStroke(stroke)"}],"url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"b75bb3bd": {"dfnID":"b75bb3bd","dfnText":"SecureContext","external":true,"refSections":[{"refs":[{"id":"ref-for-SecureContext"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-SecureContext\u2460"}],"title":"5. Create a handwriting recognizer"},{"refs":[{"id":"ref-for-SecureContext\u2461"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-SecureContext\u2462"},{"id":"ref-for-SecureContext\u2463"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://webidl.spec.whatwg.org/#SecureContext"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-idl-promise\u2460"}],"title":"5. Create a handwriting recognizer"},{"refs":[{"id":"ref-for-idl-promise\u2461"}],"title":"7. Build a HandwritingDrawing"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"be0c27b2": {"dfnID":"be0c27b2","dfnText":"Navigator","external":true,"refSections":[{"refs":[{"id":"ref-for-navigator"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-navigator\u2460"}],"title":"5. Create a handwriting recognizer"}],"url":"https://html.spec.whatwg.org/multipage/system-state.html#navigator"},
"c3b2d08c": {"dfnID":"c3b2d08c","dfnText":"task source","external":true,"refSections":[{"refs":[{"id":"ref-for-task-source"}],"title":"3. API Idioms"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#task-source"},
"convert-data-format": {"dfnID":"convert-data-format","dfnText":"convert","external":false,"refSections":[{"refs":[{"id":"ref-for-convert-data-format"},{"id":"ref-for-convert-data-format\u2460"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-convert-data-format\u2461"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-convert-data-format\u2462"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-convert-data-format\u2463"},{"id":"ref-for-convert-data-format\u2464"}],"title":"8.1. getPrediction()"}],"url":"#convert-data-format"},
"createhandwritingrecognizer-constraint": {"dfnID":"createhandwritingrecognizer-constraint","dfnText":"createHandwritingRecognizer(constraint)","external":false,"refSections":[],"url":"#createhandwritingrecognizer-constraint"},
"d0b4a948": {"dfnID":"d0b4a948","dfnText":"a promise rejected with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with"}],"title":"8.1. getPrediction()"}],"url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"dacde8b5": {"dfnID":"dacde8b5","dfnText":"a new promise","external":true,"refSections":[{"refs":[{"id":"ref-for-a-new-promise"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-a-new-promise\u2460"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"db82b00d": {"dfnID":"db82b00d","dfnText":"name","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-domexception-name"},{"id":"ref-for-dom-domexception-name\u2460"},{"id":"ref-for-dom-domexception-name\u2461"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-dom-domexception-name\u2462"}],"title":"6.2. startDrawing(hints)"}],"url":"https://webidl.spec.whatwg.org/#dom-domexception-name"},
"dca2de17": {"dfnID":"dca2de17","dfnText":"DOMException","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMException"},{"id":"ref-for-idl-DOMException\u2460"},{"id":"ref-for-idl-DOMException\u2461"},{"id":"ref-for-idl-DOMException\u2462"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-idl-DOMException\u2463"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-idl-DOMException\u2464"}],"title":"8.1. getPrediction()"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"dictdef-handwritingdrawingsegment": {"dfnID":"dictdef-handwritingdrawingsegment","dfnText":"HandwritingDrawingSegment","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingdrawingsegment"}],"title":"8.2. HandwritingPrediction attributes"},{"refs":[{"id":"ref-for-dictdef-handwritingdrawingsegment\u2460"}],"title":"8.2.1. HandwritingSegment attributes"},{"refs":[{"id":"ref-for-dictdef-handwritingdrawingsegment\u2461"},{"id":"ref-for-dictdef-handwritingdrawingsegment\u2462"}],"title":"8.2.2. HandwritingDrawingSegment attributes"}],"url":"#dictdef-handwritingdrawingsegment"},
"dictdef-handwritinghints": {"dfnID":"dictdef-handwritinghints","dfnText":"HandwritingHints","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritinghints"}],"title":"6.1. HandwritingRecognizer object "}],"url":"#dictdef-handwritinghints"},
"dictdef-handwritinghintsqueryresult": {"dfnID":"dictdef-handwritinghintsqueryresult","dfnText":"HandwritingHintsQueryResult","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritinghintsqueryresult"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-dictdef-handwritinghintsqueryresult\u2460"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dictdef-handwritinghintsqueryresult\u2461"}],"title":"4.3. HandwritingRecognizerQueryResult attributes "},{"refs":[{"id":"ref-for-dictdef-handwritinghintsqueryresult\u2462"}],"title":"4.3.1. HandwritingHintsQueryResult attributes "}],"url":"#dictdef-handwritinghintsqueryresult"},
"dictdef-handwritingmodelconstraint": {"dfnID":"dictdef-handwritingmodelconstraint","dfnText":"HandwritingModelConstraint","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingmodelconstraint"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-dictdef-handwritingmodelconstraint\u2460"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dictdef-handwritingmodelconstraint\u2461"}],"title":"4.2. HandwritingModelConstraint attributes"},{"refs":[{"id":"ref-for-dictdef-handwritingmodelconstraint\u2462"}],"title":"5. Create a handwriting recognizer"},{"refs":[{"id":"ref-for-dictdef-handwritingmodelconstraint\u2463"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"#dictdef-handwritingmodelconstraint"},
"dictdef-handwritingpoint": {"dfnID":"dictdef-handwritingpoint","dfnText":"HandwritingPoint","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingpoint"},{"id":"ref-for-dictdef-handwritingpoint\u2460"},{"id":"ref-for-dictdef-handwritingpoint\u2461"}],"title":"7. Build a HandwritingDrawing"}],"url":"#dictdef-handwritingpoint"},
"dictdef-handwritingprediction": {"dfnID":"dictdef-handwritingprediction","dfnText":"HandwritingPrediction","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingprediction"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-dictdef-handwritingprediction\u2460"}],"title":"8.1. getPrediction()"},{"refs":[{"id":"ref-for-dictdef-handwritingprediction\u2461"},{"id":"ref-for-dictdef-handwritingprediction\u2462"}],"title":"8.2. HandwritingPrediction attributes"}],"url":"#dictdef-handwritingprediction"},
"dictdef-handwritingrecognizerqueryresult": {"dfnID":"dictdef-handwritingrecognizerqueryresult","dfnText":"HandwritingRecognizerQueryResult","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingrecognizerqueryresult"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-dictdef-handwritingrecognizerqueryresult\u2460"},{"id":"ref-for-dictdef-handwritingrecognizerqueryresult\u2461"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dictdef-handwritingrecognizerqueryresult\u2462"}],"title":"4.3. HandwritingRecognizerQueryResult attributes "}],"url":"#dictdef-handwritingrecognizerqueryresult"},
"dictdef-handwritingsegment": {"dfnID":"dictdef-handwritingsegment","dfnText":"HandwritingSegment","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-handwritingsegment"},{"id":"ref-for-dictdef-handwritingsegment\u2460"}],"title":"8.2. HandwritingPrediction attributes"},{"refs":[{"id":"ref-for-dictdef-handwritingsegment\u2461"},{"id":"ref-for-dictdef-handwritingsegment\u2462"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#dictdef-handwritingsegment"},
"dom-handwritingdrawing-addstroke": {"dfnID":"dom-handwritingdrawing-addstroke","dfnText":"addStroke","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingdrawing-addstroke"}],"title":"7.2.1. addStroke(stroke)"}],"url":"#dom-handwritingdrawing-addstroke"},
"dom-handwritingdrawing-addstroke-stroke-stroke": {"dfnID":"dom-handwritingdrawing-addstroke-stroke-stroke","dfnText":"stroke","external":false,"refSections":[],"url":"#dom-handwritingdrawing-addstroke-stroke-stroke"},
"dom-handwritingdrawing-clear": {"dfnID":"dom-handwritingdrawing-clear","dfnText":"clear","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingdrawing-clear"}],"title":"7.2.4. clear()"}],"url":"#dom-handwritingdrawing-clear"},
"dom-handwritingdrawing-getprediction": {"dfnID":"dom-handwritingdrawing-getprediction","dfnText":"getPrediction","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingdrawing-getprediction"}],"title":"4.3.1. HandwritingHintsQueryResult attributes "},{"refs":[{"id":"ref-for-dom-handwritingdrawing-getprediction\u2460"}],"title":"6.3. finish()"},{"refs":[{"id":"ref-for-dom-handwritingdrawing-getprediction\u2461"},{"id":"ref-for-dom-handwritingdrawing-getprediction\u2462"},{"id":"ref-for-dom-handwritingdrawing-getprediction\u2463"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-dom-handwritingdrawing-getprediction\u2464"},{"id":"ref-for-dom-handwritingdrawing-getprediction\u2465"},{"id":"ref-for-dom-handwritingdrawing-getprediction\u2466"},{"id":"ref-for-dom-handwritingdrawing-getprediction\u2467"}],"title":"8.1. getPrediction()"},{"refs":[{"id":"ref-for-dom-handwritingdrawing-getprediction\u2468"}],"title":"8.2.2. HandwritingDrawingSegment attributes"}],"url":"#dom-handwritingdrawing-getprediction"},
"dom-handwritingdrawing-getstrokes": {"dfnID":"dom-handwritingdrawing-getstrokes","dfnText":"getStrokes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingdrawing-getstrokes"}],"title":"7.2.3. getStrokes()"}],"url":"#dom-handwritingdrawing-getstrokes"},
"dom-handwritingdrawing-removestroke": {"dfnID":"dom-handwritingdrawing-removestroke","dfnText":"removeStroke","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingdrawing-removestroke"}],"title":"7.2.2. removeStroke(stroke)"}],"url":"#dom-handwritingdrawing-removestroke"},
"dom-handwritingdrawing-removestroke-stroke-stroke": {"dfnID":"dom-handwritingdrawing-removestroke-stroke-stroke","dfnText":"stroke","external":false,"refSections":[],"url":"#dom-handwritingdrawing-removestroke-stroke-stroke"},
"dom-handwritingdrawingsegment-beginpointindex": {"dfnID":"dom-handwritingdrawingsegment-beginpointindex","dfnText":"beginPointIndex","external":false,"refSections":[],"url":"#dom-handwritingdrawingsegment-beginpointindex"},
"dom-handwritingdrawingsegment-endpointindex": {"dfnID":"dom-handwritingdrawingsegment-endpointindex","dfnText":"endPointIndex","external":false,"refSections":[],"url":"#dom-handwritingdrawingsegment-endpointindex"},
"dom-handwritingdrawingsegment-strokeindex": {"dfnID":"dom-handwritingdrawingsegment-strokeindex","dfnText":"strokeIndex","external":false,"refSections":[],"url":"#dom-handwritingdrawingsegment-strokeindex"},
"dom-handwritinghints-alternatives": {"dfnID":"dom-handwritinghints-alternatives","dfnText":"alternatives","external":false,"refSections":[],"url":"#dom-handwritinghints-alternatives"},
"dom-handwritinghints-inputtype": {"dfnID":"dom-handwritinghints-inputtype","dfnText":"inputType","external":false,"refSections":[],"url":"#dom-handwritinghints-inputtype"},
"dom-handwritinghints-recognitiontype": {"dfnID":"dom-handwritinghints-recognitiontype","dfnText":"recognitionType","external":false,"refSections":[],"url":"#dom-handwritinghints-recognitiontype"},
"dom-handwritinghints-textcontext": {"dfnID":"dom-handwritinghints-textcontext","dfnText":"textContext","external":false,"refSections":[],"url":"#dom-handwritinghints-textcontext"},
"dom-handwritinghintsqueryresult-alternatives": {"dfnID":"dom-handwritinghintsqueryresult-alternatives","dfnText":"alternatives","external":false,"refSections":[],"url":"#dom-handwritinghintsqueryresult-alternatives"},
"dom-handwritinghintsqueryresult-inputtype": {"dfnID":"dom-handwritinghintsqueryresult-inputtype","dfnText":"inputType","external":false,"refSections":[],"url":"#dom-handwritinghintsqueryresult-inputtype"},
"dom-handwritinghintsqueryresult-recognitiontype": {"dfnID":"dom-handwritinghintsqueryresult-recognitiontype","dfnText":"recognitionType","external":false,"refSections":[],"url":"#dom-handwritinghintsqueryresult-recognitiontype"},
"dom-handwritinghintsqueryresult-textcontext": {"dfnID":"dom-handwritinghintsqueryresult-textcontext","dfnText":"textContext","external":false,"refSections":[],"url":"#dom-handwritinghintsqueryresult-textcontext"},
"dom-handwritinginputtype-mouse": {"dfnID":"dom-handwritinginputtype-mouse","dfnText":"\"mouse\"","external":false,"refSections":[],"url":"#dom-handwritinginputtype-mouse"},
"dom-handwritinginputtype-stylus": {"dfnID":"dom-handwritinginputtype-stylus","dfnText":"\"stylus\"","external":false,"refSections":[],"url":"#dom-handwritinginputtype-stylus"},
"dom-handwritinginputtype-touch": {"dfnID":"dom-handwritinginputtype-touch","dfnText":"\"touch\"","external":false,"refSections":[],"url":"#dom-handwritinginputtype-touch"},
"dom-handwritingmodelconstraint-languages": {"dfnID":"dom-handwritingmodelconstraint-languages","dfnText":"languages","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingmodelconstraint-languages"},{"id":"ref-for-dom-handwritingmodelconstraint-languages\u2460"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dom-handwritingmodelconstraint-languages\u2461"},{"id":"ref-for-dom-handwritingmodelconstraint-languages\u2462"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"#dom-handwritingmodelconstraint-languages"},
"dom-handwritingpoint-t": {"dfnID":"dom-handwritingpoint-t","dfnText":"t","external":false,"refSections":[],"url":"#dom-handwritingpoint-t"},
"dom-handwritingpoint-x": {"dfnID":"dom-handwritingpoint-x","dfnText":"x","external":false,"refSections":[],"url":"#dom-handwritingpoint-x"},
"dom-handwritingpoint-y": {"dfnID":"dom-handwritingpoint-y","dfnText":"y","external":false,"refSections":[],"url":"#dom-handwritingpoint-y"},
"dom-handwritingprediction-segmentationresult": {"dfnID":"dom-handwritingprediction-segmentationresult","dfnText":"segmentationResult","external":false,"refSections":[],"url":"#dom-handwritingprediction-segmentationresult"},
"dom-handwritingprediction-text": {"dfnID":"dom-handwritingprediction-text","dfnText":"text","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingprediction-text"},{"id":"ref-for-dom-handwritingprediction-text\u2460"},{"id":"ref-for-dom-handwritingprediction-text\u2461"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#dom-handwritingprediction-text"},
"dom-handwritingrecognitiontype-per-character": {"dfnID":"dom-handwritingrecognitiontype-per-character","dfnText":"\"per-character\"","external":false,"refSections":[],"url":"#dom-handwritingrecognitiontype-per-character"},
"dom-handwritingrecognitiontype-text": {"dfnID":"dom-handwritingrecognitiontype-text","dfnText":"\"text\"","external":false,"refSections":[],"url":"#dom-handwritingrecognitiontype-text"},
"dom-handwritingrecognizer-finish": {"dfnID":"dom-handwritingrecognizer-finish","dfnText":"finish","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingrecognizer-finish"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-dom-handwritingrecognizer-finish\u2460"}],"title":"6.3. finish()"}],"url":"#dom-handwritingrecognizer-finish"},
"dom-handwritingrecognizer-startdrawing": {"dfnID":"dom-handwritingrecognizer-startdrawing","dfnText":"startDrawing","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingrecognizer-startdrawing"}],"title":"4.3. HandwritingRecognizerQueryResult attributes "},{"refs":[{"id":"ref-for-dom-handwritingrecognizer-startdrawing\u2460"},{"id":"ref-for-dom-handwritingrecognizer-startdrawing\u2461"}],"title":"4.3.1. HandwritingHintsQueryResult attributes "},{"refs":[{"id":"ref-for-dom-handwritingrecognizer-startdrawing\u2462"},{"id":"ref-for-dom-handwritingrecognizer-startdrawing\u2463"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-dom-handwritingrecognizer-startdrawing\u2464"}],"title":"7. Build a HandwritingDrawing"}],"url":"#dom-handwritingrecognizer-startdrawing"},
"dom-handwritingrecognizer-startdrawing-hints-hints": {"dfnID":"dom-handwritingrecognizer-startdrawing-hints-hints","dfnText":"hints","external":false,"refSections":[],"url":"#dom-handwritingrecognizer-startdrawing-hints-hints"},
"dom-handwritingrecognizerqueryresult-hints": {"dfnID":"dom-handwritingrecognizerqueryresult-hints","dfnText":"hints","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingrecognizerqueryresult-hints"}],"title":"4.1. queryHandwritingRecognizer(constraint)"}],"url":"#dom-handwritingrecognizerqueryresult-hints"},
"dom-handwritingrecognizerqueryresult-textalternatives": {"dfnID":"dom-handwritingrecognizerqueryresult-textalternatives","dfnText":"textAlternatives","external":false,"refSections":[],"url":"#dom-handwritingrecognizerqueryresult-textalternatives"},
"dom-handwritingrecognizerqueryresult-textsegmentation": {"dfnID":"dom-handwritingrecognizerqueryresult-textsegmentation","dfnText":"textSegmentation","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingrecognizerqueryresult-textsegmentation"}],"title":"8.2. HandwritingPrediction attributes"}],"url":"#dom-handwritingrecognizerqueryresult-textsegmentation"},
"dom-handwritingsegment-beginindex": {"dfnID":"dom-handwritingsegment-beginindex","dfnText":"beginIndex","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingsegment-beginindex"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#dom-handwritingsegment-beginindex"},
"dom-handwritingsegment-drawingsegments": {"dfnID":"dom-handwritingsegment-drawingsegments","dfnText":"drawingSegments","external":false,"refSections":[],"url":"#dom-handwritingsegment-drawingsegments"},
"dom-handwritingsegment-endindex": {"dfnID":"dom-handwritingsegment-endindex","dfnText":"endIndex","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingsegment-endindex"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#dom-handwritingsegment-endindex"},
"dom-handwritingsegment-grapheme": {"dfnID":"dom-handwritingsegment-grapheme","dfnText":"grapheme","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingsegment-grapheme"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#dom-handwritingsegment-grapheme"},
"dom-handwritingstroke-addpoint": {"dfnID":"dom-handwritingstroke-addpoint","dfnText":"addPoint","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingstroke-addpoint"},{"id":"ref-for-dom-handwritingstroke-addpoint\u2460"}],"title":"7.1.2. addPoint(point)"}],"url":"#dom-handwritingstroke-addpoint"},
"dom-handwritingstroke-addpoint-point-point": {"dfnID":"dom-handwritingstroke-addpoint-point-point","dfnText":"point","external":false,"refSections":[],"url":"#dom-handwritingstroke-addpoint-point-point"},
"dom-handwritingstroke-clear": {"dfnID":"dom-handwritingstroke-clear","dfnText":"clear","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingstroke-clear"}],"title":"7.1.4. clear()"}],"url":"#dom-handwritingstroke-clear"},
"dom-handwritingstroke-getpoints": {"dfnID":"dom-handwritingstroke-getpoints","dfnText":"getPoints","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingstroke-getpoints"},{"id":"ref-for-dom-handwritingstroke-getpoints\u2460"}],"title":"7.1.3. getPoints()"}],"url":"#dom-handwritingstroke-getpoints"},
"dom-handwritingstroke-handwritingstroke": {"dfnID":"dom-handwritingstroke-handwritingstroke","dfnText":"constructor","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-handwritingstroke-handwritingstroke"}],"title":"7.1.1. HandwritingStroke()"}],"url":"#dom-handwritingstroke-handwritingstroke"},
"dom-navigator-createhandwritingrecognizer": {"dfnID":"dom-navigator-createhandwritingrecognizer","dfnText":"createHandwritingRecognizer","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-navigator-createhandwritingrecognizer"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-dom-navigator-createhandwritingrecognizer\u2460"}],"title":"4.2. HandwritingModelConstraint attributes"},{"refs":[{"id":"ref-for-dom-navigator-createhandwritingrecognizer\u2461"},{"id":"ref-for-dom-navigator-createhandwritingrecognizer\u2462"}],"title":"5.1. createHandwritingRecognizer(constraint) method "}],"url":"#dom-navigator-createhandwritingrecognizer"},
"dom-navigator-createhandwritingrecognizer-constraint-constraint": {"dfnID":"dom-navigator-createhandwritingrecognizer-constraint-constraint","dfnText":"constraint","external":false,"refSections":[],"url":"#dom-navigator-createhandwritingrecognizer-constraint-constraint"},
"dom-navigator-queryhandwritingrecognizer": {"dfnID":"dom-navigator-queryhandwritingrecognizer","dfnText":"queryHandwritingRecognizer","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-navigator-queryhandwritingrecognizer"},{"id":"ref-for-dom-navigator-queryhandwritingrecognizer\u2460"}],"title":"4.1. queryHandwritingRecognizer(constraint)"}],"url":"#dom-navigator-queryhandwritingrecognizer"},
"dom-navigator-queryhandwritingrecognizer-constraint-constraint": {"dfnID":"dom-navigator-queryhandwritingrecognizer-constraint-constraint","dfnText":"constraint","external":false,"refSections":[],"url":"#dom-navigator-queryhandwritingrecognizer-constraint-constraint"},
"drawing": {"dfnID":"drawing","dfnText":"drawing","external":false,"refSections":[{"refs":[{"id":"ref-for-drawing"}],"title":"2.  Definitions "},{"refs":[{"id":"ref-for-drawing\u2460"}],"title":"7. Build a HandwritingDrawing"}],"url":"#drawing"},
"e97a9688": {"dfnID":"e97a9688","dfnText":"unsigned long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unsigned-long"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-idl-unsigned-long\u2460"},{"id":"ref-for-idl-unsigned-long\u2461"},{"id":"ref-for-idl-unsigned-long\u2462"},{"id":"ref-for-idl-unsigned-long\u2463"},{"id":"ref-for-idl-unsigned-long\u2464"}],"title":"8.2. HandwritingPrediction attributes"}],"url":"https://webidl.spec.whatwg.org/#idl-unsigned-long"},
"efd1ec5d": {"dfnID":"efd1ec5d","dfnText":"object","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-object"}],"title":"7.1.3. getPoints()"}],"url":"https://webidl.spec.whatwg.org/#idl-object"},
"enumdef-handwritinginputtype": {"dfnID":"enumdef-handwritinginputtype","dfnText":"HandwritingInputType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-handwritinginputtype"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-enumdef-handwritinginputtype\u2460"}],"title":"4.3.1. HandwritingHintsQueryResult attributes "}],"url":"#enumdef-handwritinginputtype"},
"enumdef-handwritingrecognitiontype": {"dfnID":"enumdef-handwritingrecognitiontype","dfnText":"HandwritingRecognitionType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-handwritingrecognitiontype"}],"title":"4. Feature Query"},{"refs":[{"id":"ref-for-enumdef-handwritingrecognitiontype\u2460"}],"title":"4.3.1. HandwritingHintsQueryResult attributes "}],"url":"#enumdef-handwritingrecognitiontype"},
"finish": {"dfnID":"finish","dfnText":"finish()","external":false,"refSections":[],"url":"#finish"},
"handwriting-recognition-task-source": {"dfnID":"handwriting-recognition-task-source","dfnText":"handwriting recognition task source","external":false,"refSections":[{"refs":[{"id":"ref-for-handwriting-recognition-task-source"}],"title":"3. API Idioms"}],"url":"#handwriting-recognition-task-source"},
"handwriting-recognizer": {"dfnID":"handwriting-recognizer","dfnText":"handwriting recognizer","external":false,"refSections":[{"refs":[{"id":"ref-for-handwriting-recognizer"},{"id":"ref-for-handwriting-recognizer\u2460"}],"title":"2.  Definitions "},{"refs":[{"id":"ref-for-handwriting-recognizer\u2461"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-handwriting-recognizer\u2462"},{"id":"ref-for-handwriting-recognizer\u2463"},{"id":"ref-for-handwriting-recognizer\u2464"},{"id":"ref-for-handwriting-recognizer\u2465"},{"id":"ref-for-handwriting-recognizer\u2466"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-handwriting-recognizer\u2467"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-handwriting-recognizer\u2468"},{"id":"ref-for-handwriting-recognizer\u2460\u24ea"},{"id":"ref-for-handwriting-recognizer\u2460\u2460"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwriting-recognizer\u2460\u2461"},{"id":"ref-for-handwriting-recognizer\u2460\u2462"},{"id":"ref-for-handwriting-recognizer\u2460\u2463"}],"title":"6.3. finish()"},{"refs":[{"id":"ref-for-handwriting-recognizer\u2460\u2464"},{"id":"ref-for-handwriting-recognizer\u2460\u2465"},{"id":"ref-for-handwriting-recognizer\u2460\u2466"},{"id":"ref-for-handwriting-recognizer\u2460\u2467"},{"id":"ref-for-handwriting-recognizer\u2460\u2468"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-handwriting-recognizer\u2461\u24ea"},{"id":"ref-for-handwriting-recognizer\u2461\u2460"},{"id":"ref-for-handwriting-recognizer\u2461\u2461"}],"title":"8.1. getPrediction()"},{"refs":[{"id":"ref-for-handwriting-recognizer\u2461\u2462"},{"id":"ref-for-handwriting-recognizer\u2461\u2463"}],"title":"8.2. HandwritingPrediction attributes"}],"url":"#handwriting-recognizer"},
"handwritingdrawing": {"dfnID":"handwritingdrawing","dfnText":"HandwritingDrawing","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingdrawing"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-handwritingdrawing\u2460"},{"id":"ref-for-handwritingdrawing\u2461"},{"id":"ref-for-handwritingdrawing\u2462"},{"id":"ref-for-handwritingdrawing\u2463"},{"id":"ref-for-handwritingdrawing\u2464"},{"id":"ref-for-handwritingdrawing\u2465"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwritingdrawing\u2466"}],"title":"6.3. finish()"},{"refs":[{"id":"ref-for-handwritingdrawing\u2467"},{"id":"ref-for-handwritingdrawing\u2468"},{"id":"ref-for-handwritingdrawing\u2460\u24ea"},{"id":"ref-for-handwritingdrawing\u2460\u2460"},{"id":"ref-for-handwritingdrawing\u2460\u2461"},{"id":"ref-for-handwritingdrawing\u2460\u2462"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-handwritingdrawing\u2460\u2463"}],"title":"7.2. HandwritingDrawing"},{"refs":[{"id":"ref-for-handwritingdrawing\u2460\u2464"}],"title":"8. Get predictions of a HandwritingDrawing"},{"refs":[{"id":"ref-for-handwritingdrawing\u2460\u2465"},{"id":"ref-for-handwritingdrawing\u2460\u2466"}],"title":"8.2.2. HandwritingDrawingSegment attributes"}],"url":"#handwritingdrawing"},
"handwritingdrawing-recognizer": {"dfnID":"handwritingdrawing-recognizer","dfnText":"recognizer","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingdrawing-recognizer"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwritingdrawing-recognizer\u2460"}],"title":"8.1. getPrediction()"}],"url":"#handwritingdrawing-recognizer"},
"handwritingdrawing-strokes": {"dfnID":"handwritingdrawing-strokes","dfnText":"strokes","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingdrawing-strokes"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2460"}],"title":"7.2.1. addStroke(stroke)"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2461"}],"title":"7.2.2. removeStroke(stroke)"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2462"}],"title":"7.2.3. getStrokes()"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2463"}],"title":"7.2.4. clear()"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2464"}],"title":"8.1. getPrediction()"},{"refs":[{"id":"ref-for-handwritingdrawing-strokes\u2465"}],"title":"8.2.2. HandwritingDrawingSegment attributes"}],"url":"#handwritingdrawing-strokes"},
"handwritingrecognizer": {"dfnID":"handwritingrecognizer","dfnText":"HandwritingRecognizer","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingrecognizer"}],"title":"4.1. queryHandwritingRecognizer(constraint)"},{"refs":[{"id":"ref-for-handwritingrecognizer\u2460"},{"id":"ref-for-handwritingrecognizer\u2461"}],"title":"5. Create a handwriting recognizer"},{"refs":[{"id":"ref-for-handwritingrecognizer\u2462"},{"id":"ref-for-handwritingrecognizer\u2463"},{"id":"ref-for-handwritingrecognizer\u2464"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-handwritingrecognizer\u2465"},{"id":"ref-for-handwritingrecognizer\u2466"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-handwritingrecognizer\u2467"}],"title":"6.2. startDrawing(hints)"}],"url":"#handwritingrecognizer"},
"handwritingrecognizer-active": {"dfnID":"handwritingrecognizer-active","dfnText":"active","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingrecognizer-active"}],"title":"5.1. createHandwritingRecognizer(constraint) method "},{"refs":[{"id":"ref-for-handwritingrecognizer-active\u2460"},{"id":"ref-for-handwritingrecognizer-active\u2461"},{"id":"ref-for-handwritingrecognizer-active\u2462"}],"title":"6.1. HandwritingRecognizer object "},{"refs":[{"id":"ref-for-handwritingrecognizer-active\u2463"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwritingrecognizer-active\u2464"},{"id":"ref-for-handwritingrecognizer-active\u2465"},{"id":"ref-for-handwritingrecognizer-active\u2466"}],"title":"6.3. finish()"},{"refs":[{"id":"ref-for-handwritingrecognizer-active\u2467"}],"title":"8.1. getPrediction()"}],"url":"#handwritingrecognizer-active"},
"handwritingstroke": {"dfnID":"handwritingstroke","dfnText":"HandwritingStroke","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingstroke"}],"title":"6.2. startDrawing(hints)"},{"refs":[{"id":"ref-for-handwritingstroke\u2460"},{"id":"ref-for-handwritingstroke\u2461"},{"id":"ref-for-handwritingstroke\u2462"},{"id":"ref-for-handwritingstroke\u2463"},{"id":"ref-for-handwritingstroke\u2464"},{"id":"ref-for-handwritingstroke\u2465"}],"title":"7. Build a HandwritingDrawing"},{"refs":[{"id":"ref-for-handwritingstroke\u2466"},{"id":"ref-for-handwritingstroke\u2467"},{"id":"ref-for-handwritingstroke\u2468"}],"title":"7.1. HandwritingStroke"},{"refs":[{"id":"ref-for-handwritingstroke\u2460\u24ea"}],"title":"7.1.1. HandwritingStroke()"},{"refs":[{"id":"ref-for-handwritingstroke\u2460\u2460"}],"title":"7.1.2. addPoint(point)"},{"refs":[{"id":"ref-for-handwritingstroke\u2460\u2461"}],"title":"7.2.1. addStroke(stroke)"},{"refs":[{"id":"ref-for-handwritingstroke\u2460\u2462"}],"title":"7.2.2. removeStroke(stroke)"},{"refs":[{"id":"ref-for-handwritingstroke\u2460\u2463"},{"id":"ref-for-handwritingstroke\u2460\u2464"},{"id":"ref-for-handwritingstroke\u2460\u2465"}],"title":"8.2.2. HandwritingDrawingSegment attributes"}],"url":"#handwritingstroke"},
"handwritingstroke-points": {"dfnID":"handwritingstroke-points","dfnText":"Points","external":false,"refSections":[{"refs":[{"id":"ref-for-handwritingstroke-points"}],"title":"7.1. HandwritingStroke"},{"refs":[{"id":"ref-for-handwritingstroke-points\u2460"}],"title":"7.1.1. HandwritingStroke()"},{"refs":[{"id":"ref-for-handwritingstroke-points\u2461"}],"title":"7.1.2. addPoint(point)"},{"refs":[{"id":"ref-for-handwritingstroke-points\u2462"},{"id":"ref-for-handwritingstroke-points\u2463"}],"title":"7.1.3. getPoints()"},{"refs":[{"id":"ref-for-handwritingstroke-points\u2464"}],"title":"7.1.4. clear()"}],"url":"#handwritingstroke-points"},
"point": {"dfnID":"point","dfnText":"point","external":false,"refSections":[{"refs":[{"id":"ref-for-point"}],"title":"2.  Definitions "},{"refs":[{"id":"ref-for-point\u2460"}],"title":"7.1. HandwritingStroke"},{"refs":[{"id":"ref-for-point\u2461"}],"title":"7.1.2. addPoint(point)"}],"url":"#point"},
"queryhandwritingrecognizer-constraint": {"dfnID":"queryhandwritingrecognizer-constraint","dfnText":"queryHandwritingRecognizer(constraint)","external":false,"refSections":[],"url":"#queryhandwritingrecognizer-constraint"},
"queues-a-handwriting-recognition-api-task": {"dfnID":"queues-a-handwriting-recognition-api-task","dfnText":"queues a Handwriting Recognition API task","external":false,"refSections":[{"refs":[{"id":"ref-for-queues-a-handwriting-recognition-api-task"}],"title":"8.1. getPrediction()"}],"url":"#queues-a-handwriting-recognition-api-task"},
"segmentation": {"dfnID":"segmentation","dfnText":"Segmentation","external":false,"refSections":[{"refs":[{"id":"ref-for-segmentation"}],"title":"2.  Definitions "},{"refs":[{"id":"ref-for-segmentation\u2460"}],"title":"4.3. HandwritingRecognizerQueryResult attributes "},{"refs":[{"id":"ref-for-segmentation\u2461"}],"title":"8.2. HandwritingPrediction attributes"},{"refs":[{"id":"ref-for-segmentation\u2462"}],"title":"8.2.1. HandwritingSegment attributes"}],"url":"#segmentation"},
"startdrawing-hints": {"dfnID":"startdrawing-hints","dfnText":"startDrawing(hints)","external":false,"refSections":[],"url":"#startdrawing-hints"},
"stroke": {"dfnID":"stroke","dfnText":"stroke","external":false,"refSections":[{"refs":[{"id":"ref-for-stroke"}],"title":"7.1. HandwritingStroke"}],"url":"#stroke"},
"transcription": {"dfnID":"transcription","dfnText":"transcription","external":false,"refSections":[{"refs":[{"id":"ref-for-transcription"},{"id":"ref-for-transcription\u2460"}],"title":"2.  Definitions "},{"refs":[{"id":"ref-for-transcription\u2461"}],"title":"4.3. HandwritingRecognizerQueryResult attributes "}],"url":"#transcription"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#convert-data-format": {"displayText":"convert","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"convert","type":"dfn","url":"#convert-data-format"},
"#dictdef-handwritingdrawingsegment": {"displayText":"HandwritingDrawingSegment","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingDrawingSegment","type":"dictionary","url":"#dictdef-handwritingdrawingsegment"},
"#dictdef-handwritinghints": {"displayText":"HandwritingHints","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingHints","type":"dictionary","url":"#dictdef-handwritinghints"},
"#dictdef-handwritinghintsqueryresult": {"displayText":"HandwritingHintsQueryResult","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingHintsQueryResult","type":"dictionary","url":"#dictdef-handwritinghintsqueryresult"},
"#dictdef-handwritingmodelconstraint": {"displayText":"HandwritingModelConstraint","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingModelConstraint","type":"dictionary","url":"#dictdef-handwritingmodelconstraint"},
"#dictdef-handwritingpoint": {"displayText":"HandwritingPoint","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingPoint","type":"dictionary","url":"#dictdef-handwritingpoint"},
"#dictdef-handwritingprediction": {"displayText":"HandwritingPrediction","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingPrediction","type":"dictionary","url":"#dictdef-handwritingprediction"},
"#dictdef-handwritingrecognizerqueryresult": {"displayText":"HandwritingRecognizerQueryResult","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingRecognizerQueryResult","type":"dictionary","url":"#dictdef-handwritingrecognizerqueryresult"},
"#dictdef-handwritingsegment": {"displayText":"HandwritingSegment","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingSegment","type":"dictionary","url":"#dictdef-handwritingsegment"},
"#dom-handwritingdrawing-addstroke": {"displayText":"addStroke(stroke)","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"addStroke(stroke)","type":"method","url":"#dom-handwritingdrawing-addstroke"},
"#dom-handwritingdrawing-clear": {"displayText":"clear()","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"clear()","type":"method","url":"#dom-handwritingdrawing-clear"},
"#dom-handwritingdrawing-getprediction": {"displayText":"getPrediction()","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"getPrediction()","type":"method","url":"#dom-handwritingdrawing-getprediction"},
"#dom-handwritingdrawing-getstrokes": {"displayText":"getStrokes()","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"getStrokes()","type":"method","url":"#dom-handwritingdrawing-getstrokes"},
"#dom-handwritingdrawing-removestroke": {"displayText":"removeStroke(stroke)","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"removeStroke(stroke)","type":"method","url":"#dom-handwritingdrawing-removestroke"},
"#dom-handwritingmodelconstraint-languages": {"displayText":"languages","export":true,"for_":["HandwritingModelConstraint"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"languages","type":"dict-member","url":"#dom-handwritingmodelconstraint-languages"},
"#dom-handwritingprediction-text": {"displayText":"text","export":true,"for_":["HandwritingPrediction"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"text","type":"dict-member","url":"#dom-handwritingprediction-text"},
"#dom-handwritingrecognizer-finish": {"displayText":"finish()","export":true,"for_":["HandwritingRecognizer"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"finish()","type":"method","url":"#dom-handwritingrecognizer-finish"},
"#dom-handwritingrecognizer-startdrawing": {"displayText":"startDrawing()","export":true,"for_":["HandwritingRecognizer"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"startDrawing()","type":"method","url":"#dom-handwritingrecognizer-startdrawing"},
"#dom-handwritingrecognizerqueryresult-hints": {"displayText":"hints","export":true,"for_":["HandwritingRecognizerQueryResult"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"hints","type":"dict-member","url":"#dom-handwritingrecognizerqueryresult-hints"},
"#dom-handwritingrecognizerqueryresult-textsegmentation": {"displayText":"textSegmentation","export":true,"for_":["HandwritingRecognizerQueryResult"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"textSegmentation","type":"dict-member","url":"#dom-handwritingrecognizerqueryresult-textsegmentation"},
"#dom-handwritingsegment-beginindex": {"displayText":"beginIndex","export":true,"for_":["HandwritingSegment"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"beginIndex","type":"dict-member","url":"#dom-handwritingsegment-beginindex"},
"#dom-handwritingsegment-endindex": {"displayText":"endIndex","export":true,"for_":["HandwritingSegment"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"endIndex","type":"dict-member","url":"#dom-handwritingsegment-endindex"},
"#dom-handwritingsegment-grapheme": {"displayText":"grapheme","export":true,"for_":["HandwritingSegment"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"grapheme","type":"dict-member","url":"#dom-handwritingsegment-grapheme"},
"#dom-handwritingstroke-addpoint": {"displayText":"addPoint(point)","export":true,"for_":["HandwritingStroke"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"addPoint(point)","type":"method","url":"#dom-handwritingstroke-addpoint"},
"#dom-handwritingstroke-clear": {"displayText":"clear()","export":true,"for_":["HandwritingStroke"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"clear()","type":"method","url":"#dom-handwritingstroke-clear"},
"#dom-handwritingstroke-getpoints": {"displayText":"getPoints()","export":true,"for_":["HandwritingStroke"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"getPoints()","type":"method","url":"#dom-handwritingstroke-getpoints"},
"#dom-handwritingstroke-handwritingstroke": {"displayText":"constructor()","export":true,"for_":["HandwritingStroke"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"constructor()","type":"constructor","url":"#dom-handwritingstroke-handwritingstroke"},
"#dom-navigator-createhandwritingrecognizer": {"displayText":"createHandwritingRecognizer(constraint)","export":true,"for_":["Navigator"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"createHandwritingRecognizer(constraint)","type":"method","url":"#dom-navigator-createhandwritingrecognizer"},
"#dom-navigator-queryhandwritingrecognizer": {"displayText":"queryHandwritingRecognizer(constraint)","export":true,"for_":["Navigator"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"queryHandwritingRecognizer(constraint)","type":"method","url":"#dom-navigator-queryhandwritingrecognizer"},
"#drawing": {"displayText":"drawing","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"drawing","type":"dfn","url":"#drawing"},
"#enumdef-handwritinginputtype": {"displayText":"HandwritingInputType","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingInputType","type":"enum","url":"#enumdef-handwritinginputtype"},
"#enumdef-handwritingrecognitiontype": {"displayText":"HandwritingRecognitionType","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingRecognitionType","type":"enum","url":"#enumdef-handwritingrecognitiontype"},
"#handwriting-recognition-task-source": {"displayText":"handwriting recognition task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"handwriting recognition task source","type":"dfn","url":"#handwriting-recognition-task-source"},
"#handwriting-recognizer": {"displayText":"handwriting recognizer","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"handwriting recognizer","type":"dfn","url":"#handwriting-recognizer"},
"#handwritingdrawing": {"displayText":"HandwritingDrawing","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingDrawing","type":"interface","url":"#handwritingdrawing"},
"#handwritingdrawing-recognizer": {"displayText":"recognizer","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"recognizer","type":"dfn","url":"#handwritingdrawing-recognizer"},
"#handwritingdrawing-strokes": {"displayText":"strokes","export":true,"for_":["HandwritingDrawing"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"strokes","type":"dfn","url":"#handwritingdrawing-strokes"},
"#handwritingrecognizer": {"displayText":"HandwritingRecognizer","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingRecognizer","type":"interface","url":"#handwritingrecognizer"},
"#handwritingrecognizer-active": {"displayText":"active","export":true,"for_":["HandwritingRecognizer"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"active","type":"dfn","url":"#handwritingrecognizer-active"},
"#handwritingstroke": {"displayText":"HandwritingStroke","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"HandwritingStroke","type":"interface","url":"#handwritingstroke"},
"#handwritingstroke-points": {"displayText":"points","export":true,"for_":["HandwritingStroke"],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"points","type":"dfn","url":"#handwritingstroke-points"},
"#point": {"displayText":"point","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"point","type":"dfn","url":"#point"},
"#queues-a-handwriting-recognition-api-task": {"displayText":"queues a handwriting recognition api task","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"queues a handwriting recognition api task","type":"dfn","url":"#queues-a-handwriting-recognition-api-task"},
"#segmentation": {"displayText":"segmentation","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"segmentation","type":"dfn","url":"#segmentation"},
"#stroke": {"displayText":"stroke","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"stroke","type":"dfn","url":"#stroke"},
"#transcription": {"displayText":"transcription","export":true,"for_":[],"level":"1","normative":true,"shortname":"handwriting-recognition","spec":"handwriting-recognition-1","status":"local","text":"transcription","type":"dfn","url":"#transcription"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"displayText":"in parallel","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/system-state.html#navigator": {"displayText":"Navigator","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Navigator","type":"interface","url":"https://html.spec.whatwg.org/multipage/system-state.html#navigator"},
"https://html.spec.whatwg.org/multipage/webappapis.html#global-object": {"displayText":"global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#global-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": {"displayText":"queue a global task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a global task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#task-source": {"displayText":"task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#task-source"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-empty": {"displayText":"empty","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-iterate": {"displayText":"for each","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"for each","type":"dfn","url":"https://infra.spec.whatwg.org/#list-iterate"},
"https://infra.spec.whatwg.org/#list-remove": {"displayText":"remove","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm": {"displayText":"the current Realm Record","export":true,"for_":["ECMAScript"],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"the current realm record","type":"dfn","url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm"},
"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm": {"displayText":"realm","export":true,"for_":["ECMAScript"],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"realm","type":"dfn","url":"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm"},
"https://w3c.github.io/hr-time/#dom-domhighrestimestamp": {"displayText":"DOMHighResTimeStamp","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"DOMHighResTimeStamp","type":"typedef","url":"https://w3c.github.io/hr-time/#dom-domhighrestimestamp"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SecureContext": {"displayText":"SecureContext","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecureContext","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SecureContext"},
"https://webidl.spec.whatwg.org/#a-new-promise": {"displayText":"a new promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a new promise","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"https://webidl.spec.whatwg.org/#a-promise-rejected-with": {"displayText":"a promise rejected with","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise rejected with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org/#a-promise-resolved-with": {"displayText":"a promise resolved with","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise resolved with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-resolved-with"},
"https://webidl.spec.whatwg.org/#dfn-throw": {"displayText":"throw","export":true,"for_":["exception"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"throw","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-throw"},
"https://webidl.spec.whatwg.org/#dom-domexception-name": {"displayText":"name","export":true,"for_":["DOMException"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"name","type":"attribute","url":"https://webidl.spec.whatwg.org/#dom-domexception-name"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"displayText":"TypeError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#idl-DOMException": {"displayText":"DOMException","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMException","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-double": {"displayText":"double","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-double"},
"https://webidl.spec.whatwg.org/#idl-object": {"displayText":"object","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"object","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-object"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"displayText":"undefined","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://webidl.spec.whatwg.org/#idl-unsigned-long": {"displayText":"unsigned long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unsigned long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unsigned-long"},
"https://webidl.spec.whatwg.org/#invalidstateerror": {"displayText":"InvalidStateError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"InvalidStateError","type":"exception","url":"https://webidl.spec.whatwg.org/#invalidstateerror"},
"https://webidl.spec.whatwg.org/#notsupportederror": {"displayText":"NotSupportedError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"NotSupportedError","type":"exception","url":"https://webidl.spec.whatwg.org/#notsupportederror"},
"https://webidl.spec.whatwg.org/#operationerror": {"displayText":"OperationError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"OperationError","type":"exception","url":"https://webidl.spec.whatwg.org/#operationerror"},
"https://webidl.spec.whatwg.org/#quotaexceedederror": {"displayText":"QuotaExceededError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"QuotaExceededError","type":"exception","url":"https://webidl.spec.whatwg.org/#quotaexceedederror"},
"https://webidl.spec.whatwg.org/#reject": {"displayText":"reject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"reject","type":"dfn","url":"https://webidl.spec.whatwg.org/#reject"},
"https://webidl.spec.whatwg.org/#resolve": {"displayText":"resolve","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"resolve","type":"dfn","url":"https://webidl.spec.whatwg.org/#resolve"},
"https://webidl.spec.whatwg.org/#unknownerror": {"displayText":"UnknownError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"UnknownError","type":"exception","url":"https://webidl.spec.whatwg.org/#unknownerror"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>